<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>Learning to Identify Follow-Up Questions in Conversational Question Answering-follow-upç¬”è®°</title>
      <link href="/2020/07/22/learning2identify-follow-up/"/>
      <url>/2020/07/22/learning2identify-follow-up/</url>
      <content type="html"><![CDATA[<h2 id="Learning-to-Identify-Follow-Up-Questions-in-Conversational-Question-Answering"><a href="#Learning-to-Identify-Follow-Up-Questions-in-Conversational-Question-Answering" class="headerlink" title="Learning to Identify Follow-Up Questions in Conversational Question Answering"></a>Learning to Identify Follow-Up Questions in Conversational Question Answering</h2><h3 id="è®ºæ–‡æ‘˜è¦"><a href="#è®ºæ–‡æ‘˜è¦" class="headerlink" title="è®ºæ–‡æ‘˜è¦"></a>è®ºæ–‡æ‘˜è¦</h3><ol><li><p>æå‡ºä¸€ä¸ªè¾¨åˆ«å¤šè½®å¯¹è¯ä¸­ follow-upçš„ä»»åŠ¡(å°±æ˜¯åˆ¤æ–­ä¸‹ä¸€ä¸ªé—®é¢˜æ˜¯ä¸æ˜¯å’Œä¹‹å‰çš„ä¸Šä¸‹æ–‡ç›¸å…³)</p></li><li><p>å¹¶æå‡ºä½¿ç”¨ç»“åˆä»¥ä¸‹ä¸‰ç§ä¿¡æ¯</p><ul><li>å…³è”æ–‡ç« </li><li>å¯¹è¯å†å²</li><li><p>å€™é€‰çš„ä¸‹ä¸ªé—®é¢˜</p><p>ä¹‹é—´çš„å…³ç³»çš„attentive-pooling networksç½‘ç»œã€‚</p></li></ul></li></ol><h3 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h3><p>è®ºæ–‡æ•°æ®é›†çš„æ„é€ æ˜¯åŸºäºQuACæ‰€æ”¹çš„ï¼Œæ‰€ä»¥å…ˆä»‹ç»QuAC</p><h4 id="QuAC"><a href="#QuAC" class="headerlink" title="QuAC"></a>QuAC</h4><p>è¿™ç¯‡æ–‡ç« çš„æ•°æ®é›†æ˜¯åŸºäº18å¹´Allen-AIæ‰€æå‡ºçš„<a href="https://quac.ai/" target="_blank" rel="noopener">QuACæ•°æ®é›†</a>ï¼Œå®è´¨ä¸Šè¿˜æ˜¯æŠ½å–å¼ï¼Œä¸å…¶å®ƒæ•°æ®é›†ä¸åŒæ˜¯</p><ol><li>æé—®è€…æ²¡æœ‰é¢„å…ˆçœ‹passageï¼ŒåªçŸ¥é“ä¸»é¢˜ï¼Œç„¶åè·Ÿç€ä¸»é¢˜è‡ªç”±æé—®ã€‚è¿™ä¹ˆåšï¼Œå¯ä»¥é¿å…æé—®è€…å—æ–‡æœ¬å½±å“ï¼Œä»è€Œæå‡ºçš„é—®é¢˜é‡Œé¢åŒ…å«æ–‡æœ¬ä¸­çš„åŸè¯æˆ–è€…åŒä¹‰è¯ã€‚é‚£ä¹ˆtrainå‡ºæ¥çš„modelï¼Œä¼šå­˜åœ¨å› ä¸ºword embeddingç›¸è¿‘ï¼Œå°±èƒ½é¢„æµ‹å‡†ç¡®ï¼Œä½†å…¶å®modelå¹¶æ²¡æœ‰çœŸæ­£åšåˆ°å¯¹è¯­ä¹‰çš„ç†è§£ã€‚</li><li><strong>æé—®çš„é—®é¢˜ä¹‹é—´æ˜¯æœ‰è¯­ä¹‰å…³è”çš„</strong>ï¼Œé‚£ä¹ˆè¿™æ ·å¯ä»¥è®­ç»ƒmodelï¼Œé€šè¿‡ä¸Šä¸‹æ–‡æ¥æå–è¯­ä¹‰çš„èƒ½åŠ›ã€‚</li></ol><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh04lemf0mj30t20f8jug.jpg" alt="æ•°æ®ä¾‹å­"></p><p>çº¢è‰²æˆ‘æ¡†èµ·æ¥çš„è¯´æ˜ä¸‹é¢çš„é—®é¢˜æ˜¯å’Œä¸Šé¢ç›¸å…³çš„ï¼Œæ‰€ä»¥å°±éœ€è¦è¾“å…¥ä¹‹å‰çš„contextä¿¡æ¯å»å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œä¼šæ¯”å¸¸è§„çš„SQuADéš¾ä¸å°‘ã€‚</p><p>QuACçš„å›ç­”è€…ä¸æé—®è€…æ˜¯åˆ†å¼€çš„ï¼ˆä¸€èˆ¬æ•°æ®é›†éƒ½æ˜¯åˆ†å¼€çš„ï¼‰ã€‚å›ç­”è€…å¯ä»¥çœ‹åˆ°æ–‡æœ¬å†…å®¹ï¼Œåœ¨å›ç­”æ—¶ï¼Œç­”æ¡ˆåˆ†æˆä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯shouldï¼ˆç¡®å®šçš„ï¼‰ï¼Œcouldï¼ˆå¯èƒ½ç¡®å®šçš„ï¼‰ï¼ŒNo answerï¼ˆä¸èƒ½å›ç­”ï¼‰ä¸‰ç§ã€‚å¯¹äºshouldå’Œcouldï¼Œå›ç­”è€…éœ€è¦ä»¥text spanï¼ˆæ–‡æœ¬ä¸­çš„ç‰‡æ®µï¼‰æ¥ä½œä¸ºç­”æ¡ˆã€‚è¡¥å……ä¸€ç‚¹ï¼ŒQAæ•°æ®é›†çš„ç­”æ¡ˆæœ‰ï¼štext spanï¼ˆæ–‡æœ¬ç‰‡æ®µï¼‰ã€multiple-choiceï¼ˆé—®é¢˜é€‰é¡¹ï¼‰ã€free-form textï¼ˆè‡ªç”±ç”Ÿæˆçš„æ–‡æœ¬ï¼‰ç­‰å‡ ç§ã€‚å…¶ä¸­text spanæ¯”è¾ƒå¥½ç”¨æ¥è¡¡é‡æœºå™¨æ˜¯å¦é¢„æµ‹å‡†ç¡®ã€‚</p><h4 id="LIF"><a href="#LIF" class="headerlink" title="LIF"></a>LIF</h4><p>è¿™ç¯‡æ–‡ç« æ‰€æå‡ºçš„æ•°æ®é›†è¢«ç§°ä¸º<a href="https://github.com/nusnlp/LIF" target="_blank" rel="noopener">LIF</a></p><h5 id=""><a href="#" class="headerlink" title=""></a><img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20200722170344.png" alt=""></h5><p>ç»™å‡ºä¸€ç¯‡æ–‡ç« å’Œå¯¹è¯å†å²ï¼Œä¼šç»™å‡ºå€™é€‰é—®é¢˜ï¼Œç”¨æ¥åˆ¤æ–­å€™é€‰é—®é¢˜æ˜¯å¦ä¸ºfollow-upé—®é¢˜ï¼Œå¦‚æœæ˜¯åˆ™ä¸ºValidï¼Œå¦åˆ™ä¸ºInvalidã€‚</p><ul><li>æ ¹æ®QuACä¸­çš„<code>should ask</code>ä½œä¸ºValid</li><li>ç”±äºQuACçš„æµ‹è¯•é›†æ— æ³•è·å–ï¼Œå°†éªŒè¯é›†ä»¥ç¯‡ç« ä¸ºå•ä½åˆ†å‡ºä¸€ä¸ªæµ‹è¯•é›†</li><li>Invalidç”Ÿæˆæ–¹æ³•</li></ul><ol><li><p>ä»å…¶å®ƒå¯¹è¯ä¸­è·å–ä¸€äº›é—®é¢˜æ¥ä½œä¸ºè´Ÿæ ·æœ¬</p><ul><li>ä½¿ç”¨Infersentç½‘ç»œæ¯”è¾ƒå…¶å®ƒé—®é¢˜å’Œå½“å‰ç¯‡ç« çš„ç›¸ä¼¼åº¦ï¼Œé€‰æ‹©Top200</li><li><p>ä½¿ç”¨å½“å‰ç¯‡ç« é€‰æ‹©å¥½çš„Validé—®é¢˜å’Œå½“å‰ç¯‡ç« ä¹‹å‰çš„å¯¹è¯å†å²ä½œä¸ºè¯æ®ï¼Œä¸Top200è®¡ç®—Tokençš„é‡å åº¦ï¼Œå¹¶é™¤ä»¥Top200ä¸­æ¯ä¸ªé—®é¢˜çš„é•¿åº¦ï¼Œæ¥è¿›è¡Œå½’ä¸€åŒ–ï¼Œç„¶åè®¾ç½®ä¸€ä¸ªé˜ˆå€¼æ¥é€‰å–å‡ºè‡³å°‘ä¸€ä¸ªè‡³å¤šä¸¤ä¸ªæœ€é«˜æ•°é‡é‡å åº¦çš„é—®é¢˜æ¥ä½œä¸ºè´Ÿæ ·æœ¬Invalid</p><blockquote><p>è¿™ä¸€æ­¥å’Œä¹‹å‰æˆ‘åšé—®ç­”å°è¯•è¿‡çš„<a href="https://arxiv.org/abs/1905.05910" target="_blank" rel="noopener">Passage Ranking with Weak Supervision</a>è¿™ç¯‡æ–‡ç« å¾ˆåƒï¼Œéƒ½æ˜¯ç”±äºå¦‚æœéšæœºé€‰æ‹©è´Ÿæ ·æœ¬çš„è¯ï¼Œç”±äºæ‰€å±äºçš„ç¯‡ç« çš„ä¸åŒï¼Œå’Œæ­£æ ·æœ¬çš„å·®è·ä¼šå¤ªå¤§äº†ï¼Œè¿™æ ·æ¨¡å‹ä¼šå¾ˆå®¹æ˜“åˆ†è¾¨ã€‚æ‰€ä»¥é‡‡ç”¨äº†ä¸€å®šçš„æ–¹æ³•ï¼Œä½¿è´Ÿæ ·æœ¬æ›´æ¥è¿‘äºæ­£æ ·æœ¬ï¼Œæ›´ä¸ºéš¾åˆ†ï¼Œè¿™æ ·ä»»åŠ¡ä¼šéš¾æ›´å¤šï¼Œæ¨¡å‹ä¹Ÿä¼šå­¦åˆ°æ›´æ·±çš„è¯­ä¹‰ï¼Œè€Œä¸æ˜¯å­—é¢ä¸Šçš„ç›¸ä¼¼ã€‚</p></blockquote></li></ul></li></ol><ol><li><p>åœ¨åŒä¸€ä¸ªå¯¹è¯çš„å·²ç»æ ‡æ³¨ä¸ºValidçš„follow-upé—®é¢˜ä¹‹åé€‰æ‹©Non-follow-upé—®é¢˜ä½œä¸ºè´Ÿæ ·æœ¬</p><ul><li>è¿‡æ»¤æ‰åŒ…å«è¿™äº›è¯çš„é—®é¢˜what else, any other, interesting aspectsï¼Œä¸¾äº†ä¸ªä¾‹å­(Any other insteresting aspects about this article?)</li></ul></li><li><p>æ ¹æ®Invalidåˆ’åˆ†çš„ä¸¤ç§ä¸åŒæ–¹å¼å°†æµ‹è¯•é›†åˆ†ä¸ºä¸‰ç§æƒ…å½¢</p><ol><li>Test-I: åŒ…å«äº†æ¥è‡ªå…¶å®ƒå¯¹è¯çš„Invalidå’Œæ¥è‡ªåŒä¸€ä¸ªå¯¹è¯çš„Invalid</li><li>Test-II: Invalidåªæ¥è‡ªäºå…¶å®ƒå¯¹è¯</li><li><p>Test-III: Invalidåªæ¥è‡ªäºåŒä¸€ä¸ªå¯¹è¯</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh05r5g3gkj30qs0coac8.jpg" alt=""></p></li></ol></li></ol><ul><li><p>æ•°æ®é›†çš„éš¾ç‚¹</p><p>  æ¨¡å‹éœ€è¦å»åˆ¤åˆ«å½“å‰çš„é—®é¢˜çš„ä¸»é¢˜æ˜¯å¦å’Œç¯‡ç« è¿˜æœ‰ä¹‹å‰çš„å¯¹è¯ä¸€è‡´ï¼Œ è¿™äº›æ˜¯å¾ˆå—ä¸€äº›ä»£è¯(I, He, My, Hisâ€¦.)çš„å½±å“çš„ï¼Œæ‰€ä»¥åœ¨å…¶ä¸­æ‰€éœ€åšçš„<strong>æŒ‡ä»£æ¶ˆè§£</strong>å°±æ˜¯å…³é”®ã€‚ç¬¬äºŒç‚¹æ˜¯æ¨¡å‹è¿˜å¿…éœ€å»åˆ¤æ–­å½“å‰é—®é¢˜æ˜¯å¦èƒ½ç”±ç¯‡ç« å’Œå†å²å¯¹è¯ä¸­æ¨ç†å‡ºç­”æ¡ˆçš„ï¼Œå¦åˆ™å°±å’Œä¸Šè¿°ä¾‹å­ä¸­çš„ç¬¬äºŒç‚¹ä¸€æ ·ï¼ŒåŒæ ·ä¹Ÿä¸ºInvalidã€‚ç¬¬ä¸‰ç‚¹å°±æ˜¯æŠ“ä½å¯¹è¯ä¸­çš„é—®é¢˜è¿ç»­æ€§(continuity)å’Œ(shift)ä¹Ÿæ˜¯è¿™ä¸ªä»»åŠ¡å¾ˆæœ‰å¿…è¦çš„ä¸€ç‚¹</p></li></ul><h3 id="Three-Way-Attentive-Pooling-Network"><a href="#Three-Way-Attentive-Pooling-Network" class="headerlink" title="Three-Way Attentive Pooling Network"></a>Three-Way Attentive Pooling Network</h3><h4 id="Attentive-pooling-Networks"><a href="#Attentive-pooling-Networks" class="headerlink" title="Attentive pooling Networks"></a>Attentive pooling Networks</h4><p><a href="https://arxiv.org/abs/1602.03609" target="_blank" rel="noopener">è®ºæ–‡</a></p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh03pbw82yj30up0u0af4.jpg" alt="Attentive-Pooling-Network"></p><p>AP-BILSTMç®—æ³•çš„è®¾è®¡æ˜¯å°†é—®é¢˜å’Œç­”æ¡ˆç»è¿‡BILSTMæŠ½å–ç‰¹å¾ï¼Œç„¶åé€šè¿‡é—®é¢˜å’Œç­”æ¡ˆçš„ç‰¹å¾è®¡ç®—soft alignmentï¼ˆå¯¹ä¸Šä¸‹æ–‡æ‰€ä»¥hè®¡ç®—attentionï¼‰ï¼Œè¯¥çŸ©é˜µåŒ…å«äº†é—®é¢˜å’Œç­”æ¡ˆç›¸äº’ä½œç”¨çš„é‡è¦æ€§å¾—åˆ†ï¼Œ<strong>å¯¹è¯¥çŸ©é˜µçš„åˆ—å–æœ€å¤§ï¼Œå³å¯å¾—åˆ°ç­”æ¡ˆå¯¹é—®é¢˜çš„é‡è¦æ€§å¾—åˆ†ï¼Œè€Œå¯¹è¯¥çŸ©é˜µè¡Œå–æœ€å¤§ï¼Œå³å¯å¾—åˆ°é—®é¢˜å¯¹ç­”æ¡ˆçš„é‡è¦æ€§å¾—åˆ†<em>ã€‚</em></strong>ä¹˜ä»¥å„è‡ªç›¸åº”çš„çŸ©é˜µä¹‹åå†è®¡ç®—$r_{q}$ä¸$r_{a}$çš„ä½™å¼¦ç›¸ä¼¼åº¦ã€‚</p><script type="math/tex; mode=display">S(q, a) = cos(\theta) = \frac{r_{q} \cdot r_{a}}{||r_{q}||||r_{a}||}</script><p>è®­ç»ƒæ—¶å€™æ˜¯ä½¿ç”¨çš„$pairwise$æ–¹å¼è¿›è¡Œè®­ç»ƒï¼Œå³é€‰å–ä¸€ä¸ªæ­£æ ·æœ¬å’Œä¸€ä¸ªè´Ÿæ ·æœ¬ï¼Œç„¶åæŸå¤±å‡½æ•°ä¸ºé‡‡ç”¨çš„$Hinge$ $Loss$.</p><script type="math/tex; mode=display">L = max[0, M - cos(q, a_{+}) + cos(q, a_{-}))]</script><h4 id="Embedding-and-Encoding"><a href="#Embedding-and-Encoding" class="headerlink" title="Embedding and Encoding"></a>Embedding and Encoding</h4><p>ä½¿ç”¨chantacter embedding å’Œ word embedding ç»“åˆï¼Œå¯¹ä¸‰ç§ä¿¡æ¯åˆ†åˆ«æ±‚å‡ºembedding vector.</p><p>å…¶ä¸­char embedding ä½¿ç”¨çš„æ˜¯ä½¿ç”¨çš„CNNå»è®­ç»ƒï¼Œé¦–å…ˆå¯¹æ¯ä¸ªå­—ç¬¦å–ä¸€ä¸ªéšæœºvector, æ¯”å¦‚wordè¿™ä¸ªå•è¯[â€˜wâ€™, â€˜oâ€™, â€˜râ€™, â€˜dâ€™]ï¼Œ è¿™æ ·æ•´ä¸ªå¥å­æ„æˆäº†ä¸€ä¸ªmç»´çš„vectorï¼Œç„¶åé€šè¿‡å·ç§¯ç¥ç»ç½‘ç»œä¹‹åæ˜ å°„ä¸ºnç»´ï¼Œå†å–Max-poolingä¹‹åå¾—åˆ°ä¸€ä¸ªvectorï¼ˆè¿™ä¸ªé˜¶æ®µæ˜¯å¯å­¦ä¹ çš„ï¼‰ï¼Œå°†è¿™ä¸ªvectorå’Œwordè¿™ä¸ªè¯å‘é‡æ‹¼æ¥èµ·æ¥ä½œä¸ºè¾“å…¥ã€‚å…¶ä¸­è¯å‘é‡æ˜¯é‡‡ç”¨çš„é¢„è®­ç»ƒå¥½çš„gloveè¯å‘é‡ã€‚</p><p>ä½¿ç”¨LSTMæ¥Encodingè¾“å…¥å‘é‡ï¼Œ å…¶ä¸­$H$ä¸ºLSTMçš„éšå±‚å•å…ƒæ•°é‡ï¼Œåˆ†åˆ«å¾—åˆ°è¾“å‡ºçŸ©é˜µä¸º</p><ul><li>å†å²å¯¹è¯    $\mathbf{Q} \in \mathbb{R}^{U \times H}$</li><li>å€™é€‰é—®é¢˜    $\mathbf{C} \in \mathbb{R}^{V \times H}$</li><li>ç¯‡ç« çš„å¥å­çº§åˆ«   $\mathbf{D} \in \mathbb{R}^{T \times H}$</li></ul><h5 id="Joint-Encoding"><a href="#Joint-Encoding" class="headerlink" title="Joint Encoding"></a>Joint Encoding</h5><p>é¦–å…ˆä¼šè®¡ç®—ä¸€ä¸ªå†å²å¯¹è¯å’Œç¯‡ç« çš„ç›¸ä¼¼åº¦çŸ©é˜µ    $\mathbf{A} \in \mathbb{R}^{T \times U} = DQ^{T}$</p><p>å¯¹$A$åšè¡Œ(row)ä¸Šçš„Softmaxå¾—åˆ°$\mathbf{R} \in \mathbb{R}^{T \times U}$ï¼Œå¯ä»¥çœ‹ä½œç¯‡ç« ä¸­æ¯ä¸ªå¥å­ä¸ŠTokenå¯¹åº”æ¯ä¸ªå†å²å¯¹è¯ä¸Šæ¯ä¸ªTokençš„æ¦‚ç‡ï¼Œå³å†å²å¯¹è¯ä¸­å“ªäº›æ˜¯å…³é”®ä¿¡æ¯ã€‚è¿™æ ·å¯¹äºæ‰€æœ‰çš„ç¯‡ç« è¯ï¼Œå†å²å¯¹è¯çš„æ€»è¡¨è¾¾å¯ä»¥è®¡ç®—ä¸º$\mathbf{G}=\mathbf{R} \mathbf{Q} \in \mathbb{R}^{T \times H}$, (å…¶å®å°±æ˜¯APé‡Œé¢çš„æ–¹å¼)ï¼Œç„¶åè¿™ä¸ªè¡¨è¾¾$\mathbf{G}$å†å’Œ$\mathbf{D}$æ‹¼æ¥èµ·æ¥é€šè¿‡å¦å¤–ä¸€ä¸ªBiLSTMè·å¾—ç¯‡ç« å’Œå†å²å¯¹è¯çš„Joint Encodingä¸º$\mathbf{V} \in \mathbb{R}^{T \times H}$ï¼Œè¿™ä¸ª$V$ç›¸å½“äºæ˜¯ç¯‡ç« çš„Embeddingèåˆäº†å†å²å¯¹è¯çš„ä¸€äº›ä¿¡æ¯ã€‚</p><h5 id="Multi-Factor-Encoding"><a href="#Multi-Factor-Encoding" class="headerlink" title="Multi-Factor Encoding"></a>Multi-Factor Encoding</h5><p><a href="https://arxiv.org/abs/1801.08290" target="_blank" rel="noopener">A questionfocused multi-factor attention network for question answering.</a></p><p>çœ‹äº†å‘ç°ä¸Šé¢çš„Joint Encodingæ“ä½œåŒæ ·æ˜¯æ¥è‡ªäºè¿™ç¯‡è®ºæ–‡çš„ã€‚(çœŸå¤æ‚ğŸ˜“)</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh07z2eblnj30ts0r6wj7.jpg" alt=""></p><p>é€‰å–å¤šä¸ªå› å­ï¼Œå¦‚æœ$m$ä»£è¡¨çš„æ˜¯å› å­æ•°é‡ï¼Œåˆ™</p><script type="math/tex; mode=display">\mathbf{F}^{[1: m]}=\mathbf{V} \mathbf{W}_{f}^{[1: m]} \mathbf{V}^{\top}, \mathbf{W}_{f}^{[1: m]} \in \mathbb{R}^{H \times m \times H}</script><p>è¿™ä¹Ÿæ˜¯è®¡ç®—Attentionçš„å¸¸è§æ–¹å¼ä¹‹ä¸€ã€‚ç„¶åå¯¹$F^{[1:m]}$åœ¨ä¸åŒå› å­ä¸Šå–Max-Poolingï¼Œä¹‹åè·å¾—æ³¨æ„åŠ›çŸ©é˜µ$F\in \mathbb R^{T \times T}$ï¼Œ ç„¶åå¯¹FåŒæ ·ä½œç”¨Row-Softmaxè·å¾—$\tilde{\mathbf{F}}$ï¼Œè¿™æ ·Self Encodingå°±å¯ä»¥è¡¨ç¤ºä¸º$\mathbf{M}=\tilde{\mathbf{F}} \mathbf{V} \in \mathbb{R}^{T \times H}$ï¼Œä¸ä¹‹å‰çš„Joint Encodingæ‹¼æ¥èµ·æ¥ä¹‹åè¾“å…¥åˆ°DNNä¸­è·å–åˆ°$\mathbf{Y}$ï¼Œå†è¾“å…¥åˆ°LSTMä¸­è·å–åˆ°æœ€ç»ˆçš„Passage Encoding $P \in \mathbb{R}^{T \times H}$</p><h4 id="Three-Way-Attentive-Pooling"><a href="#Three-Way-Attentive-Pooling" class="headerlink" title="Three-Way Attentive Pooling"></a>Three-Way Attentive Pooling</h4><p>å…ˆä¸Šç½‘ç»œå›¾</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh08foxgnrj30u00wugt9.jpg" alt=""></p><h5 id="Attention-Matrix-Computation"><a href="#Attention-Matrix-Computation" class="headerlink" title="Attention Matrix Computation"></a>Attention Matrix Computation</h5><ul><li>å†å²å¯¹è¯å’Œç¯‡ç« çš„æ³¨æ„åŠ›çŸ©é˜µ$\mathbf{A}_{q, p}=\mathbf{f}_{\mathrm{attn}}(\mathbf{Q}, \mathbf{P}) = PQ^{T}$ï¼Œ $A_{q, p}(i, j)$ä»£è¡¨ç¯‡ç« ä¸­ç¬¬iä¸ªtokenå’Œå†å²å¯¹è¯ä¸­ç¬¬jä¸ªtokençš„ç›¸ä¼¼åº¦</li><li>å€™é€‰é¡¹å’Œç¯‡ç« åŒæ ·è®¡ç®—å¾—åˆ° $\mathbf{A}_{c, p}=\mathbf{f}_{\mathrm{attn}}(\mathbf{C}, \mathbf{P})$</li><li>å€™é€‰é¡¹å’Œå†å²å¯¹è¯è®¡ç®—å¾—åˆ° $\mathbf{A}_{c, q}=\mathrm{f}_{\mathrm{attn}}(\mathbf{C}, \mathbf{Q})$</li></ul><h5 id="Attention-Pooling"><a href="#Attention-Pooling" class="headerlink" title="Attention Pooling"></a>Attention Pooling</h5><p>æ¥ä¸‹æ¥çš„å°±æ˜¯å’Œä¹‹å‰çš„Attention pooling Networkç±»ä¼¼ï¼Œåªæ˜¯å¯¹äºæ¯ä¸ªçŸ©é˜µé€‰å–äº†ä¸åŒæ–¹å‘ä¸Šçš„Max Pooling + Softmax</p><h5 id="Candidate-Scoring"><a href="#Candidate-Scoring" class="headerlink" title="Candidate Scoring"></a>Candidate Scoring</h5><p>å–äº†ä¸¤ç§æƒ…å†µï¼Œå°±æ˜¯è€ƒè™‘å’Œä¸è€ƒè™‘Passage Encoding $P$ï¼Œå¾—åˆ°æ¯ä¸ªå€™é€‰é¡¹çš„åˆ†æ•°</p><script type="math/tex; mode=display">\begin{aligned}\operatorname{score}(\mathcal{C}) &=s_{1}+s_{2} \\&=\mathrm{f}_{\operatorname{sim}}(\mathbf{C}, \mathbf{Q} \mid \mathbf{P})+\mathrm{f}_{\mathrm{sim}}(\mathbf{C}, \mathbf{Q})\end{aligned}</script><p>ä½¿ç”¨äºŒå€¼äº¤å‰ç†µå‡½æ•°ä½œä¸ºæŸå¤±å‡½æ•°è¿›è¡Œè®­ç»ƒï¼Œè€Œé¢„æµ‹æ—¶é€‰å–ä¸€ä¸ªé˜ˆå€¼æ¥é¢„æµ‹ã€‚</p><h4 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h4><p>é€‰å–äº†ä¸€äº›BaseLineæ¨¡å‹è¿›è¡Œæ¯”è¾ƒï¼Œæœ€ç»ˆç»“æœ</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh093g3r5tj31h00q2doc.jpg" alt=""></p><p>å‚è€ƒ</p><ul><li><a href="https://zhuanlan.zhihu.com/p/84110287" target="_blank" rel="noopener">è®ºæ–‡ç¬”è®°QuAC</a></li><li><a href="https://www.sohu.com/a/221235262_500659" target="_blank" rel="noopener">AAAI 2018è®ºæ–‡è§£è¯» | åŸºäºæ–‡æ¡£çº§é—®ç­”ä»»åŠ¡çš„æ–°æ³¨æ„åŠ›æ¨¡å‹ </a></li><li><a href="https://www.zhihu.com/question/265782298" target="_blank" rel="noopener">character embeddingå¦‚ä½•å¾—åˆ°ï¼Ÿ</a></li><li><a href="https://www.jianshu.com/p/2b3a7d0a397e" target="_blank" rel="noopener">Attentionæœºåˆ¶åœ¨é—®ç­”ç³»ç»Ÿä¸­çš„åº”ç”¨â€”attentive pooling networks</a></li></ul>]]></content>
      
      
        <tags>
            
            <tag> nlp </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>simanse</title>
      <link href="/2020/04/22/simanse/"/>
      <url>/2020/04/22/simanse/</url>
      <content type="html"><![CDATA[<h2 id="å­ªç”Ÿç½‘ç»œ"><a href="#å­ªç”Ÿç½‘ç»œ" class="headerlink" title="å­ªç”Ÿç½‘ç»œ"></a>å­ªç”Ÿç½‘ç»œ</h2><blockquote><p>Siamese NetWork åŸè®ºæ–‡ ã€ŠLearning a Similarity Metric Discriminatively, with Application to Face Verificationã€‹ç¬”è®°</p></blockquote><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>ä¼ ç»Ÿåˆ¤åˆ«å¼åˆ†ç±»æ–¹æ³•ä¾‹å¦‚ç¥ç»ç½‘ç»œæˆ–æ”¯æŒå‘é‡æœºæ— æ³•è§£å†³åƒäººè„¸è¯†åˆ«è¿™ç§ä»»åŠ¡ï¼š<strong>ç±»åˆ«éå¸¸å¤šï¼Œè€Œæ¯ä¸ªç±»åˆ«çš„æ ·æœ¬åˆå¾ˆå°‘</strong>ã€‚é€šå¸¸ï¼Œå¯¹è¿™ç§ä»»åŠ¡æ¥è¯´ä½¿ç”¨çš„æ˜¯åŸºäº<strong>è·ç¦»</strong>è¯„åˆ¤çš„æ–¹æ³•ï¼Œå³å°†æ–°æ ·æœ¬ä¸å·²ç»åˆ†ç±»äº†çš„æ ·æœ¬è®¡ç®—ç›¸ä¼¼åº¦ï¼Œæ¥è¯„åˆ¤åˆ°åº•å±äºå“ªç±»ã€‚æ‰€ä»¥æå‡ºSiamese Structureã€‚</p><h3 id="ä¸»è¦æ€æƒ³"><a href="#ä¸»è¦æ€æƒ³" class="headerlink" title="ä¸»è¦æ€æƒ³"></a>ä¸»è¦æ€æƒ³</h3><p>æ‰¾åˆ°ä¸€ä¸ª$G_{W}(X)$ï¼Œå…¶ä¸­$W$ä¸ºå¾…æ±‚å‚æ•°ï¼Œä½¿å¾—è·ç¦»å‡½æ•°<script type="math/tex">E_{W}(X_{1}, X{2}) = ||G_{W}(X_{1})- G_{W}(X_{2})||</script>ï¼Œ</p><ol><li>å½“$X_{1}$ä¸$X_{2}$å±äºåŒä¸€ç±»æ—¶ï¼Œ$E_{W}(X_{1}, X_{2})$å¾ˆå°</li><li>å½“$X_{1}$ä¸$X_{2}$<strong>ä¸</strong>å±äºåŒä¸€ç±»æ—¶ï¼Œ$E_{W}(X_{1}, X_{2})$å¾ˆå¤§</li></ol><p>è®­ç»ƒæ–¹æ³•ï¼Œå³ä»æ ·æœ¬ä¸­è¾“å…¥$pair(X_{1}, X_{2})$ï¼Œå½“$X_{1}, X{2}$å±äºåŒä¸€ç±»æ—¶ï¼Œæœ€å°åŒ–$E$ï¼Œåä¹‹ï¼Œæœ€å¤§åŒ–$E$ã€‚</p><ul><li>ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿™é‡Œ$G$å¯¹ä¸è¾“å…¥çš„$X_{1}, X_{2}$æ˜¯åŒä¸€ä¸ªç»“æ„ï¼Œå³å®ƒä»¬æ˜¯å…±äº«æƒé‡$W$çš„ï¼Œç›¸ä¼¼åº¦è¯„åˆ¤æ˜¯å¯¹ç§°çš„ï¼Œè¿™ç§ç»“æ„ç§°ä¸º<strong>å­ªç”Ÿç»“æ„(Siamese architecture)</strong></li><li>å­ªç”Ÿç»“æ„çš„çµæ´»æ€§å³å¯ä»¥è‡ªç”±é€‰æ‹©æƒ³è¦çš„ç‰¹å¾æå–å™¨$G$ï¼Œæ— è®ºæ˜¯ç¥ç»ç½‘ç»œæˆ–è€…æ˜¯ä¼ ç»Ÿæ–¹æ³•PCAç­‰ï¼Œåœ¨è¿™ç¯‡è®ºæ–‡ä¸­ï¼Œä½œè€…é‡‡ç”¨çš„æ˜¯å·ç§¯ç¥ç»ç½‘ç»œæ¥è¿›è¡Œäººè„¸éªŒè¯çš„ä»»åŠ¡ã€‚</li></ul><h3 id="æ¨¡å‹ç»“æ„"><a href="#æ¨¡å‹ç»“æ„" class="headerlink" title="æ¨¡å‹ç»“æ„"></a>æ¨¡å‹ç»“æ„</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ge2ep1lv7sj30vi0q6abm.jpg" alt=""></p><p>å¯¹äºè®­ç»ƒæ ·æœ¬$(X_{1}, X_{2})$æ˜¯åŒä¸€ä¸ªäººçš„å›¾åƒï¼Œ$(X_{1}, X_{2}^{â€˜})$æ˜¯ä¸åŒäººçš„å›¾åƒã€‚åˆ™æœ‰ä»¥ä¸‹ï¼š</p><ol><li>å­˜åœ¨$m&gt;0$ï¼Œä½¿å¾—$E_{W}(X_{1}, X_{2})+m &lt; E_{W}(X_{1}, X_{2}^{â€˜})$ï¼Œå…¶ä¸­mä»£è¡¨<strong>margin</strong></li><li>å½“$E_{W}$å°äºä¸€ä¸ªè®¾å®šçš„é˜ˆå€¼æ—¶ï¼Œåˆ™è¾“å‡ºæ ‡ç­¾$Y$ä¸º1ï¼Œåä¹‹$Y=0$</li></ol><h4 id="Loss-Function"><a href="#Loss-Function" class="headerlink" title="Loss Function"></a>Loss Function</h4><script type="math/tex; mode=display">\begin{aligned}\mathcal{L}(W) &=\sum_{i=1}^{P} L\left(W,\left(Y, X_{1}, X_{2}\right)^{i}\right) \\L\left(W,\left(Y, X_{1}, X_{2}\right)^{i}\right) &=(1-Y) L_{G}\left(E_{W}\left(X_{1}, X_{2}\right)^{i}\right) +Y L_{I}\left(E_{W}\left(X_{1}, X_{2}\right)^{i}\right)\end{aligned}</script><p>å…¶ä¸­$L_{G}$ä¸ºæ­£æ ·æœ¬çš„loss, $L_{I}$ä¸ºè´Ÿæ ·æœ¬çš„lossï¼Œ$Y$ä¸ºå„è‡ªçš„æ ‡ç­¾</p><p>åœ¨è®ºæ–‡ä¸­ï¼Œä½œè€…æ‰€å–$L_{G}$å’Œ$L_{I}$å¦‚ä¸‹ï¼Œæœ€ç»ˆloss functionä¸ºï¼Œä½†ç°åœ¨åŸºæœ¬ä¸ç”¨äº†ï¼Œå…¶ä¸­$Q$ä¸ºå¸¸æ•°ï¼Œé€šå¸¸è®¾ä¸º$E_{W}$çš„ä¸Šç•Œ:</p><script type="math/tex; mode=display">\begin{aligned}L\left(W, Y, X_{1}, X_{2}\right) &=(1-Y) L_{G}\left(E_{W}\right)+Y L_{I}\left(E_{W}\right) \\&=(1-Y) \frac{2}{Q}\left(E_{W}\right)^{2}+(Y) 2 Q e^{-\frac{2.77}{Q}E_{W}}\end{aligned}</script><h4 id="Constrasive-Lossï¼ˆå¯¹æ¯”æŸå¤±ï¼‰"><a href="#Constrasive-Lossï¼ˆå¯¹æ¯”æŸå¤±ï¼‰" class="headerlink" title="Constrasive Lossï¼ˆå¯¹æ¯”æŸå¤±ï¼‰"></a>Constrasive Lossï¼ˆå¯¹æ¯”æŸå¤±ï¼‰</h4><p>åœ¨caffeä¸­å®šä¹‰çš„å­ªç”Ÿç½‘ç»œçš„å¯¹æ¯”æŸå¤±å‡½æ•°ä¸º</p><script type="math/tex; mode=display">L=\frac{1}{2 N} \sum_{n=1}^{N} y d^{2}+(1-y) \max (\operatorname{margin}-d, 0)^{2}</script><ul><li>å½“$Y=1$æ—¶ï¼ˆæ ·æœ¬ç›¸ä¼¼æ—¶ï¼‰ï¼Œ$L=\frac{1}{2N}\sum^{N}_{n=1}YD_{W}^2$ï¼Œå³åŸæœ¬ç›¸ä¼¼çš„æ ·æœ¬ï¼Œå¦‚æœåœ¨ç‰¹å¾ç©ºé—´ä¸Šæ¬§å¼è·ç¦»è¶Šå¤§ï¼Œåˆ™æŸå¤±è¶Šå¤§</li><li>å½“$Y=0$æ—¶ï¼ˆæ ·æœ¬ä¸ç›¸ä¼¼æ—¶)ï¼Œ$L_{D}=\frac{1}{2 N} \sum_{n=1}^{N}(1-Y) \max \left(m-D_{W}, 0\right)^{2}$ï¼Œå³å½“æ ·æœ¬æœ¬æ¥ä¸ç›¸ä¼¼æ—¶ï¼Œæ¬§å¼è·ç¦»è¶Šå°ï¼ŒæŸå¤±è¶Šå¤§ã€‚å…¶ä¸­$m$ä»£è¡¨marginï¼Œå³æ­¤æ—¶$D_{W}$åªåœ¨$0~margin$ä¹‹é—´ï¼Œå½“$D_{W}&gt;margin$æ—¶ï¼Œæ­¤æ—¶æŸå¤±ç›´æ¥ä¸º0ã€‚</li></ul><h4 id="å·ç§¯ç¥ç»ç½‘ç»œ"><a href="#å·ç§¯ç¥ç»ç½‘ç»œ" class="headerlink" title="å·ç§¯ç¥ç»ç½‘ç»œ"></a>å·ç§¯ç¥ç»ç½‘ç»œ</h4><p>ä½œè€…é‡‡ç”¨ä¸¤å±‚å·ç§¯ç¥ç»ç½‘ç»œï¼Œå’Œä¸€å±‚å‰é¦ˆç¥ç»ç½‘ç»œä½œä¸º$G$ï¼Œè¿™ç§æƒ…å½¢é€‚åˆäºå›¾åƒï¼Œå¯¹äºæ–‡æœ¬æˆ–å…¶å®ƒç±»å‹çš„æ•°æ®ï¼Œå¯çµæ´»è‡ªç”±åœ°é‡‡ç”¨ä¸åŒçš„ç‰¹å¾æå–å™¨ã€‚</p><h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><h4 id="Triplet-Network"><a href="#Triplet-Network" class="headerlink" title="Triplet Network"></a>Triplet Network</h4><p>åœ¨Simase architectureåŸºç¡€ä¸Šï¼Œã€ŠDeep metric learning using Triplet networkã€‹è¿™ç¯‡è®ºæ–‡æå‡ºäº†triplet netã€‚å…¶ä¸­ä¸»è¦æ€æƒ³å°±æ˜¯å°†è¾“å…¥ç”±$(X_{1}, X_{2},Y)$å˜æˆäº†$(X_{1}, X_{2}, X_{1}^{â€˜})$ï¼Œå…¶ä¸­$X_{1}$å’Œ$X_{1}^{â€˜}$æ˜¯ç›¸åŒçš„ç±»åˆ«çš„æ ·æœ¬ï¼Œè€Œ$X_{1}$å’Œ$X_{2}$æ˜¯ä¸åŒçš„æ ·æœ¬ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ge2hjfqf30j30u00z979u.jpg" alt=""></p><p>å³åˆ†åˆ«è¾“å…¥ä¸€å¯¹æ­£ä¾‹å’Œä¸€å¯¹è´Ÿä¾‹ï¼Œè®­ç»ƒçš„ç›®æ ‡æ˜¯è®©ç›¸åŒç±»åˆ«é—´çš„è·ç¦»å°½å¯èƒ½çš„å°ï¼Œè®©ä¸åŒç±»åˆ«é—´çš„è·ç¦»å°½å¯èƒ½çš„å¤§ã€‚</p><h4 id="Pseudo-Siamese-Network"><a href="#Pseudo-Siamese-Network" class="headerlink" title="Pseudo-Siamese Network"></a>Pseudo-Siamese Network</h4><p><img src="/Users/cao/Library/Application Support/typora-user-images/image-20200422134006181.png" alt=""></p><p>ä¼ªå­ªç”Ÿç½‘ç»œå’Œå­ªç”Ÿç½‘ç»œçš„åŒºåˆ«å³æ˜¯ä¼ªå­ªç”Ÿç½‘ç»œçš„$G$å¹¶ä¸å…±äº«æƒé‡ï¼Œè€Œä¸”ä¸¤è¾¹å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ¨¡å‹ã€‚ä¾‹å¦‚å¯¹äºæ–‡æœ¬æ•°æ®ï¼ŒNetwork1å¯ä»¥æ˜¯CNNï¼ŒNetwork2å¯ä»¥æ˜¯LSTMã€‚</p><ul><li>ä¼ªå­ªç”Ÿç½‘ç»œç”±äºä¸¤è¾¹ç»“æ„ä¸å…±äº«æƒé‡ï¼Œæ‰€ä»¥å¯¹äºInput1å’ŒInput2ç‰¹å¾ç»“æ„å·®å¼‚è¾ƒå¤§æ—¶ï¼Œæ¯”è¾ƒç›¸ä¼¼åº¦ï¼Œæ•ˆæœè¾ƒå¥½ã€‚ä¾‹å¦‚å­ªç”Ÿç½‘ç»œé€‚åˆ<strong>æ ‡é¢˜-æ ‡é¢˜</strong>ç›¸ä¼¼åº¦æ¯”è¾ƒï¼Œè€Œä¼ªå­ªç”Ÿç½‘ç»œåˆ™é€‚åˆ<strong>æ ‡é¢˜-æ–‡æœ¬</strong>ç›¸ä¼¼åº¦æ¯”è¾ƒã€‚</li></ul><h4 id="Sentence-Bertï¼ˆé‡‡ç”¨Siameseç»“æ„çš„Bertæ¨¡å‹ï¼‰"><a href="#Sentence-Bertï¼ˆé‡‡ç”¨Siameseç»“æ„çš„Bertæ¨¡å‹ï¼‰" class="headerlink" title="Sentence-Bertï¼ˆé‡‡ç”¨Siameseç»“æ„çš„Bertæ¨¡å‹ï¼‰"></a>Sentence-Bertï¼ˆé‡‡ç”¨Siameseç»“æ„çš„Bertæ¨¡å‹ï¼‰</h4><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ge2irhs6k7j31gc0pijtx.jpg" alt=""></p><p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½œè€…å°†Siamese Networkä¸­çš„æ¨¡å‹å˜æˆä½¿ç”¨BERTã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œlossä¸å†é‡‡ç”¨ä¼ ç»Ÿçš„Constrasive Lossï¼Œè€Œæ˜¯å°†æå–å‡ºçš„ç‰¹å¾å‘é‡ï¼Œé€šè¿‡$(u, v, |u-v|)$æ‹¼æ¥èµ·æ¥ï¼Œè¾“å…¥åˆ°Softmaxåˆ†ç±»å™¨ä¸­å»åˆ¤æ–­æ˜¯å¦ç›¸ä¼¼ï¼Œå®é™…ä¸Šè¿™ä¹Ÿæ˜¯å¯¹äºæ–‡æœ¬æ•°æ®ï¼Œç°åœ¨æƒ¯ç”¨çš„æ–¹æ³•ã€‚å…¶ä¸­å¸¸ç”¨çš„ç‰¹å¾è¿˜åŒ…æ‹¬$u*v$ã€‚è€Œåœ¨é¢„æµ‹æ—¶å€™ï¼Œç›´æ¥å°†æå–å‡ºçš„ç‰¹å¾å‘é‡$u,v$è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦$cos(u,v)$æ¥åˆ¤æ–­æ˜¯å¦ç›¸ä¼¼ã€‚</p><p>æœ¬æ–‡çš„é‡ç‚¹æ˜¯è®­ç»ƒå¥½Siamese-Bertæ¨¡å‹åï¼Œå°†æ¨¡å‹ç”¨æ¥æå–Sentence-embeddingã€‚è€Œè¿™ç§æ–¹æ³•æå‡ºæ¥çš„embeddingæ•ˆæœä¹Ÿæ¯”åŸæœ¬çš„Bert embeddingè¦å¥½å¾ˆå¤šï¼Œæ‰€ä»¥å¯è§ä½¿ç”¨Simanseç»“æ„è®­ç»ƒå‡ºæ¥çš„æ¨¡å‹ä¹Ÿèƒ½èµ·åˆ°å¾ˆå¥½çš„ç‰¹å¾æå–æ•ˆæœã€‚</p><h4 id="One-shot-Learning-with-Siamese-Network"><a href="#One-shot-Learning-with-Siamese-Network" class="headerlink" title="One-shot Learning with Siamese Network"></a>One-shot Learning with Siamese Network</h4><ul><li><p>ä»€ä¹ˆæ˜¯one-shot learning?</p><p>  ä¸€èˆ¬çš„åˆ†ç±»ä»»åŠ¡ï¼Œä¼šåœ¨è®­ç»ƒæ ·æœ¬ä¸­å¯¹äºæ¯ä¸ªç±»åˆ«ç»™å‡ºå¾ˆå¤šä¸ªæ ‡è®°çš„æ ·æœ¬çš„ï¼Œè¿™æ ·åœ¨è¾“å…¥åˆ°æ¨¡å‹ä¸­è¿›è¡Œå­¦ä¹ ï¼Œè€Œone-shot learingæŒ‡çš„æ˜¯å¯¹äºæ¯ä¸ªæ ·æœ¬åªç»™å‡ºäº†<strong>ä¸€ä¸ªæˆ–è€…å°‘é‡</strong>çš„è®­ç»ƒæ ·æœ¬ï¼Œè¿™æ ·ä½¿ç”¨ä¼ ç»Ÿåˆ†ç±»æ–¹æ³•è¿›è¡Œå­¦ä¹ ï¼Œç”±äºè®­ç»ƒæ ·æœ¬å°‘ï¼Œæ‰€ä»¥æ¨¡å‹å¾ˆå®¹æ˜“å¯¼è‡´è¿‡æ‹Ÿåˆã€‚</p></li><li><p>å•æ ·æœ¬å­¦ä¹ çš„baseline</p><p>  å¯¹äºè¿™ç±»ä»»åŠ¡å¾ˆç›´è§‚çš„æ–¹æ³•ï¼Œå°±æ˜¯é‡‡ç”¨kè¿‘é‚»(å…¶ä¸­k=1)ï¼Œå³æ–°æ¥ä¸€ä¸ªé¢„æµ‹æ ·æœ¬ï¼Œä¸æ¯ä¸ªç±»åˆ«æ‰€æœ‰çš„æ ‡æ³¨æ•°æ®è¿›è¡Œæ¬§å¼è·ç¦»è®¡ç®—ï¼Œç¦»çš„æœ€è¿‘çš„å°±ä¸ºæ‰€é¢„æµ‹ç±»åˆ«ã€‚</p></li></ul><p>åœ¨ã€ŠSiamese Neural Networks for One-shot Image Recognitionã€‹è¿™ç¯‡è®ºæ–‡ä¸­ï¼Œä½œè€…ä½¿ç”¨Siamese Networkæ¥è¿›è¡Œone-shot learningå¾—åˆ°äº†å¾ˆå¥½çš„æ•ˆæœã€‚</p><ol><li>ä½¿ç”¨å­ªç”Ÿç½‘ç»œç»“æ„ï¼Œè™½ç„¶æ¯ä¸ªç±»åˆ«åªæœ‰å°‘é‡çš„æ ‡æ³¨æ ·æœ¬ï¼Œä½†ç±»åˆ«ä¹‹é—´èƒ½å¤Ÿç›¸äº’ç»„æˆpairå¯¹ï¼Œè¿™æ ·æ•°æ®é‡èƒ½é£é€Ÿä¸Šå‡ã€‚ä¾‹å¦‚å¯¹äº<strong>Omniglot</strong>æ•°æ®é›†ï¼Œå…±æœ‰1623ç±»æ‰‹å†™å­—ç¬¦ï¼Œæ¯ä¸ªå­—ç¬¦åªæœ‰20ä¸ªæ‰‹å†™æ•°æ®ï¼Œè¿™æ ·èƒ½æœ‰æ•ˆåœ°è·å¾—<strong>183160</strong>å¯¹è®­ç»ƒæ•°æ®ï¼Œè¿™æ ·åœ¨è®­ç»ƒæ—¶ä¸å¤ªåŒæ„å¯¼è‡´è¿‡æ‹Ÿåˆã€‚</li><li>ä½œè€…åŒæ ·å¯¹äºå›¾ç‰‡é‡‡ç”¨äº†å·ç§¯ç¥ç»ç½‘ç»œä½œä¸ºç‰¹å¾æå–å™¨ï¼Œä½†ä½¿ç”¨äº†æ›´æ·±çš„ç½‘ç»œï¼Œæ›´å¤šçš„å‚æ•°ï¼Œè¿™æ ·èƒ½è·å–æ›´å¥½çš„ç‰¹å¾ã€‚</li></ol><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ge2je209m9j31z50psjvl.jpg" alt=""></p><p>æœ€ç»ˆåœ¨Omniglotæ•°æ®é›†ä¸Šå¾—åˆ°äº†å¾ˆå¥½çš„æ•ˆæœ</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ge2k2iz4mej30m8066q3g.jpg" alt=""></p><h5 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><ul><li><p><a href="http://yann.lecun.com/exdb/publis/pdf/chopra-05.pdf" target="_blank" rel="noopener">åŸæ–‡</a></p></li><li><p><a href="https://blog.csdn.net/forever__1234/article/details/81222092" target="_blank" rel="noopener">Constrastive Losså¯¹æ¯”æŸå¤±å‡½æ•°</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/39688993" target="_blank" rel="noopener">ç²¾åº¦æ·±åº¦å­¦ä¹ è®ºæ–‡(25)Siamese Network</a></p></li><li><p><a href="https://arxiv.org/abs/1412.6622" target="_blank" rel="noopener">Deep metric learning using Triplet network</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/35040994" target="_blank" rel="noopener">Siamese network å­ªç”Ÿç¥ç»ç½‘ç»œâ€”ä¸€ä¸ªç®€å•ç¥å¥‡çš„ç»“æ„</a></p></li><li><p><a href="https://arxiv.org/abs/1908.10084" target="_blank" rel="noopener">Sentence-BERT</a></p></li><li><p><a href="http://www.cs.cmu.edu/~rsalakhu/papers/oneshot1.pdf" target="_blank" rel="noopener">Siamese Neural Networks for One-shot Image Recognition</a></p></li></ul>]]></content>
      
      
        <tags>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>stl</title>
      <link href="/2020/03/10/stl/"/>
      <url>/2020/03/10/stl/</url>
      <content type="html"><![CDATA[<h2 id="STLæ¨¡ç‰ˆåº“åŸºç¡€ä½¿ç”¨"><a href="#STLæ¨¡ç‰ˆåº“åŸºç¡€ä½¿ç”¨" class="headerlink" title="STLæ¨¡ç‰ˆåº“åŸºç¡€ä½¿ç”¨"></a>STLæ¨¡ç‰ˆåº“åŸºç¡€ä½¿ç”¨</h2><h3 id="Stringå­—ç¬¦ä¸²å¤„ç†"><a href="#Stringå­—ç¬¦ä¸²å¤„ç†" class="headerlink" title="Stringå­—ç¬¦ä¸²å¤„ç†"></a>Stringå­—ç¬¦ä¸²å¤„ç†</h3><pre><code class="lang-c++">#include &lt;string&gt;</code></pre><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><pre><code class="lang-c++">string s; // ç©ºå­—ç¬¦ä¸²string s1(&quot;12345678&quot;); // æ˜¯&quot;12345678&quot;çš„å‰¯æœ¬string s2(s1);string s3 = s2;string s4 = &quot;hello&quot;;string s5 (s3, 2, 5); //ä»ç¬¬2ä¸ªå…ƒç´ å¼€å§‹,å¤åˆ¶5ä¸ªstring s6 (5, &#39;X&#39;); // å°†5ä¸ª&#39;X&#39;ç»„æˆå­—ç¬¦ä¸²string s7 (s4, 4); // ä»ç¬¬4ä½å¼€å§‹å–char chs[] = &quot;12345&quot;;string s8 (chs, 3); // å¯¹char[] å¤åˆ¶å‰3ä½</code></pre><p>è¾“å‡º</p><pre><code class="lang-bash">123456781234567812345678hello34567XXXXXo123</code></pre><h4 id="è®¿é—®å…ƒç´ å’Œå­—ç¬¦ä¸²é•¿åº¦"><a href="#è®¿é—®å…ƒç´ å’Œå­—ç¬¦ä¸²é•¿åº¦" class="headerlink" title="è®¿é—®å…ƒç´ å’Œå­—ç¬¦ä¸²é•¿åº¦"></a>è®¿é—®å…ƒç´ å’Œå­—ç¬¦ä¸²é•¿åº¦</h4><ul><li>size() å’Œ length()ï¼šè¿™ä¸¤ä¸ªå‡½æ•°ä¼šè¿”å› string ç±»å‹å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸ªæ•°ï¼Œä¸”å®ƒä»¬çš„æ‰§è¡Œæ•ˆæœç›¸åŒã€‚</li><li>è®¿é—®å¯ä»¥<code>[]</code>å’Œ<code>at</code>ï¼Œå‡½æ•° at() åœ¨ä½¿ç”¨æ—¶ä¼šæ£€æŸ¥ä¸‹æ ‡æ˜¯å¦æœ‰æ•ˆã€‚å¦‚æœç»™å®šçš„ä¸‹æ ‡è¶…å‡ºå­—ç¬¦çš„é•¿åº¦èŒƒå›´ï¼Œç³»ç»Ÿä¼šæŠ›å‡º out_of_range å¼‚å¸¸ã€‚</li></ul><pre><code class="lang-c++">const std::string cS (&quot;c.biancheng.net&quot;);std::string s (&quot;abode&quot;);char temp =0;char temp_1 = 0;char temp_2 = 0;char temp_3 = 0;char temp_4 = 0;char temp_5 = 0;temp = s [2]; //&quot;è·å–å­—ç¬¦ &#39;c&#39;temp_1 = s.at(2); //è·å–å­—ç¬¦ &#39;c&#39;temp_2 = s [s.length()]; //æœªå®šä¹‰è¡Œä¸ºï¼Œè¿”å›å­—ç¬¦&#39;\0&#39;ï¼Œä½†Visual C++ 2012æ‰§è¡Œæ—¶æœªæŠ¥é”™temp_3 = cS[cS.length()]; //æŒ‡å‘å­—ç¬¦ &#39;\0&#39;temp_4 = s.at (s.length ()); //ç¨‹åºå¼‚å¸¸temp_5 = cS.at(cS.length ()); //ç¨‹åºå¼‚å¸¸</code></pre><ul><li>ä¿®æ”¹ä¸‹æ ‡å­—ç¬¦ä¸²ã€‚ä¸‹æ ‡æ“ä½œç¬¦ [] å’Œå‡½æ•° at() å‡è¿”å›å­—ç¬¦çš„<strong>â€œå¼•ç”¨â€</strong></li></ul><pre><code class="lang-c++">    char &amp; r = s[2]; // å¼•ç”¨å…³ç³»    char* p = &amp;s[3]; // å¼•ç”¨å…³ç³»    r = &#39;X&#39;;    *p = &#39;Y&#39;;    cout &lt;&lt; s &lt;&lt; endl;    // é‡æ–°åˆ†é…    s = &quot;12345678&quot;;    r = &#39;X&#39;;    *p = &#39;Y&#39;;    cout &lt;&lt; s &lt;&lt; endl;</code></pre><p>è¾“å‡º</p><pre><code class="lang-bash">abodeabXYe12XY5678</code></pre><h4 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h4><ul><li><strong>String</strong>ç±»çš„å­—ç¬¦ä¸²æ”¯æŒç›´æ¥ä½¿ç”¨<strong>è¿ç®—ç¬¦</strong>è¿›è¡Œæ¯”è¾ƒï¼Œä»»ä¸€ä¸èƒ½ä¸º<code>NULL</code>ï¼Œå¦åˆ™ç¨‹åºå¼‚å¸¸é€€å‡ºã€‚</li></ul><h4 id="å­—ç¬¦ä¸²ä¿®æ”¹"><a href="#å­—ç¬¦ä¸²ä¿®æ”¹" class="headerlink" title="å­—ç¬¦ä¸²ä¿®æ”¹"></a>å­—ç¬¦ä¸²ä¿®æ”¹</h4><h5 id="æˆªå–"><a href="#æˆªå–" class="headerlink" title="æˆªå–"></a>æˆªå–</h5><pre><code class="lang-c++">/** Substr æˆªå–     *///s.substr(pos1,n)è¿”å›å­—ç¬¦ä¸²ä½ç½®ä¸ºpos1åé¢çš„nä¸ªå­—ç¬¦ç»„æˆçš„ä¸²string s2=s.substr(1,5);//bcdef//s.substr(pos)//å¾—åˆ°ä¸€ä¸ªposåˆ°ç»“å°¾çš„ä¸²string s3=s.substr(4);//efg</code></pre><h5 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h5><pre><code class="lang-C++">string str=&quot;to be question&quot;;string str2=&quot;the &quot;;string str3=&quot;or not to be&quot;;string::iterator it;//s.insert(pos,str)//åœ¨sçš„posä½ç½®æ’å…¥strstr.insert(6,str2);                 // to be the question//s.insert(pos,str,a,n)åœ¨sçš„posä½ç½®æ’å…¥strä¸­æ’å…¥ä½ç½®aåˆ°åé¢çš„nä¸ªå­—ç¬¦str.insert(6,str3,3,4);             // to be not the question//s.insert(pos,cstr,n)//åœ¨posä½ç½®æ’å…¥cstrå­—ç¬¦ä¸²ä»å¼€å§‹åˆ°åé¢çš„nä¸ªå­—ç¬¦str.insert(10,&quot;that is cool&quot;,8);    // to be not that is the question//s.insert(pos,cstr)åœ¨sçš„posä½ç½®æ’å…¥cstrstr.insert(10,&quot;to be &quot;);            // to be not to be that is the question//s.insert(pos,n,ch)åœ¨s.posä½ç½®ä¸Šé¢æ’å…¥nä¸ªchstr.insert(15,1,&#39;:&#39;);               // to be not to be: that is the question//s.insert(s.it,ch)åœ¨sçš„itæŒ‡å‘ä½ç½®å‰é¢æ’å…¥ä¸€ä¸ªå­—ç¬¦chï¼Œè¿”å›æ–°æ’å…¥çš„ä½ç½®çš„è¿­ä»£å™¨it = str.insert(str.begin()+5,&#39;,&#39;); // to be, not to be: that is the question//s.insert(s.it,n,ch)//åœ¨sçš„itæ‰€æŒ‡å‘ä½ç½®çš„å‰é¢æ’å…¥nä¸ªchstr.insert (str.end(),3,&#39;.&#39;);       // to be, not to be: that is the question...//s.insert(it,str.ita,str.itb)åœ¨itæ‰€æŒ‡å‘çš„ä½ç½®çš„å‰é¢æ’å…¥[ita,itb)çš„å­—ç¬¦ä¸²str.insert (it+2,str3.begin(),str3.begin()+3); // to be, or not to be: that is the question...return 0;</code></pre><h5 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h5><pre><code class="lang-c++">std::string str (&quot;This is an example sentence.&quot;);std::cout &lt;&lt; str &lt;&lt; &#39;\n&#39;;// &quot;This is an example sentence.&quot;str.erase (10,8);       //            ^^^^^^^^//ç›´æ¥æŒ‡å®šåˆ é™¤çš„å­—ç¬¦ä¸²ä½ç½®ç¬¬åä¸ªåé¢çš„8ä¸ªå­—ç¬¦std::cout &lt;&lt; str &lt;&lt; &#39;\n&#39;;// &quot;This is an sentence.&quot;str.erase (str.begin()+9);//           ^//åˆ é™¤è¿­ä»£å™¨æŒ‡å‘çš„å­—ç¬¦std::cout &lt;&lt; str &lt;&lt; &#39;\n&#39;;// &quot;This is a sentence.&quot;//       ^^^^^str.erase (str.begin()+5, str.end()-9);//åˆ é™¤è¿­ä»£å™¨èŒƒå›´çš„å­—ç¬¦std::cout &lt;&lt; str &lt;&lt; &#39;\n&#39;;// &quot;This sentence.&quot;</code></pre><h5 id="è¿½åŠ å’Œæ›¿æ¢"><a href="#è¿½åŠ å’Œæ›¿æ¢" class="headerlink" title="è¿½åŠ å’Œæ›¿æ¢"></a>è¿½åŠ å’Œæ›¿æ¢</h5><p><code>append</code>å’Œ<code>replace</code></p><h4 id="å°†stringè½¬åŒ–ä¸ºint"><a href="#å°†stringè½¬åŒ–ä¸ºint" class="headerlink" title="å°†stringè½¬åŒ–ä¸ºint"></a>å°†stringè½¬åŒ–ä¸ºint</h4><pre><code class="lang-c++">string s= &quot;23&quot;int n = stoi(s, 0) // ä»0ä½ç½®å¼€å§‹</code></pre><h3 id="dequeåŒå‘é˜Ÿåˆ—"><a href="#dequeåŒå‘é˜Ÿåˆ—" class="headerlink" title="dequeåŒå‘é˜Ÿåˆ—"></a>dequeåŒå‘é˜Ÿåˆ—</h3><pre><code class="lang-C++">#include &lt;deque&gt;</code></pre><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><pre><code class="lang-c++">//åŒå‘é˜Ÿåˆ— deque//by MoreWindows http://blog.csdn.net/morewindows#include &lt;deque&gt;#include &lt;cstdio&gt;#include &lt;algorithm&gt;using namespace std;int main(){    deque&lt;int&gt; ideq(20); //Create a deque ideq with 20 elements of default value 0    deque&lt;int&gt;::iterator pos;    int i;    //ä½¿ç”¨assign()èµ‹å€¼  assignåœ¨è®¡ç®—æœºä¸­å°±æ˜¯èµ‹å€¼çš„æ„æ€    for (i = 0; i &lt; 20; ++i)        ideq[i] = i;    //è¾“å‡ºdeque    printf(&quot;è¾“å‡ºdequeä¸­æ•°æ®:\n&quot;);    for (i = 0; i &lt; 20; ++i)        printf(&quot;%d &quot;, ideq[i]);    putchar(&#39;\n&#39;);    //åœ¨å¤´å°¾åŠ å…¥æ–°æ•°æ®    printf(&quot;\nåœ¨å¤´å°¾åŠ å…¥æ–°æ•°æ®...\n&quot;);    ideq.push_back(100);    ideq.push_front(i);    //è¾“å‡ºdeque    printf(&quot;\nè¾“å‡ºdequeä¸­æ•°æ®:\n&quot;);    for (pos = ideq.begin(); pos != ideq.end(); pos++)        printf(&quot;%d &quot;, *pos);    putchar(&#39;\n&#39;);    //æŸ¥æ‰¾    const int FINDNUMBER = 19;    printf(&quot;\næŸ¥æ‰¾%d\n&quot;, FINDNUMBER);    pos = find(ideq.begin(), ideq.end(), FINDNUMBER);    if (pos != ideq.end())        printf(&quot;find %d success\n&quot;, *pos);    else        printf(&quot;find failed\n&quot;);    //åœ¨å¤´å°¾åˆ é™¤æ•°æ®    printf(&quot;\nåœ¨å¤´å°¾åˆ é™¤æ•°æ®...\n&quot;);    ideq.pop_back();    ideq.pop_front();    //è¾“å‡ºdeque    printf(&quot;\nè¾“å‡ºdequeä¸­æ•°æ®:\n&quot;);    for (pos = ideq.begin(); pos != ideq.end(); pos++)        printf(&quot;%d &quot;, *pos);    putchar(&#39;\n&#39;);    return 0;}</code></pre><h3 id="queueé˜Ÿåˆ—"><a href="#queueé˜Ÿåˆ—" class="headerlink" title="queueé˜Ÿåˆ—"></a>queueé˜Ÿåˆ—</h3><pre><code class="lang-c++">#include &lt;queue&gt;</code></pre><ul><li>å…¥é˜Ÿ: <code>q.push(x)</code> æ·»åŠ åˆ°å°¾éƒ¨</li><li>å‡ºé˜Ÿ: <code>q.pop()</code>å¼¹å‡ºé˜Ÿåˆ—ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸ä¼šè¿”å›å€¼</li><li>è®¿é—®: <code>q.front()</code>è®¿é—®æœ€æ—©è¢«å‹å…¥çš„å…ƒç´ ï¼Œ<code>q.back()</code>è®¿é—®æœ€åè¢«å‹å…¥çš„å…ƒç´ </li><li>ç©º: <code>q.empty()</code></li></ul><h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><pre><code class="lang-c++">#include &lt;map&gt;</code></pre><ul><li>åˆå§‹åŒ–: <code>map&lt;int, int&gt; dict, map&lt;string, int&gt; dict1</code></li><li>æ’å…¥: <code>dict.insert(pair&lt;int, int&gt;(1, 2));</code>æˆ–<code>dict[2] = 3;</code></li><li>éå†: </li></ul><pre><code class="lang-c++">map&lt;int, string&gt;::iterator iter;  // iter-&gt;first, iter-&gt;second è·å–å€¼for(iter = dict.begin(); iter != dict.end(); iter++)    cout&lt;&lt;iter-&gt;first&lt;&lt;&#39; &#39;&lt;&lt;iter-&gt;second&lt;&lt;endl;</code></pre><ul><li>é”®æ˜¯å¦å­˜åœ¨ä¸mapä¸­</li></ul><pre><code class="lang-c++">map&lt;int, string&gt;::iterator iter;  iter = dict.find(1);  if(iter != dict.end())    cout&lt;&lt;&quot;Find, the value is &quot;&lt;&lt;iter-&gt;second&lt;&lt;endl;  else    cout&lt;&lt;&quot;Do not Find&quot;&lt;&lt;endl;</code></pre><ul><li>åˆ é™¤. <code>erase</code></li></ul>]]></content>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>dynamic-programming</title>
      <link href="/2020/03/07/dynamic-programming/"/>
      <url>/2020/03/07/dynamic-programming/</url>
      <content type="html"><![CDATA[<h2 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p><strong>åŠ¨æ€è§„åˆ’é—®é¢˜çš„ä¸€èˆ¬å½¢å¼éƒ½æ˜¯æ±‚æœ€å€¼</strong>ï¼Œæ¯”å¦‚æ±‚æœ€é•¿é€’å¢å­åºåˆ—ï¼Œæœ€å°ç¼–è¾‘è·ç¦»ç­‰ã€‚</p><p>åŠ¨æ€è§„åˆ’é—®é¢˜å¯ä»¥ç©·ä¸¾ç»“å±€ï¼Œç„¶åå†æ±‚æœ€å€¼ï¼Œä½†æ˜¯éƒ½ä¼šå­˜åœ¨<strong>é‡å å­é—®é¢˜</strong>ï¼Œæ‰€ä»¥éœ€è¦<code>å¤‡å¿˜å½•</code>æ¥ä¼˜åŒ–ç©·ä¸¾è¿‡ç¨‹ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</p><p>åŠ¨æ€è§„åˆ’çš„<strong>æ ¸å¿ƒ</strong>æ˜¯è¦å†™å‡ºæ­£ç¡®çš„<strong>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</strong>ï¼Œä¹Ÿæ˜¯å…¶ä¸­æœ€å›°éš¾çš„ã€‚</p><ul><li><p>æ€ç»´æ¡†æ¶</p><blockquote><p>æ˜ç¡®<strong>çŠ¶æ€</strong>-&gt;å®šä¹‰dpæ•°ç»„/å‡½æ•°çš„å«ä¹‰-&gt;æ˜ç¡®<strong>é€‰æ‹©</strong>-&gt;æ˜ç¡®base case</p></blockquote></li></ul><h3 id="æ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#æ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="æ–æ³¢é‚£å¥‘æ•°åˆ—"></a>æ–æ³¢é‚£å¥‘æ•°åˆ—</h3><h4 id="é€’å½’å½¢å¼"><a href="#é€’å½’å½¢å¼" class="headerlink" title="é€’å½’å½¢å¼"></a>é€’å½’å½¢å¼</h4><pre><code class="lang-c++">int fib(int N){  if(N==1 || N == 2) return 1;  return fib(N-1) + fib(N -2);}</code></pre><ul><li>å½“Néå¸¸å¤§æ—¶é‡Œé¢å°±ä¼šæœ‰è®¸å¤šé‡å¤è®¡ç®—ï¼Œå¯¼è‡´è®¡ç®—éå¸¸ä½æ•ˆ</li></ul><p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gclpoxi8mgj30zi0csdse.jpg" alt=""></p><h5 id="é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦-å­é—®é¢˜çš„ä¸ªæ•°ä¹˜ä»¥è§£å†³ä¸€ä¸ªå­é—®é¢˜éœ€è¦çš„æ—¶é—´"><a href="#é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦-å­é—®é¢˜çš„ä¸ªæ•°ä¹˜ä»¥è§£å†³ä¸€ä¸ªå­é—®é¢˜éœ€è¦çš„æ—¶é—´" class="headerlink" title="é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦=å­é—®é¢˜çš„ä¸ªæ•°ä¹˜ä»¥è§£å†³ä¸€ä¸ªå­é—®é¢˜éœ€è¦çš„æ—¶é—´"></a>é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦=å­é—®é¢˜çš„ä¸ªæ•°ä¹˜ä»¥è§£å†³ä¸€ä¸ªå­é—®é¢˜éœ€è¦çš„æ—¶é—´</h5><p>ä¸Šé¢å­é—®é¢˜ä¸ªæ•°ä¸º$O(2^N)$ï¼Œè§£å†³å­é—®é¢˜çš„æ—¶é—´$O(1)$ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æŒ‡æ•°çº§åˆ«ï¼Œéå¸¸æ…¢ï¼</p><p>è§‚å¯Ÿå°±å¯ä»¥å‘ç°å…¶ä¸­å­˜åœ¨è®¸å¤š<strong>é‡å å­é—®é¢˜</strong>ï¼Œå¯ä»¥åˆ©ç”¨<strong>å¤‡å¿˜å½•</strong>çš„é€’å½’ç®—æ³•å­˜å‚¨ã€‚</p><h4 id="å¤‡å¿˜å½•çš„é€’å½’ç®—æ³•"><a href="#å¤‡å¿˜å½•çš„é€’å½’ç®—æ³•" class="headerlink" title="å¤‡å¿˜å½•çš„é€’å½’ç®—æ³•"></a>å¤‡å¿˜å½•çš„é€’å½’ç®—æ³•</h4><pre><code class="lang-c++">int fib(int N) {    if (N &lt; 1) return 0;    // å¤‡å¿˜å½•å…¨åˆå§‹åŒ–ä¸º 0    vector&lt;int&gt; memo(N + 1, 0);    // åˆå§‹åŒ–æœ€ç®€æƒ…å†µ    return helper(memo, N);}int helper(vector&lt;int&gt;&amp; memo, int n) {    // base case     if (n == 1 || n == 2) return 1;    // å·²ç»è®¡ç®—è¿‡    if (memo[n] != 0) return memo[n];    memo[n] = helper(memo, n - 1) +                 helper(memo, n - 2);    return memo[n];}</code></pre><p>æ­¤æ—¶æ—¶é—´å¤æ‚åº¦å°±å˜æˆäº†$O(N)*O(1)=O(N)$äº†ã€‚</p><p>è¿™ç§æ¥å‘å’Œè¿­ä»£çš„åŠ¨æ€è§„åˆ’å·®ä¸å¤šäº†ï¼Œä¸è¿‡ä½¿ç”¨çš„æ˜¯<strong>è‡ªé¡¶å‘ä¸‹</strong>ï¼Œè€ŒåŠ¨æ€è§„åˆ’æ˜¯<strong>è‡ªåº•å‘ä¸Š</strong>ã€‚</p><h4 id="dpæ•°ç»„çš„è¿­ä»£ç®—æ³•ï¼ˆè‡ªåº•å‘ä¸Šï¼‰"><a href="#dpæ•°ç»„çš„è¿­ä»£ç®—æ³•ï¼ˆè‡ªåº•å‘ä¸Šï¼‰" class="headerlink" title="dpæ•°ç»„çš„è¿­ä»£ç®—æ³•ï¼ˆè‡ªåº•å‘ä¸Šï¼‰"></a>dpæ•°ç»„çš„è¿­ä»£ç®—æ³•ï¼ˆè‡ªåº•å‘ä¸Šï¼‰</h4><pre><code class="lang-c++">int fib(int N) {    vector&lt;int&gt; dp(N + 1, 0);    // base case    dp[1] = dp[2] = 1;    for (int i = 3; i &lt;= N; i++)        dp[i] = dp[i - 1] + dp[i - 2];    return dp[N];}</code></pre><p>ç”±ä¸Šå¯ä»¥å¼•å…¥<strong>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</strong></p><script type="math/tex; mode=display">f(n)=\left\{\begin{array}{l}1, n=1,2 \\ f(n-1)+f(n-2), n>2\end{array}\right.</script><h3 id="å‡‘é›¶é’±"><a href="#å‡‘é›¶é’±" class="headerlink" title="å‡‘é›¶é’±"></a>å‡‘é›¶é’±</h3><h4 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h4><p>ç»™å‡º<code>k</code>ç§é¢å€¼çš„ç¡¬å¸ï¼Œé¢å€¼åˆ†åˆ«ä¸º<code>c1,c2,...ck</code>ï¼Œæ¯ç§ç¡¬å¸çš„æ•°é‡æ— é™ï¼Œå†ç»™ä¸€ä¸ªæ€»é‡‘é¢<code>amount</code>ï¼Œé—®<strong>æœ€å°‘</strong>éœ€è¦å‡ æšç¡¬å¸å‡‘å‡ºè¿™ä¸ªé‡‘é¢ï¼Œå¦‚æœä¸èƒ½å‡‘å‡ºåˆ™è¿”å›-1ã€‚</p><hr><blockquote><p>è¦ç¬¦åˆ<strong>æœ€ä¼˜å­ç»“æ„</strong>æ„æ€æ˜¯å°†é—®é¢˜åˆ’åˆ†ä¸ºæ¯ä¸ªå­é—®é¢˜åæ˜¯<strong>ç›¸äº’ç‹¬ç«‹çš„</strong>ï¼Œå¦‚æœä¸ç‹¬ç«‹ï¼Œåˆ™ä¸æ»¡è¶³</p></blockquote><p>æ¯”å¦‚è¦æ±‚<code>amount=11</code>ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“å‡‘å‡º<code>amount=10</code>çš„æœ€å°‘ç¡¬å¸æ•°<strong>ï¼ˆå­é—®é¢˜ï¼‰</strong>ï¼Œåˆ™åŠ 1å°±å¯ä»¥å¾—åˆ°æ­¤é—®é¢˜çš„ç­”æ¡ˆï¼Œä¸¤ä¸ªç›¸äº’ç‹¬ç«‹æ˜¯ä¸å—ç‰µè¿çš„ã€‚</p><h4 id="ä¸€ã€å…ˆç¡®å®šçŠ¶æ€"><a href="#ä¸€ã€å…ˆç¡®å®šçŠ¶æ€" class="headerlink" title="ä¸€ã€å…ˆç¡®å®šçŠ¶æ€"></a>ä¸€ã€å…ˆç¡®å®šçŠ¶æ€</h4><p>ç”±äºç¡¬å¸æ•°æ˜¯æ— é™çš„ï¼Œæ‰€ä»¥å”¯ä¸€çš„çŠ¶æ€å°±æ˜¯ç›®æ ‡é‡‘é¢<code>amount</code></p><h4 id="äºŒã€ç¡®å®šdpå‡½æ•°çš„å®šä¹‰"><a href="#äºŒã€ç¡®å®šdpå‡½æ•°çš„å®šä¹‰" class="headerlink" title="äºŒã€ç¡®å®šdpå‡½æ•°çš„å®šä¹‰"></a>äºŒã€ç¡®å®š<code>dp</code>å‡½æ•°çš„å®šä¹‰</h4><p>å³å½“å‰çš„ç›®æ ‡é‡‘é¢æ˜¯nï¼Œè‡³å°‘éœ€è¦<code>dp(n)</code>ä¸ªç¡¬å¸å‡‘å‡ºè¯¥é‡‘é¢</p><h4 id="ä¸‰ã€ç¡®å®šé€‰æ‹©ï¼Œå¹¶é€‰æ‹©æœ€ä¼˜"><a href="#ä¸‰ã€ç¡®å®šé€‰æ‹©ï¼Œå¹¶é€‰æ‹©æœ€ä¼˜" class="headerlink" title="ä¸‰ã€ç¡®å®šé€‰æ‹©ï¼Œå¹¶é€‰æ‹©æœ€ä¼˜"></a>ä¸‰ã€ç¡®å®šé€‰æ‹©ï¼Œå¹¶é€‰æ‹©æœ€ä¼˜</h4><p>å°±æ˜¯å¯¹äºæ¯ä¸ªçŠ¶æ€ï¼Œå¯ä»¥åšå‡ºä»€ä¹ˆé€‰æ‹©æ”¹å˜å½“å‰çš„çŠ¶æ€ã€‚å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“ä»é¢é¢åˆ—è¡¨<code>coins</code>è®¡åˆ’ä¸­é€‰æ‹©ä¸€ä¸ªç¡¬å¸ï¼Œç„¶åç›®æ ‡é‡‘é¢å°±ä¼šç›¸åº”åœ°å‡å°‘ã€‚</p><h4 id="å››ã€æœ€åç¡®å®šbase-case"><a href="#å››ã€æœ€åç¡®å®šbase-case" class="headerlink" title="å››ã€æœ€åç¡®å®šbase case"></a>å››ã€æœ€åç¡®å®šbase case</h4><p>å³å½“ç›®æ ‡é‡‘é¢ä¸º0ï¼Œæ‰€éœ€ç¡¬å¸æ•°é‡ä¸º0ï¼Œå½“å°äº0ï¼Œåˆ™è¿”å›<code>-1</code></p><h5 id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹"><a href="#çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹" class="headerlink" title="çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹"></a>çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹</h5><script type="math/tex; mode=display">d p(n)=\left\{\begin{array}{l}0, n=0 \\ -1, n<0 \\ \min \{d p(n-\operatorname{coin})+1 | \operatorname{coin} \in \operatorname{coins}\}, n>0\end{array}\right.</script><p>ä¼ªä»£ç å¦‚ä¸‹</p><pre><code class="lang-python">def dp(n):    # base case    if n == 0: return 0    if n &lt; 0: return -1    # æ±‚æœ€å°å€¼ï¼Œæ‰€ä»¥åˆå§‹åŒ–ä¸ºæ­£æ— ç©·    res = float(&#39;INF&#39;)    for coin in coins:          subproblem = dp(n-coin)        # å­é—®é¢˜æ— è§£        if subproblem == -1: continue        res = min(res, 1+subproblem)    return res if res != float(&#39;INF&#39;) else -1</code></pre><p>æ­¤æ—¶ç»™å‡ºçš„è¿˜æ˜¯ä¸€èˆ¬é€’å½’å½¢å¼ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šé‡å¤æ“ä½œï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘ä½¿ç”¨å¤‡å¿˜å½•ï¼Œåœ¨æ¯æ¬¡dpé€šè¿‡ä¸€ä¸ªæ•°ç»„ï¼Œä¿å­˜æ¯æ¬¡è®¡ç®—çš„ç»“æœã€‚</p><h4 id="dpæ•°ç»„çš„è¿­ä»£è§£æ³•"><a href="#dpæ•°ç»„çš„è¿­ä»£è§£æ³•" class="headerlink" title="dpæ•°ç»„çš„è¿­ä»£è§£æ³•"></a>dpæ•°ç»„çš„è¿­ä»£è§£æ³•</h4><pre><code class="lang-c++">// éé€’å½’ï¼Œè‡ªåº•å‘ä¸Šè¿­ä»£ï¼Œå¸¦å¤‡å¿˜å½•int coinChange(vector&lt;int&gt;&amp; coins, int amount){  // æ•°ç»„å¤§å°å’Œåˆå§‹å€¼éƒ½ä¸ºamount +1  vector&lt;int&gt; dp(amount+1, amount+1);  //base case  dp[0] = 0;  for (int i = 0; i&lt; dp.size(); i++){    //å†…å­˜foræ±‚æ‰€æœ‰å­é—®é¢˜+1çš„æœ€å°å€¼    for(int coin : coins){      if(i - coin &lt; 0) continue;      dp[i] = min(dp[i], dp[i-coin]+1);    }  }  return (dp[amount] == amount+1)? -1 : dp[amount];}</code></pre><p><a href="https://labuladong.gitbook.io/algo/di-ling-zhang-bi-du-xi-lie/dong-tai-gui-hua-xiang-jie-jin-jie" target="_blank" rel="noopener">å‚è€ƒ</a></p><h4 id=""><a href="#" class="headerlink" title=" "></a> </h4>]]></content>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linear-algebra</title>
      <link href="/2020/03/02/linear-algebra/"/>
      <url>/2020/03/02/linear-algebra/</url>
      <content type="html"><![CDATA[<h1 id="çº¿æ€§ä»£æ•°"><a href="#çº¿æ€§ä»£æ•°" class="headerlink" title="çº¿æ€§ä»£æ•°"></a>çº¿æ€§ä»£æ•°</h1><p><a href="http://www.huaxiaozhuan.com/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/chapters/1_algebra.html" target="_blank" rel="noopener">åœ°å€</a></p><h2 id="åŸºæœ¬çŸ¥è¯†"><a href="#åŸºæœ¬çŸ¥è¯†" class="headerlink" title="åŸºæœ¬çŸ¥è¯†"></a>åŸºæœ¬çŸ¥è¯†</h2><pre><code class="lang-python">import numpy as npimport torch</code></pre><h3 id="å‘é‡"><a href="#å‘é‡" class="headerlink" title="å‘é‡"></a>å‘é‡</h3><script type="math/tex; mode=display">\vec x = (x_{1}, x_{2},...x_{n})^{T}</script><pre><code class="lang-python">x = np.array([1, 2, 3])y = torch.Tensor([1, 2, 3])print(x, y)</code></pre><pre><code>[1 2 3] tensor([1., 2., 3.])</code></pre><h3 id="çŸ©é˜µ"><a href="#çŸ©é˜µ" class="headerlink" title="çŸ©é˜µ"></a>çŸ©é˜µ</h3><pre><code class="lang-python">x = np.array([[1, 2, 3],[4, 5, 6]])y = torch.Tensor([[1, 2, 3], [4, 5, 6]])print(x)print(y)</code></pre><pre><code>[[1 2 3] [4 5 6]]tensor([[1., 2., 3.],        [4., 5., 6.]])</code></pre><h3 id="çŸ©é˜µçš„FèŒƒæ•°"><a href="#çŸ©é˜µçš„FèŒƒæ•°" class="headerlink" title="çŸ©é˜µçš„FèŒƒæ•°"></a>çŸ©é˜µçš„FèŒƒæ•°</h3><p>è®¾çŸ©é˜µ $A=(a_{i,j})_{m,n}$,åˆ™å…¶<code>F</code>èŒƒæ•°ä¸º<script type="math/tex">||A||_{F}=\sqrt{\sum_{i,j}a^2_{i,j}}</script></p><pre><code class="lang-python">l2_x = np.linalg.norm(x)l2_y = torch.norm(y)print(&quot;norm of x is {}&quot;.format(l2_x))print(&quot;norm of y is {}&quot;.format(l2_y))</code></pre><pre><code>norm of x is 9.539392014169456norm of y is 9.539392471313477</code></pre><h3 id="çŸ©é˜µçš„è¿¹"><a href="#çŸ©é˜µçš„è¿¹" class="headerlink" title="çŸ©é˜µçš„è¿¹"></a>çŸ©é˜µçš„è¿¹</h3><p>çŸ©é˜µ$A=(a_{i,j})_{m,n}$ï¼Œåˆ™$A$çš„è¿¹ä¸º:</p><script type="math/tex; mode=display">tr(A)=\sum_{i}{a_{i,i}}</script><pre><code class="lang-python">x_trace = x.trace()y_trace = torch.trace(y)print(&quot;trace of x is {}&quot;.format(x_trace))print(&quot;trace of y is {}&quot;.format(y_trace))</code></pre><pre><code>trace of x is 6trace of y is 6.0</code></pre><h2 id="çŸ©é˜µè¿ç®—"><a href="#çŸ©é˜µè¿ç®—" class="headerlink" title="çŸ©é˜µè¿ç®—"></a>çŸ©é˜µè¿ç®—</h2><h3 id="é€å…ƒç´ ç§¯ï¼ˆå“ˆè¾¾ç›ç§¯ï¼‰"><a href="#é€å…ƒç´ ç§¯ï¼ˆå“ˆè¾¾ç›ç§¯ï¼‰" class="headerlink" title="é€å…ƒç´ ç§¯ï¼ˆå“ˆè¾¾ç›ç§¯ï¼‰"></a>é€å…ƒç´ ç§¯ï¼ˆå“ˆè¾¾ç›ç§¯ï¼‰</h3><script type="math/tex; mode=display">\vec u * \vec v = [u_{i,j}v_{i,j},...]</script><pre><code class="lang-python"># å‘é‡a = np.arange(0,9)b = a[::-1]c = a * bprint(&quot;dot of vector a,b is {}&quot;.format(c))</code></pre><pre><code>dot of vector a,b is [ 0  7 12 15 16 15 12  7  0]</code></pre><pre><code class="lang-python"># çŸ©é˜µa = np.arange(1, 5).reshape(2,2)b = np.arange(5, 9).reshape(2,2)c = a * bprint(&quot;dot of matrix a,b is {}&quot;.format(c))</code></pre><pre><code>dot of matrix a,b is [[ 5 12] [21 32]]</code></pre><pre><code class="lang-python"># pytorcha = torch.arange(1,5).reshape(2,2)b = torch.arange(5,9).view(2, 2)print(a * b)print(a.mul(b))</code></pre><pre><code>tensor([[ 5, 12],        [21, 32]])tensor([[ 5, 12],        [21, 32]])</code></pre><h3 id="ç‚¹ç§¯ï¼ˆçŸ©é˜µä¹˜æ³•ï¼‰"><a href="#ç‚¹ç§¯ï¼ˆçŸ©é˜µä¹˜æ³•ï¼‰" class="headerlink" title="ç‚¹ç§¯ï¼ˆçŸ©é˜µä¹˜æ³•ï¼‰"></a>ç‚¹ç§¯ï¼ˆçŸ©é˜µä¹˜æ³•ï¼‰</h3><script type="math/tex; mode=display">(AB)_{ij} = \sum_{k=1}^{p}a_{ik}b_{kj}</script><pre><code class="lang-python">a = np.arange(1, 5).reshape(2,2)b = np.arange(5, 9).reshape(2,2)np.dot(a,b)</code></pre><pre><code>array([[19, 22],       [43, 50]])</code></pre><pre><code class="lang-python">a = torch.arange(1,5).reshape(2,2)b = torch.arange(5,9).view(2, 2)a.mm(b)</code></pre><pre><code>tensor([[19, 22],        [43, 50]])</code></pre><h3 id="å…‹ç½—å†…å…‹ç§¯"><a href="#å…‹ç½—å†…å…‹ç§¯" class="headerlink" title="å…‹ç½—å†…å…‹ç§¯"></a>å…‹ç½—å†…å…‹ç§¯</h3><script type="math/tex; mode=display">A \bigotimes B = \begin{bmatrix} a_{1,1}B &... &a_{1,n}B \\ ... & ... &...\\a_{m,1}B & ... &a_{m,n}B \end{bmatrix}</script><pre><code class="lang-python">a = np.arange(1, 5).reshape(2,2)b = np.arange(5, 9).reshape(2,2)np.kron(a,b)</code></pre><pre><code>array([[ 5,  6, 10, 12],       [ 7,  8, 14, 16],       [15, 18, 20, 24],       [21, 24, 28, 32]])</code></pre><h2 id="ç‰¹æ®Šå‡½æ•°"><a href="#ç‰¹æ®Šå‡½æ•°" class="headerlink" title="ç‰¹æ®Šå‡½æ•°"></a>ç‰¹æ®Šå‡½æ•°</h2><h3 id="sigmoidå‡½æ•°"><a href="#sigmoidå‡½æ•°" class="headerlink" title="sigmoidå‡½æ•°"></a>sigmoidå‡½æ•°</h3><script type="math/tex; mode=display">\sigma (x) = \frac{1}{1+exp(-x)}</script><ul><li>å¯¼æ•°<script type="math/tex; mode=display">\sigma^{'}(x) = \sigma(x) \cdot (1-\sigma(x))</script></li><li>å€¼åŸŸåœ¨0å’Œ1ä¹‹é—´ï¼Œç”¨äºäºŒåˆ†ç±»</li><li>å‡½æ•°å…·æœ‰éå¸¸å¥½çš„å¯¹ç§°æ€§</li><li>åœ¨è¶‹äºæ— ç©·æ—¶ï¼Œå‡½æ•°å€¼å˜åŒ–å°ï¼Œå®¹æ˜“äº§ç”Ÿæ¢¯åº¦æ¶ˆå¤±</li></ul><pre><code class="lang-python">import matplotlib.pyplot as plt%matplotlib inlinedef sigmoid(x):    return 1. / (1.+np.exp(-x))x = np.arange(-5, 5, 0.2)y = sigmoid(x)plt.plot(x,y)plt.show()</code></pre><p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gcfptc2pqcj30ac06w3yg.jpg" alt="png"></p><h3 id="softpluså‡½æ•°"><a href="#softpluså‡½æ•°" class="headerlink" title="softpluså‡½æ•°"></a>softpluså‡½æ•°</h3><script type="math/tex; mode=display">\zeta(x) = log(1+exp(x)</script><ul><li>å¹³æ»‘ç‰ˆçš„ReLuå‡½æ•°</li><li>å¯¼æ•°:<script type="math/tex; mode=display">\frac{d}{dx}\zeta(x) = \sigma(x)</script></li></ul><pre><code class="lang-python">def softplus(x):    return np.log(1.+np.exp(x))x = np.arange(-10, 10, 0.2)y = softplus(x)plt.plot(x,y)plt.show()</code></pre><p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gcfptby0sej30a806wwef.jpg" alt="png"></p><h3 id="ä¼½ç›å‡½æ•°"><a href="#ä¼½ç›å‡½æ•°" class="headerlink" title="ä¼½ç›å‡½æ•°"></a>ä¼½ç›å‡½æ•°</h3><script type="math/tex; mode=display">\Gamma(x) = \int_{0}^{\infty}t^{x-1}e^{-t} \mathrm{d}x</script><ul><li>å¯¹äºæ•´æ•°$n$ï¼š$\Gamma(n)=(n-1)!$</li><li>$\Gamma(x+1)=x\Gamma(x)$</li><li>å¯¹äº$x \in (0,1)$:<script type="math/tex; mode=display">\Gamma(1-x)\Gamma(x) = \frac{\pi}{sin\pi x}</script>å¯ä»¥æ¨å‡ºé‡è¦å…¬å¼: $\Gamma(\frac{1}{2}) = \sqrt{\pi}$</li></ul><pre><code class="lang-python">from scipy.special import gammax = np.linspace(0, 5, 100)y = gamma(x)plt.plot(x,y)plt.show()</code></pre><p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gcfptbqkjnj30a806zq2w.jpg" alt="png"></p><h3 id="è´å¡”å‡½æ•°"><a href="#è´å¡”å‡½æ•°" class="headerlink" title="è´å¡”å‡½æ•°"></a>è´å¡”å‡½æ•°</h3><script type="math/tex; mode=display">B(m,n) = \int_{0}{1} x^{m-1}(1-x)^{n-1} \mathrm{d}x</script><ul><li>ä¸ä¼½ç›å‡½æ•°å…³ç³»:<script type="math/tex; mode=display">B(m,n) = \frac{\Gamma(m)\Gamma(n)}{\Gamma(m+n)}</script><script type="math/tex; mode=display">B(m,1-m) = \Gamma(m)\Gamma(1-m)</script></li><li>å¯¹ç§°æ€§: $B(m,n) = B(n,m)$</li></ul>]]></content>
      
      
        <tags>
            
            <tag> æ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ£€ç´¢ä¸­å¸¸ç”¨æŒ‡æ ‡</title>
      <link href="/2019/12/27/ir-metrics/"/>
      <url>/2019/12/27/ir-metrics/</url>
      <content type="html"><![CDATA[<h2 id="æ£€ç´¢ä¸­å¸¸ç”¨æŒ‡æ ‡"><a href="#æ£€ç´¢ä¸­å¸¸ç”¨æŒ‡æ ‡" class="headerlink" title="æ£€ç´¢ä¸­å¸¸ç”¨æŒ‡æ ‡"></a>æ£€ç´¢ä¸­å¸¸ç”¨æŒ‡æ ‡</h2><h3 id="Mean-ReciProcal-Rank-MRR"><a href="#Mean-ReciProcal-Rank-MRR" class="headerlink" title="Mean ReciProcal Rank(MRR)"></a>Mean ReciProcal Rank(MRR)</h3><p>å¤šä¸ªæŸ¥è¯¢çš„å€’æ•°æ’åçš„å‡å€¼.</p><script type="math/tex; mode=display">MRR = \frac{1}{N}\sum_{i=1}^{N}\frac{1}{Rank_{i}}</script><pre><code class="lang-python">import numpy as npy_pred = np.asarray([0.2,0.3,0.7,1.0])y_true = np.asarray([1,0,0,0])</code></pre><pre><code class="lang-python">coupled_pair = list(zip(y_true, y_pred))coupled_pair = np.asarray(sorted(coupled_pair, key=lambda x: x[1], reverse=True))coupled_pair</code></pre><pre><code>array([[0. , 1. ],       [0. , 0.7],       [0. , 0.3],       [1. , 0.2]])</code></pre><pre><code class="lang-python">for idx, (label, pred) in enumerate(coupled_pair):    if label &gt; 0.:        print(1. / (idx + 1))        break</code></pre><pre><code>0.25</code></pre><pre><code class="lang-python">from matchzoo.metrics import MeanReciprocalRankMeanReciprocalRank()(y_true, y_pred)</code></pre><pre><code>0.25</code></pre><h3 id="Precision"><a href="#Precision" class="headerlink" title="Precision"></a>Precision</h3><p>é€šå¸¸è®°ä¸ºP@k, kä¸ºæ’åºåçš„å‰kä½</p><pre><code class="lang-python">y_true = [0,0,0,1]y_pred = [0.2, 0.4, 0.3, 0.1]coupled_pair = list(zip(y_true, y_pred))coupled_pair = np.asarray(sorted(coupled_pair, key=lambda x: x[1], reverse=True))coupled_pair</code></pre><pre><code>array([[0. , 0.4],       [0. , 0.3],       [0. , 0.2],       [1. , 0.1]])</code></pre><h4 id="p-k-åˆ™æ˜¯è®¡ç®—å‰kä½"><a href="#p-k-åˆ™æ˜¯è®¡ç®—å‰kä½" class="headerlink" title="p@k åˆ™æ˜¯è®¡ç®—å‰kä½"></a>p@k åˆ™æ˜¯è®¡ç®—å‰kä½</h4><pre><code class="lang-python">precision = 0.0k = 4for idx, (label, score) in enumerate(coupled_pair):    if idx &gt;= k:        break    if label &gt; 0.:        precision += 1print(precision / k)</code></pre><pre><code>0.25</code></pre><h3 id="Average-Precision-AerP"><a href="#Average-Precision-AerP" class="headerlink" title="Average Precision(AerP)"></a>Average Precision(AerP)</h3><p>è®¡ç®—ä»1åˆ°kä½çš„P@kçš„å¹³å‡å€¼, AUC(area under PR curve), PRæ›²çº¿ä¸‹çš„é¢ç§¯</p><pre><code class="lang-python">from matchzoo.metrics import Precisiony_true = [0, 1]y_pred = [0.1, 0.6]precision_metrics = [Precision(k + 1) for k in range(len(y_pred))]out = [metric(y_true, y_pred) for metric in precision_metrics]if not out:    AP = 0.else:    AP = np.mean(out).item() AP</code></pre><pre><code>0.75</code></pre><h3 id="Mean-average-precision"><a href="#Mean-average-precision" class="headerlink" title="Mean average precision"></a>Mean average precision</h3><p>è‹¥æ£€ç´¢å‡ºå››ä¸ªç›¸å…³æ–‡æ¡£ï¼ˆ1ï¼Œ2ï¼Œ4ï¼Œ7ï¼‰<br>åˆ™map = (1/1 + 2/2 + 3/4 + 4/7)/4ï¼Œå†å¯¹æ‰€æœ‰é—®é¢˜æ±‚å¹³å‡</p><pre><code class="lang-python">y_true = [0, 1, 0, 0]y_pred = [0.1, 0.6, 0.2, 0.3]coupled_pair = list(zip(y_true, y_pred))coupled_pair = np.asarray(sorted(coupled_pair, key=lambda x: x[1], reverse=True))coupled_pair</code></pre><pre><code>array([[1. , 0.6],       [0. , 0.3],       [0. , 0.2],       [0. , 0.1]])</code></pre><pre><code class="lang-python">result = 0.pos = 0for idx, (label, score) in enumerate(coupled_pair):    # 0. is threshold    if label &gt; 0.:        pos += 1.        result += pos / (idx + 1.)if pos == 0:    MAP = 0.else:    MAP = result / posMAP</code></pre><pre><code>1.0</code></pre><h3 id="Discounted-Cumulative-Gain-DCG"><a href="#Discounted-Cumulative-Gain-DCG" class="headerlink" title="Discounted Cumulative Gain(DCG)"></a>Discounted Cumulative Gain(DCG)</h3><p>éœ€è¦è€ƒè™‘æ’åºçš„é¡ºåºã€‚</p><script type="math/tex; mode=display">\mathrm{DCG} @ \mathrm{k}=\sum_{i=1}^{k} \frac{2^{\mathrm{reli}}-1}{\log _{2(i+1)}}</script><pre><code class="lang-python">y_true = [0, 1, 2, 0]y_pred = [0.4, 0.2, 0.5, 0.7]coupled_pair = list(zip(y_true, y_pred))coupled_pair = np.asarray(sorted(coupled_pair, key=lambda x: x[1], reverse=True))coupled_pair</code></pre><pre><code>array([[0. , 0.7],       [2. , 0.5],       [0. , 0.4],       [1. , 0.2]])</code></pre><pre><code class="lang-python">import mathresult = 0.k = 3for i, (label, score) in enumerate(coupled_pair):    if i &gt;= k:        break    if label &gt; 0.:        result += (math.pow(2., label) - 1.) / math.log(2. + i)print(round(result, 2))</code></pre><pre><code>2.73</code></pre><h3 id="NDCG-Normalized-DCG"><a href="#NDCG-Normalized-DCG" class="headerlink" title="NDCG (Normalized DCG)"></a>NDCG (Normalized DCG)</h3><p>é¦–å…ˆè¦è®¡ç®—å‡ºæ’åºå®Œå…¨æ­£ç¡®ï¼Œå³ç†æƒ³çŠ¶æ€ä¸‹çš„IDCG</p><script type="math/tex; mode=display">\operatorname{IDCG} @ \mathrm{k}=\sum_{i=1}^{| \mathrm{REL}} \frac{2^{\mathrm{rel}_{-}}-1}{\log _{2}(\mathrm{i}+1)}</script><p>å…¶ä¸­RELæ˜¯ç†æƒ³çŠ¶æ€ä¸‹æ’åº.ç„¶åè®¡ç®—NDCG:</p><script type="math/tex; mode=display">\mathrm{NDCG} @ \mathrm{Ok}=\frac{\mathrm{DCG} @ \mathrm{k}}{\mathrm{IDCG} @ \mathrm{k}}</script><pre><code class="lang-python">coupled_pair</code></pre><pre><code>array([[0. , 0.7],       [2. , 0.5],       [0. , 0.4],       [1. , 0.2]])</code></pre><pre><code class="lang-python">from matchzoo.metrics import DiscountedCumulativeGaink = 2dcg_metric = DiscountedCumulativeGain(k=k, threshold=0.)idcg_val = dcg_metric(y_true, y_true)dcg_val = dcg_metric(y_true, y_pred)NDCG = dcg_val / idcg_val if idcg_val != 0. else 0.NDCG</code></pre><pre><code>0.52129602861432</code></pre><p>å‚è€ƒ</p><p><a href="https://github.com/NTMC-Community/MatchZoo-py" target="_blank" rel="noopener">matchzoo-py</a></p><p><a href="https://www.cnblogs.com/memento/p/8673309.html" target="_blank" rel="noopener">ä¿¡æ¯æ£€ç´¢è¯„ä»·æŒ‡æ ‡</a></p>]]></content>
      
      
        <tags>
            
            <tag> nlp </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>first-logic</title>
      <link href="/2019/10/11/first-logic/"/>
      <url>/2019/10/11/first-logic/</url>
      <content type="html"><![CDATA[<h2 id="Augmenting-Neural-Networks-with-First-order-Logics"><a href="#Augmenting-Neural-Networks-with-First-order-Logics" class="headerlink" title="Augmenting Neural Networks with First-order Logics"></a>Augmenting Neural Networks with First-order Logics</h2><h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>è¿™ç¯‡è®ºæ–‡æå‡ºä¸€ä¸ªæ–°çš„æ¡†æ¶ï¼Œå°†å¤–éƒ¨ä¸€é˜¶é€»è¾‘çŸ¥è¯†ç³»ç»Ÿåœ°åµŒå…¥åˆ°è®¡ç®—å›¾ä¸­ä»¥å¢å¼ºç½‘ç»œï¼Œå¹¶ä¸”æ²¡æœ‰<strong>é¢å¤–ç½‘ç»œå‚æ•°</strong>å’Œ<strong>ç½‘ç»œäºŒæ¬¡è®¾è®¡</strong>ï¼Œåœ¨ä¸‰ä¸ªä»»åŠ¡ï¼šé˜…è¯»ç†è§£ã€è¯­è¨€æ¨ç†å’Œæ–‡æœ¬åˆ†å—ä»»åŠ¡ä¸­è¿›è¡Œäº†å®éªŒï¼Œåœ¨å°æ•°æ®é‡ä¸‹æœ‰æ•ˆæå‡äº†åŸºå‡†æ¨¡å‹ã€‚</p><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><pre><code>è¿™ç¯‡è®ºæ–‡åˆ©ç”¨å…¬å¼€çŸ¥è¯†ï¼ˆä¸€é˜¶é€»è¾‘å½¢å¼ï¼‰æ¥è§£å†³ç½‘ç»œè®­ç»ƒæ‰€éœ€è¦çš„å¤§é‡æ•°æ®ã€‚ä¾‹å¦‚ï¼Œåœ¨æœºå™¨é˜…è¯»ç†è§£ä»»åŠ¡ä¸­ï¼Œé€šå¸¸ä½¿ç”¨çš„æ˜¯**æ³¨æ„åŠ›æœºåˆ¶**å»åŒ¹é…å•è¯ä½œä¸ºä¸­é—´æ­¥éª¤ï¼Œè¿›è€Œæ‰¾åˆ°æ–‡æœ¬ä¸­çš„ç­”æ¡ˆæ®µã€‚</code></pre><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7r4mifls1j30v20keq6r.jpg" alt=""></p><pre><code>ä½œè€…è®¤ä¸ºå®åˆ™ä¸Šä¸éœ€è¦è¿™ä¹ˆå¤æ‚çš„æ³¨æ„åŠ›æœºåˆ¶å»*Align*å•è¯ï¼Œå®åˆ™ä¸Šåªéœ€è¦ä¸€äº›ç®€å•çš„è§„åˆ™ï¼Œä¾‹å¦‚*ConceptNet*ä¸­çš„æ–¹æ³•ï¼Œå¦‚æœè¿™ç§å…¬å¼€çš„è§„åˆ™èƒ½å¤ŸåŠ å…¥åˆ°ç½‘ç»œçš„è®­ç»ƒä¹‹ä¸­ï¼Œé‚£ä¹ˆè‡ªç„¶è€Œç„¶å°±ä¼šå‡å°‘å¯¹æ•°æ®çš„ä¾èµ–ã€‚è¿™ç¯‡è®ºæ–‡ä¸»è¦å…³æ³¨ä¸‰ä¸ªé—®é¢˜ï¼š</code></pre><ol><li>èƒ½å¦å°†å…¬å¼€çš„è§„åˆ™(å¤–éƒ¨çŸ¥è¯†)æ•´åˆåˆ°ç«¯åˆ°ç«¯çš„ç½‘ç»œè®­ç»ƒä¹‹ä¸­ï¼Ÿ</li><li>è¿™ç§è§„åˆ™èƒ½å¤Ÿå‡è½»ç½‘ç»œå¯¹æ•°æ®çš„éœ€è¦ï¼Ÿ</li><li>ä½¿ç”¨å¤–éƒ¨é¢†åŸŸçŸ¥è¯†è¿™ç§æ–¹æ³•å’Œç°åœ¨çš„åˆ©ç”¨å¤§é‡æ•°æ®é¢„è®­ç»ƒè·å¾—è¯­å¥è¡¨è¾¾çš„æ–¹æ³•æ¯”èµ·æ¥å“ªä¸€ä¸ªæ›´å¥½ï¼Ÿ</li></ol><p>å…¶ä¸­ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯è¿™ç¯‡è®ºæ–‡ä¸»è¦è§£å†³çš„ï¼Œæ›´é‡è¦çš„æ˜¯å…¶ä¸­è§„åˆ™æ˜¯ä¸å¯å¯¼çš„ï¼Œè¦å°†å…¶åµŒå…¥åˆ°ç½‘ç»œä¹‹ä¸­ï¼Œå°±è¦è®²è§„åˆ™è½¬åŒ–ä¸ºå¯å¯¼çš„ï¼ŒåµŒå…¥åˆ°ç½‘ç»œçš„è®¡ç®—å›¾ä¸­ã€‚è¿™ç¯‡è®ºæ–‡ä¸»è¦åšäº†è¿™äº›è´¡çŒ®ï¼š</p><ol><li>æå‡ºä¸€ä¸ªæ–°çš„æ¡†æ¶å°†ä¸€é˜¶é€»è¾‘æ•´åˆåˆ°ç½‘ç»œçš„è®­ç»ƒå’Œé¢„æµ‹ä¹‹ä¸­ã€‚</li><li>åœ¨ä¸‰ä¸ªè‡ªç„¶è¯­è¨€å¤„ç†çš„ä»»åŠ¡ä¸­è¿›è¡Œå®éªŒï¼Œåœ¨å°æ ·æœ¬è®­ç»ƒæ•°æ®æ—¶ï¼Œéƒ½æœ‰å¾ˆå¤§çš„æé«˜ã€‚</li></ol><ul><li><p><strong>ConceptNet</strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7rw0g5tzmj31rp0u0dt0.jpg" alt=""></p></li></ul><h3 id="é—®é¢˜å®šä¹‰"><a href="#é—®é¢˜å®šä¹‰" class="headerlink" title="é—®é¢˜å®šä¹‰"></a>é—®é¢˜å®šä¹‰</h3><h4 id="ç¥ç»ç½‘ç»œ"><a href="#ç¥ç»ç½‘ç»œ" class="headerlink" title="ç¥ç»ç½‘ç»œ"></a>ç¥ç»ç½‘ç»œ</h4><p>ç¥ç»ç½‘ç»œå¯ä»¥çœ‹ä½œæ˜¯<strong>éå¾ªç¯</strong>çš„è®¡ç®—å›¾$G=(V,E)$ï¼Œå…¶ä¸­çš„èŠ‚ç‚¹$V$æœ‰æ—¶æ²¡æœ‰å®åœ¨çš„æ„ä¹‰ï¼Œä½†æœ‰æ—¶å´å› ä¸ºä»»åŠ¡çš„ä¸åŒèŠ‚ç‚¹è¢«åµŒå…¥äº†ä¸€äº›è¯­ä¹‰ï¼Œè€Œä½œè€…ä»¬çš„ç›®æ ‡å°±æ˜¯é€šè¿‡å…¬å¼€çš„è§„åˆ™æ¥å¢å¼ºç¥ç»ç½‘ç»œä¸­çš„<strong>ç¥ç»å…ƒ</strong>ã€‚</p><h4 id="ä¸€é˜¶é€»è¾‘"><a href="#ä¸€é˜¶é€»è¾‘" class="headerlink" title="ä¸€é˜¶é€»è¾‘"></a>ä¸€é˜¶é€»è¾‘</h4><pre><code>                                                    $$L \to R$$</code></pre><p>å¯è¡¨è¾¾ä¸º$L$å¼•èµ·äº†$R$ï¼Œå³è‹¥$L$ï¼Œåˆ™$R$ã€‚å°†ä¸€é˜¶é€»è¾‘åµŒå…¥åˆ°ç½‘ç»œä¸­ä¸»è¦æœ‰ä¸‰ä¸ªéš¾ç‚¹ï¼š</p><ol><li>éœ€è¦å°†ä¸€é˜¶é€»è¾‘ä¸­çš„æ–­è¨€æ˜ å°„ä¸ºç¥ç»ç½‘ç»œä¸­çš„ç¥ç»å…ƒèŠ‚ç‚¹ã€‚</li><li>é€»è¾‘æ˜¯ä¸å¯å¾®çš„ï¼Œéœ€è¦å°†é€»è¾‘ç¼–ç ä¿è¯å¯å¯¼æ€§ï¼Œä»è€Œä½¿ç”¨æ¢¯åº¦æ–¹æ³•è®­ç»ƒã€‚</li><li>ç½‘ç»œè®¡ç®—å›¾æ˜¯éå¾ªç¯çš„ï¼Œè€Œç”¨æˆ·å®šä¹‰çš„è§„åˆ™æ˜¯å¯èƒ½å¾ªç¯çš„ï¼Œæ‰€ä»¥è¦è§£å†³å¾ªç¯æ€§ã€‚</li></ol><h5 id="è¡¨ç¤º"><a href="#è¡¨ç¤º" class="headerlink" title="è¡¨ç¤º"></a>è¡¨ç¤º</h5><ul><li>$a_{i},b_{j}$ä¸ºè®¡ç®—å›¾èŠ‚ç‚¹</li><li>$A_{i}ï¼ŒB_{j}$ä¸ºè§„åˆ™ä¸­çš„æ–­è¨€</li></ul><h5 id="å¾ªç¯æ€§"><a href="#å¾ªç¯æ€§" class="headerlink" title="å¾ªç¯æ€§"></a>å¾ªç¯æ€§</h5><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7r5zs909bj30v40ke418.jpg" alt=""></p><p>å¯¹äºå¦‚å›¾çš„ç¥ç»ç½‘ç»œï¼Œ$A_{1}\land B_{1}\to A_{2} \land B_{2}$æ˜¯å¾ªç¯çš„ï¼Œè€Œ$A_{1} \land A_{2} \to B_{1} \land B_{2}$æ˜¯éå¾ªç¯çš„ã€‚</p><p>æœ‰æ—¶é€šè¿‡ä¸€äº›ç­‰ä»·å˜åŒ–å¯ä»¥å°†å¾ªç¯çš„æ–­è¨€å˜æˆéå¾ªç¯çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š$B_{1} \to A_{1}$å¯¹äºä¸Šé¢çš„å›¾æ˜¯å¾ªç¯çš„ï¼Œè€Œç­‰ä»·çš„$\neg A_{1} \to \neg B_{1}$æ˜¯éå¾ªç¯çš„</p><h3 id="æ•´ä½“æ¡†æ¶"><a href="#æ•´ä½“æ¡†æ¶" class="headerlink" title="æ•´ä½“æ¡†æ¶"></a>æ•´ä½“æ¡†æ¶</h3><h5 id="æ¡ä»¶è·ç¦»å‡½æ•°-Constraints-Beget-Distance-Functions"><a href="#æ¡ä»¶è·ç¦»å‡½æ•°-Constraints-Beget-Distance-Functions" class="headerlink" title="æ¡ä»¶è·ç¦»å‡½æ•°(Constraints Beget Distance Functions)"></a>æ¡ä»¶è·ç¦»å‡½æ•°(Constraints Beget Distance Functions)</h5><p>å‡è®¾éå¾ªç¯æ¡ä»¶è¯­å¥</p><pre><code>                                                    $$Z \to Y$$</code></pre><p>å®šä¹‰ä¸$Y$è”ç³»çš„ç¥ç»å…ƒä¸º</p><pre><code>                                                    $$y=g(Wx)$$</code></pre><p>å…¶ä¸­$g$ä»£è¡¨æ¿€æ´»å‡½æ•°ï¼Œ$W$ä¸ºç½‘ç»œå‚æ•°ï¼Œ$x$æ˜¯å¯¹$y$çš„è¾“å…¥ã€‚æ­¤å¤–ï¼Œä½¿ç”¨å‘é‡$z$ä»£è¡¨æ–­è¨€$Z$ã€‚</p><h5 id="é™åˆ¶ç½‘ç»œå±‚-Constrained-Neural-Layers"><a href="#é™åˆ¶ç½‘ç»œå±‚-Constrained-Neural-Layers" class="headerlink" title="é™åˆ¶ç½‘ç»œå±‚(Constrained Neural Layers)"></a>é™åˆ¶ç½‘ç»œå±‚(Constrained Neural Layers)</h5><p>ä½œè€…çš„ç›®æ ‡æ˜¯å»å¢å¼º$y$çš„è®¡ç®—ï¼Œä»è€Œæ— è®º$Z$ä½•æ—¶ä¸ºçœŸï¼Œå¦‚æœ$Y$ä¸æ˜¯å¦å®šçš„ï¼Œé‚£ä¹ˆ$y$è¿›å…¥æ¿€æ´»å‡½æ•°éƒ½æ˜¯å¢åŠ çš„ã€‚æ‰€ä»¥å®šä¹‰é™åˆ¶ç½‘ç»œå±‚ä¸ºï¼š</p><pre><code>                                                    $$y=g(Wx+\rho d(z))$$</code></pre><p>å…¶ä¸­$d$å°±æ˜¯ä½œä¸ºè·ç¦»å‡½æ•°ï¼Œ$\rho \ge 0$ã€‚</p><h5 id="è·ç¦»å‡½æ•°çš„è®¾è®¡"><a href="#è·ç¦»å‡½æ•°çš„è®¾è®¡" class="headerlink" title="è·ç¦»å‡½æ•°çš„è®¾è®¡"></a>è·ç¦»å‡½æ•°çš„è®¾è®¡</h5><p>ç†æƒ³ä¸­çš„è·ç¦»å‡½æ•°å¦‚ä¸‹ï¼Œ</p><pre><code>                            $$d_{i d e a l}(\mathbf{z})=\left\{\begin{array}{ll}{1,} &amp; {\text { if } Z \text { holds }} \\ {0,} &amp; {\text { otherwise }}\end{array}\right.$$</code></pre><p>å¯æƒœçš„æ˜¯å®ƒå¹¶ä¸å¯å¾®ã€‚æ‰€ä»¥éœ€è¦åšä¸€äº›å¹³æ»‘çš„æ›¿ä»£ã€‚</p><p>ä½œè€…åœ¨è®ºæ–‡ä¸­ä½¿ç”¨äº†è‡ªå·±è®¾è®¡çš„è·ç¦»å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ç”±probabilistic soft logic (c.f. Klement et al., 2013) and its use of the Åukasiewicz T-norm and T-conormæ‰€å¯å‘çš„ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7rwq7wjnej30wo0oo0w9.jpg" alt=""></p><p>ä¸Šè¡¨è¡¨ç°äº†å¯¹äº$Z$ä¸åŒçš„ä¸æˆ–é€»è¾‘å¤„ç†ï¼Œæ‰€ä½¿ç”¨çš„ä¸åŒè·ç¦»å‡½æ•°$d(z)$ã€‚ä¾‹å¦‚å¯¹äºç¬¬ä¸€è¡Œï¼Œå½“å…¶ä¸­ä¸€ä¸ª$Z_{i}$ä¸ºå‡ï¼Œè·ç¦»å‡½æ•°çš„å€¼å°±ä¼šå˜ä¸º0ã€‚</p><h5 id="å¦å®šå‡è®¾"><a href="#å¦å®šå‡è®¾" class="headerlink" title="å¦å®šå‡è®¾"></a>å¦å®šå‡è®¾</h5><p>å¯¹äº$Z \to Y$ï¼Œå‰å› $Z$å’Œç»“æœ$Y$éƒ½æœ‰å¯èƒ½æ˜¯å¦å®šçš„ã€‚è¡¨1çš„ç¬¬ä¸‰å’Œç¬¬å››è¡Œä»£è¡¨äº†å¦å®šçš„$Z$è¿™ç§æƒ…å†µï¼Œè€Œå¯¹äºå¦å®šçš„ç»“æœ$Y$ï¼Œéœ€è¦å‡å°ç¥ç»å…ƒ$y$è¿›å…¥æ¿€æ´»å‡½æ•°å‰çš„åˆ†æ•°ï¼Œæ‰€ä»¥åªéœ€è¦å¯¹æ•´ä¸ªè·ç¦»å‡½æ•°å–è´Ÿå°±è¡Œã€‚</p><h5 id="è§„åˆ’å› å­-rho"><a href="#è§„åˆ’å› å­-rho" class="headerlink" title="è§„åˆ’å› å­$\rho$"></a>è§„åˆ’å› å­$\rho$</h5><ol><li>å½“$\rho = +\infty$ï¼Œç¥ç»å…ƒè¿›å…¥æ¿€æ´»å‡½æ•°å‰çš„åˆ†æ•°å°†ç”±è·ç¦»å‡½æ•°æ‰€æ§åˆ¶ï¼Œæ­¤æ—¶å°±å°†æ˜¯æœ‰ä¸€ä¸ª<strong>ç¡¬é™åˆ¶(hard constraint)</strong>ã€‚</li><li>å½“$\rho$å¾ˆå°æ—¶ï¼Œè¾“å‡ºç»“æœå°†å–å†³äº$Wx$å’Œè·ç¦»å‡½æ•°ä¸¤è€…ï¼Œæ­¤æ—¶å«åš<strong>è½¯é™åˆ¶</strong>ï¼Œè€Œè·ç¦»å‡½æ•°æ›´å¤šçš„æ˜¯èµ·ä¸ªå»ºè®®ä½œç”¨ã€‚</li></ol><h5 id="æ™®éçš„å¸ƒå°”å‰ç½®"><a href="#æ™®éçš„å¸ƒå°”å‰ç½®" class="headerlink" title="æ™®éçš„å¸ƒå°”å‰ç½®"></a>æ™®éçš„å¸ƒå°”å‰ç½®</h5><p>ä¹‹å‰åªè€ƒè™‘çš„æ˜¯ä¸æˆ–è¿™ä¸¤ç§å•ä¸€å­˜åœ¨çš„æƒ…å†µï¼Œç°åœ¨è€ƒè™‘æ›´ä¸ºæ™®éçš„æƒ…å†µã€‚å‡è®¾ç°åœ¨æœ‰ä¸ªæ–­è¨€å‰ç½®ä¸º</p><pre><code>                                                    $$(\neg A \lor B) \land (C \lor D)$$</code></pre><p>é¦–å…ˆæˆ‘ä»¬å–ä¸­é—´å˜é‡å°†å…¶è½¬åŒ–ä¸º</p><pre><code>                                                    $$P \land Q$$</code></pre><p>å…¶ä¸­$(\neg A \lor B)\leftrightarrow P $ï¼Œ$(C \lor D) \leftrightarrow Q$ã€‚è¦è¿™æ ·åšï¼Œéœ€è¦ä½¿ç”¨è¾…åŠ©ç¥ç»å…ƒæ¥è¡¨ç¤º$P$å’Œ$Q$ï¼Œå¹¶ä¸”è¾…åŠ©ç¥ç»å…ƒå®Œå…¨éœ€è¦è¢«åŒå‘é™åˆ¶ã€‚</p><h5 id="é™åˆ¶è¾…åŠ©å±‚"><a href="#é™åˆ¶è¾…åŠ©å±‚" class="headerlink" title="é™åˆ¶è¾…åŠ©å±‚"></a>é™åˆ¶è¾…åŠ©å±‚</h5><p>å¯¹äº$Z \leftrightarrow Y$ï¼Œå®šä¹‰è¾…åŠ©å±‚ä¸º</p><pre><code>                                                    $$y=d(z)$$</code></pre><p>å’Œä¹‹å‰ç›¸æ¯”ï¼Œç°åœ¨ä¸éœ€è¦æ¿€æ´»å‡½æ•°ï¼Œå› ä¸ºè·ç¦»æ˜¯å±äº$[0,1]$çš„ï¼Œå¯ä»¥ç›´æ¥è¡¨ç¤ºä¸ºåˆ†æ•°ã€‚æ‰€ä»¥ä¹‹å‰çš„è·ç¦»å‡½æ•°ç°åœ¨ä»ç„¶é€‚ç”¨ã€‚</p><h5 id="ç»“æ„å¢å¼ºç½‘ç»œ"><a href="#ç»“æ„å¢å¼ºç½‘ç»œ" class="headerlink" title="ç»“æ„å¢å¼ºç½‘ç»œ"></a>ç»“æ„å¢å¼ºç½‘ç»œ</h5><p>ä¾æ®ç»™çš„<strong>æ¡ä»¶è¯­å¥</strong>å’Œ<strong>è®¡ç®—å›¾</strong>å¯ä»¥å°†æ¡†æ¶æµç¨‹æ€»ç»“ä¸ºï¼š</p><ol><li>å¦‚æœæœ‰å¿…è¦ï¼Œå°†è¯­å¥å‰ç½®è½¬åŒ–ä¸ºä¸æˆ–é€»è¾‘å½¢å¼</li><li>å°†ä¸æˆ–å½¢å¼æ ¹æ®ä¹‹å‰çš„è¡¨è½¬åŒ–ä¸ºè·ç¦»å‡½æ•°</li><li>æ ¹æ®è·ç¦»å‡½æ•°å»ç”Ÿæˆé™åˆ¶è¾…åŠ©å±‚æˆ–é™åˆ¶ç½‘ç»œå±‚å»æ›¿ä»£åŸæ¥çš„ç½‘ç»œå±‚ã€‚</li><li>æœ€åä½¿ç”¨å¢å¼ºçš„ç½‘ç»œå»è¿›è¡Œè®­ç»ƒå’Œæ¨ç†ã€‚</li></ol><h3 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h3><h4 id="æœºå™¨é˜…è¯»ç†è§£"><a href="#æœºå™¨é˜…è¯»ç†è§£" class="headerlink" title="æœºå™¨é˜…è¯»ç†è§£"></a>æœºå™¨é˜…è¯»ç†è§£</h4><ul><li>ä½¿ç”¨æ•°æ®é›†ä¸ºSQuADï¼Œå¤–éƒ¨èµ„æºä¸ºConceptNetã€‚</li></ul><h5 id="æ¨¡å‹"><a href="#æ¨¡å‹" class="headerlink" title="æ¨¡å‹"></a>æ¨¡å‹</h5><p>ä½¿ç”¨çš„åŸºçº¿æ¨¡å‹ä¸ºBiDAFï¼Œå¦ä¸€ä¸ªä¸ºä½¿ç”¨ELMoå¢å¼ºçš„BiDAFã€‚å°†æ¨¡å‹å®æ–½æ­¥éª¤ç®€åŒ–ä¸ºå¦‚ä¸‹ï¼š</p><ol><li><script type="math/tex; mode=display">p, q = encoder(p), encoder(q)</script></li><li>$\overleftarrow{a}, \overrightarrow{a} = \sigma(layers(p, q))$</li><li><script type="math/tex; mode=display">y, z = \sigma(layers(p, q, \overleftarrow{a}, \overrightarrow{a}))</script></li></ol><p>å…¶ä¸­$p, q$æ˜¯ç¯‡ç« å’Œé—®é¢˜ï¼Œ$\sigma$ä»£è¡¨softmaxæ¿€æ´»å‡½æ•°ï¼Œ$\overleftarrow{a},\overrightarrow{a}$ä»£è¡¨$q$å¯¹$p$ä»¥åŠ$p$å¯¹$q$çš„åŒå‘æ³¨æ„åŠ›ï¼Œ$y,z$æ˜¯è¾“å‡ºç­”æ¡ˆè¾¹ç•Œçš„æ¦‚ç‡ã€‚</p><h5 id="å¢å¼º"><a href="#å¢å¼º" class="headerlink" title="å¢å¼º"></a>å¢å¼º</h5><p>ä½œè€…ä½¿ç”¨ConceptNetæ¥ä»£æ›¿ä¸Šæ–¹çš„æ­¥éª¤äºŒå»è·å¾—ç›¸å…³å•è¯ä¹‹é—´çš„å…³ç³»ã€‚å…·ä½“åœ°ï¼Œä½¿ç”¨ä¸¤æ¡è§„åˆ™æ¥è¯ é‡Šä»–ä»¬æ¡†æ¶çš„çµæ´»ã€‚é¦–å…ˆæœ‰å¦‚ä¸‹å®šä¹‰ï¼š</p><ul><li>$K_{i, j}$ï¼šå•è¯$p_{i}$åœ¨ConceptNetä¸­ä¸å•è¯$q_{i}$æœ‰ä»¥ä¸‹è”ç³»<strong>{Synonym, DistinctFrom, IsA, Related}</strong></li><li>$\overleftarrow{A_{i, j}}$ï¼šæ²¡æœ‰é™åˆ¶çš„æ¨¡å‹å¯¹$p_{i}$å’Œ$q_{j}$æœ€ä½³åŒ¹é…å…³ç³»çš„å†³ç­–ã€‚</li><li>$\overleftarrow{A_{i, j}^{â€˜}}$ï¼šæœ‰é™åˆ¶çš„æ¨¡å‹å¯¹ä»¥ä¸Šå…³ç³»çš„å†³ç­–ã€‚</li></ul><p>æ ¹æ®ä»¥ä¸Šå®šä¹‰ï¼Œæœ‰ä»¥ä¸‹è§„åˆ™ï¼š</p><script type="math/tex; mode=display">\begin{array}{ll}{R_{1}:} & {\forall i, j \in C, K_{i, j} \rightarrow \overleftarrow A_{i, j}^{\prime}} \\ {R_{2}:} & {\forall i, j \in C, K_{i, j} \wedge {A}_{i, j} \rightarrow \overleftarrow A_{i, j}^{\prime}}\end{array}</script><p>å…¶ä¸­$R_{1}$ä»£è¡¨å¦‚æœä¸¤ä¸ªå•è¯åœ¨ConceptNetä¸­æœ‰å…³ç³»ï¼Œåˆ™è¿™ä¸¤ä¸ªå•è¯åœ¨æ¨¡å‹ç¼–ç ç»“æœåº”è¯¥ç›¸<strong>aligned</strong></p><p>è€Œ$R_{2}$ä»£è¡¨æœ‰é™åˆ¶çš„æ¨¡å‹ç»“æœæ˜¯ä¸ä¸¤è€…ç›¸å…³çš„ï¼šä¸ä»…æ˜¯ConceptNet,è¿˜æœ‰åŸæœ¬çš„æ¨¡å‹ç»“æœã€‚</p><p>å› ä¸º$K_{i, j}$ä¸èƒ½æ˜ å°„åˆ°ç½‘ç»œä¸­çš„ä¸€ä¸ªç»“ç‚¹ï¼Œæ‰€ä»¥ä½œè€…åˆ›é€ äº†ä¸€ä¸ªæ–°ç»“ç‚¹$k_{i,j}$ï¼Œå®ƒçš„å€¼æ˜¯ç”±ConceptNetå†³å®šçš„ã€‚</p><p><img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20191011142151.png" alt=""></p><h5 id="æ˜¯å¦æå‡æ¨¡å‹æ•ˆæœï¼Œå’Œé¢„è®­ç»ƒæ¨¡å‹æ¯”è¾ƒï¼Ÿ"><a href="#æ˜¯å¦æå‡æ¨¡å‹æ•ˆæœï¼Œå’Œé¢„è®­ç»ƒæ¨¡å‹æ¯”è¾ƒï¼Ÿ" class="headerlink" title="æ˜¯å¦æå‡æ¨¡å‹æ•ˆæœï¼Œå’Œé¢„è®­ç»ƒæ¨¡å‹æ¯”è¾ƒï¼Ÿ"></a>æ˜¯å¦æå‡æ¨¡å‹æ•ˆæœï¼Œå’Œé¢„è®­ç»ƒæ¨¡å‹æ¯”è¾ƒï¼Ÿ</h5><p><img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20191011143236.png" alt=""></p><p>åœ¨æ•°æ®é‡æ›´å°‘æ—¶ï¼Œæå‡æ›´å¤šã€‚$R_{1}$æ¯”$R_{2}$æ•ˆæœæ›´å¥½ã€‚</p><h4 id="è‡ªç„¶è¯­è¨€æ¨ç†"><a href="#è‡ªç„¶è¯­è¨€æ¨ç†" class="headerlink" title="è‡ªç„¶è¯­è¨€æ¨ç†"></a>è‡ªç„¶è¯­è¨€æ¨ç†</h4><p><img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20191011202501.png" alt=""></p>]]></content>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> nlp </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vscode-docker</title>
      <link href="/2019/07/13/vscode-docker/"/>
      <url>/2019/07/13/vscode-docker/</url>
      <content type="html"><![CDATA[<h2 id="ä½¿ç”¨vscodeè¿æ¥è¿œç¨‹docker"><a href="#ä½¿ç”¨vscodeè¿æ¥è¿œç¨‹docker" class="headerlink" title="ä½¿ç”¨vscodeè¿æ¥è¿œç¨‹docker"></a>ä½¿ç”¨vscodeè¿æ¥è¿œç¨‹docker</h2><p>ä¹‹å‰å†™ä»£ç ä¸€èˆ¬ç®€å•çš„è¯éƒ½åœ¨<code>jupyter</code>æˆ–è€…<code>vim</code>ä¸Šå†™ï¼Œå¤æ‚çš„è¯å°±åœ¨æœ¬åœ°å†™å¥½ä¹‹åå†ä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼Œä½†ç”±äºæœ¬åœ°å’ŒæœåŠ¡å™¨ç¯å¢ƒä¸åŒï¼Œå¾€å¾€éœ€è¦ä¸‹è½½å¾ˆå¤šåŒ…ï¼Œæ‰èƒ½æ›´å¥½å®Œæˆä»£ç ç¼–å†™ï¼Œç»ˆäºæ‰¾åˆ°ä¸€ä¸ªæ–¹æ³•èƒ½å®æ—¶ç¼–å†™æœåŠ¡å™¨ä¸Šå®¹å™¨ä¸Šçš„ä»£ç ï¼Œè®°å½•ä¸€ä¸‹ã€‚</p><h3 id="dockeré…ç½®"><a href="#dockeré…ç½®" class="headerlink" title="dockeré…ç½®"></a>dockeré…ç½®</h3><ol><li><p>é¦–å…ˆé‡æ–°è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œè¿™ä¸ªå®¹å™¨åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šæ–°åŠ ä¸Šä¸€ä¸ªå¯¹æœåŠ¡å™¨ä¸»æœº22ç«¯å£çš„æ˜ å°„ï¼Œå› ä¸ºsshåˆ°æœåŠ¡å™¨ç«¯å£ä¸€èˆ¬æ˜¯22.</p><pre><code class="lang-bash">$ sudo docker run -p 7964:8888 -p 7965:5000 -p 7966:6000 -p 8022:22 -it -v /home/caoshuai/:/root/workspace --runtime=nvidia --name=&quot;caoshuai&quot; f722eab170b7 /bin/bash</code></pre></li><li><p>è¿›å…¥å®¹å™¨ä¹‹ååœ¨å®¹å™¨å†…å®‰è£…<code>openssh-server</code></p><pre><code class="lang-bash">$ apt-get update$ apt-get install -y openssh-server</code></pre></li><li><p>å»ºç«‹ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶å¯¹sshåšç›¸å…³çš„é…ç½®</p><pre><code class="lang-bash">$ mkdir /var/run/sshd$ echo &#39;root:[passwd]&#39; | chpasswd# è¿™é‡Œä½¿ç”¨ä½ è‡ªå·±æƒ³è®¾ç½®çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œä½†æ˜¯ä¸€å®šè¦è®°ä½ï¼$ sed -i &#39;s/PermitRootLogin prohibit-password/PermitRootLogin yes/&#39; /etc/ssh/sshd_config$ sed &#39;s@session\s*required\s*pam_loginuid.so@session optional pam_loginuid.so@g&#39; -i /etc/pam.d/sshd$ echo &quot;export VISIBLE=now&quot; &gt;&gt; /etc/profile</code></pre></li><li><p>é‡å¯sshæ¿€æ´»é…ç½®</p><pre><code class="lang-bash">$ service ssh restart</code></pre></li><li><p>åœ¨æœåŠ¡å™¨ä¸»æœºä¸Šæµ‹è¯•åˆšæ‰æ–°å»ºå®¹å™¨å“ªä¸ªç«¯å£æ˜ å°„åˆ°æœåŠ¡å™¨ä¸Š22å·ç«¯å£ï¼Œå¹¶æµ‹è¯•èƒ½å¦sshåˆ°dockerå®¹å™¨å†…</p><pre><code class="lang-bash">$ sudo docker port [your_container_name] 22# å¦‚æœå‰é¢çš„é…ç½®ç”Ÿæ•ˆäº†ï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹è¾“å‡º# 0.0.0.0:8022$ ssh root@[your_host_ip] -p 8022# å¯†ç æ˜¯ä½ å‰é¢è‡ªå·±è®¾ç½®çš„</code></pre><p>åˆ°è¿™é‡Œdocker ç¯å¢ƒå°±é…ç½®å®Œæˆï¼Œæ¥ä¸‹æ¥vscodeé…ç½®å°±ç®€å•äº†ã€‚</p></li></ol><h3 id="Vscodeé…ç½®"><a href="#Vscodeé…ç½®" class="headerlink" title="Vscodeé…ç½®"></a>Vscodeé…ç½®</h3><ol><li><p>å®‰è£…<strong>Remote SSHæ’ä»¶</strong>(æˆ–Remote Devolopmentä¸‰ä»¶å¥—)</p></li><li><p>å®‰è£…å®Œæˆä¹‹ååªéœ€è¦<code>ctrl+shift+p</code>é€‰æ‹©<code>ssh-setting</code>å¹¶é…ç½®ç›¸åº”ssh hostå³å¯</p><pre><code class="lang-txt">HostName: [ipåœ°å€]User: [ç”¨æˆ·å(dockerå°±æ˜¯root)]Port: [ç«¯å£å·8022]</code></pre></li><li><p>æ¥ä¸‹æ¥å°±é€‰æ‹©è¿æ¥åˆ°Remote Hostå¹¶è¾“å…¥ä¹‹å‰è®¾ç½®çš„å¯†ç å°±å¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨Vscodeè¿œç¨‹å¼€å‘å•¦ï¼</p></li></ol><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://www.itcodemonkey.com/article/15433.html" target="_blank" rel="noopener">PyCharm + Dockerï¼šæ‰“é€ æœ€èˆ’é€‚çš„æ·±åº¦å­¦ä¹ ç‚¼ä¸¹ç‚‰</a></p>]]></content>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä¸­æ–‡åˆ†è¯</title>
      <link href="/2019/07/07/%E4%B8%AD%E6%96%87%E5%88%86%E8%AF%8D/"/>
      <url>/2019/07/07/%E4%B8%AD%E6%96%87%E5%88%86%E8%AF%8D/</url>
      <content type="html"><![CDATA[<h2 id="ä¸­æ–‡åˆ†è¯ç®—æ³•åŠå®ç°"><a href="#ä¸­æ–‡åˆ†è¯ç®—æ³•åŠå®ç°" class="headerlink" title="ä¸­æ–‡åˆ†è¯ç®—æ³•åŠå®ç°"></a>ä¸­æ–‡åˆ†è¯ç®—æ³•åŠå®ç°</h2><h3 id="ä¸»æµæ–¹æ³•"><a href="#ä¸»æµæ–¹æ³•" class="headerlink" title="ä¸»æµæ–¹æ³•"></a>ä¸»æµæ–¹æ³•</h3><p>ä¸­æ–‡åˆ†ç±»æ–¹æ³•å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p><ul><li>åŸºäºè¯è¡¨çš„åˆ†è¯æ–¹æ³•<ul><li>æ­£å‘æœ€å¤§åŒ¹é…æ³•FMM</li><li>é€†å‘æœ€å¤§åŒ¹é…æ³•BMM</li><li>N-æœ€çŸ­è·¯å¾„æ–¹æ³•</li></ul></li><li>åŸºäºç»Ÿè®¡æ¨¡å‹çš„åˆ†è¯æ–¹æ³•<ul><li>åŸºäºn-gramè¯­è¨€æ¨¡å‹çš„åˆ†è¯æ–¹æ³•</li></ul></li><li>åŸºäºåºåˆ—æ ‡æ³¨çš„åˆ†è¯æ–¹æ³•<ul><li>åŸºäºHMMçš„åˆ†è¯æ–¹æ³•</li><li>åŸºäºCRFçš„åˆ†è¯æ–¹æ³•</li><li>åŸºäºè¯æ„ŸçŸ¥æœºçš„åˆ†è¯æ–¹æ³•</li><li>åŸºäºæ·±åº¦å­¦ä¹ çš„ç«¯åˆ°ç«¯çš„åˆ†è¯æ–¹æ³•</li></ul></li></ul><h3 id="è¯„ä»·æŒ‡æ ‡"><a href="#è¯„ä»·æŒ‡æ ‡" class="headerlink" title="è¯„ä»·æŒ‡æ ‡"></a>è¯„ä»·æŒ‡æ ‡</h3><ul><li><p>å‡†ç¡®ç‡(Precision)</p><script type="math/tex; mode=display">Precision=\frac{WordCount(CorrectResults)}{WordCount(TrainSet)}</script></li><li><p>å¬å›ç‡(Recall)</p><script type="math/tex; mode=display">Recal=\frac{WordCount(CorrectResults)}{WordCount(TestSet)}</script></li><li><p>F-æµ‹åº¦</p><script type="math/tex; mode=display">F1=\frac{2 * P*R}{P+R}</script></li><li><p>æœªç™»å½•è¯çš„å¬å›ç‡(ROOV)</p></li><li>è¯å…¸è¯çš„å¬å›ç‡ï¼ˆRIVï¼‰</li></ul><h3 id="åŸºäºè¯è¡¨çš„æœ€å¤§åŒ¹é…æ–¹æ³•"><a href="#åŸºäºè¯è¡¨çš„æœ€å¤§åŒ¹é…æ–¹æ³•" class="headerlink" title="åŸºäºè¯è¡¨çš„æœ€å¤§åŒ¹é…æ–¹æ³•"></a>åŸºäºè¯è¡¨çš„æœ€å¤§åŒ¹é…æ–¹æ³•</h3><p>æ­£å‘æœ€å¤§åŒ¹é…å’Œåå‘æœ€å¤§åŒ¹é…ç®—æ³•å®é™…ä¸Šéƒ½æ˜¯é€šè¿‡è´ªå¿ƒçš„æ–¹æ³•ä¾æ®è¯å…¸åˆ‡åˆ†å‡ºå½“å‰ä½ç½®ä¸Šé•¿åº¦æœ€å¤§çš„è¯ï¼Œåªæ˜¯ä¸¤ç§æ–¹æ³•å¯¹äºå¥å­çš„å¤„ç†æ–¹å‘ä¸åŒè€Œå·²ã€‚FMMå®è´¨ä¸Šæ˜¯å¾ˆç®€å•ç²—æš´çš„åŒ¹é…æ–¹æ³•ï¼Œå¯¹äºä¸€äº›æ­§ä¹‰è¯çš„å¤„ç†èƒ½åŠ›å¾ˆä¸€èˆ¬ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒBMMæ–¹æ³•è¦ä¼˜äºFMMæ–¹æ³•ï¼Œä½†ç°åœ¨æ˜¯å‡ ä¹ä¸ä¼šä½¿ç”¨è¿™ç§åŸºäºåŒ¹é…çš„æ–¹æ³•äº†ã€‚</p><p>BMMç®—æ³•ï¼š</p><p>é€†å‘åŒ¹é…æ³•æ€æƒ³ä¸æ­£å‘ä¸€æ ·ï¼Œåªæ˜¯ä»å³å‘å·¦åˆ‡åˆ†ï¼Œè¿™é‡Œä¸¾ä¸€ä¸ªä¾‹å­ï¼š<br>è¾“å…¥ä¾‹å¥ï¼šS1=â€è®¡ç®—è¯­è¨€å­¦è¯¾ç¨‹æœ‰æ„æ€â€ ï¼›<br>å®šä¹‰ï¼šæœ€å¤§è¯é•¿MaxLen = 5ï¼›S2= â€œ â€œï¼›åˆ†éš”ç¬¦ = â€œ/â€ï¼›<br>å‡è®¾å­˜åœ¨è¯è¡¨ï¼šâ€¦ï¼Œè®¡ç®—è¯­è¨€å­¦ï¼Œè¯¾ç¨‹ï¼Œæ„æ€ï¼Œâ€¦ï¼›<br><strong>æœ€å¤§é€†å‘åŒ¹é…åˆ†è¯ç®—æ³•</strong>è¿‡ç¨‹å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰S2=â€â€ï¼›S1ä¸ä¸ºç©ºï¼Œä»S1å³è¾¹å–å‡ºå€™é€‰å­ä¸²W=â€è¯¾ç¨‹æœ‰æ„æ€â€ï¼›<br>ï¼ˆ2ï¼‰æŸ¥è¯è¡¨ï¼ŒWä¸åœ¨è¯è¡¨ä¸­ï¼Œå°†Wæœ€å·¦è¾¹ä¸€ä¸ªå­—å»æ‰ï¼Œå¾—åˆ°W=â€ç¨‹æœ‰æ„æ€â€ï¼›<br>ï¼ˆ3ï¼‰æŸ¥è¯è¡¨ï¼ŒWä¸åœ¨è¯è¡¨ä¸­ï¼Œå°†Wæœ€å·¦è¾¹ä¸€ä¸ªå­—å»æ‰ï¼Œå¾—åˆ°W=â€æœ‰æ„æ€â€ï¼›<br>ï¼ˆ4ï¼‰æŸ¥è¯è¡¨ï¼ŒWä¸åœ¨è¯è¡¨ä¸­ï¼Œå°†Wæœ€å·¦è¾¹ä¸€ä¸ªå­—å»æ‰ï¼Œå¾—åˆ°W=â€æ„æ€â€<br>ï¼ˆ5ï¼‰æŸ¥è¯è¡¨ï¼Œâ€œæ„æ€â€åœ¨è¯è¡¨ä¸­ï¼Œå°†WåŠ å…¥åˆ°S2ä¸­ï¼ŒS2=â€ æ„æ€/â€œï¼Œå¹¶å°†Wä»S1ä¸­å»æ‰ï¼Œæ­¤æ—¶S1=â€è®¡ç®—è¯­è¨€å­¦è¯¾ç¨‹æœ‰â€ï¼›<br>ï¼ˆ6ï¼‰S1ä¸ä¸ºç©ºï¼Œäºæ˜¯ä»S1å·¦è¾¹å–å‡ºå€™é€‰å­ä¸²W=â€è¨€å­¦è¯¾ç¨‹æœ‰â€ï¼›<br>ï¼ˆ7ï¼‰æŸ¥è¯è¡¨ï¼ŒWä¸åœ¨è¯è¡¨ä¸­ï¼Œå°†Wæœ€å·¦è¾¹ä¸€ä¸ªå­—å»æ‰ï¼Œå¾—åˆ°W=â€å­¦è¯¾ç¨‹æœ‰â€ï¼›<br>ï¼ˆ8ï¼‰æŸ¥è¯è¡¨ï¼ŒWä¸åœ¨è¯è¡¨ä¸­ï¼Œå°†Wæœ€å·¦è¾¹ä¸€ä¸ªå­—å»æ‰ï¼Œå¾—åˆ°W=â€è¯¾ç¨‹æœ‰â€ï¼›<br>ï¼ˆ9ï¼‰æŸ¥è¯è¡¨ï¼ŒWä¸åœ¨è¯è¡¨ä¸­ï¼Œå°†Wæœ€å·¦è¾¹ä¸€ä¸ªå­—å»æ‰ï¼Œå¾—åˆ°W=â€ç¨‹æœ‰â€ï¼›<br>ï¼ˆ10ï¼‰æŸ¥è¯è¡¨ï¼ŒWä¸åœ¨è¯è¡¨ä¸­ï¼Œå°†Wæœ€å·¦è¾¹ä¸€ä¸ªå­—å»æ‰ï¼Œå¾—åˆ°W=â€æœ‰â€ï¼Œè¿™Wæ˜¯å•å­—ï¼Œå°†WåŠ å…¥åˆ°S2ä¸­ï¼ŒS2=â€œ /æœ‰ /æ„æ€â€ï¼Œå¹¶å°†Wä»S1ä¸­å»æ‰ï¼Œæ­¤æ—¶S1=â€è®¡ç®—è¯­è¨€å­¦è¯¾ç¨‹â€ï¼›<br>ï¼ˆ11ï¼‰S1ä¸ä¸ºç©ºï¼Œäºæ˜¯ä»S1å·¦è¾¹å–å‡ºå€™é€‰å­ä¸²W=â€è¯­è¨€å­¦è¯¾ç¨‹â€ï¼›<br>ï¼ˆ12ï¼‰æŸ¥è¯è¡¨ï¼ŒWä¸åœ¨è¯è¡¨ä¸­ï¼Œå°†Wæœ€å·¦è¾¹ä¸€ä¸ªå­—å»æ‰ï¼Œå¾—åˆ°W=â€è¨€å­¦è¯¾ç¨‹â€ï¼›<br>ï¼ˆ13ï¼‰æŸ¥è¯è¡¨ï¼ŒWä¸åœ¨è¯è¡¨ä¸­ï¼Œå°†Wæœ€å·¦è¾¹ä¸€ä¸ªå­—å»æ‰ï¼Œå¾—åˆ°W=â€å­¦è¯¾ç¨‹â€ï¼›<br>ï¼ˆ14ï¼‰æŸ¥è¯è¡¨ï¼ŒWä¸åœ¨è¯è¡¨ä¸­ï¼Œå°†Wæœ€å·¦è¾¹ä¸€ä¸ªå­—å»æ‰ï¼Œå¾—åˆ°W=â€è¯¾ç¨‹â€ï¼›<br>ï¼ˆ15ï¼‰æŸ¥è¯è¡¨ï¼Œâ€œæ„æ€â€åœ¨è¯è¡¨ä¸­ï¼Œå°†WåŠ å…¥åˆ°S2ä¸­ï¼ŒS2=â€œ è¯¾ç¨‹/ æœ‰/ æ„æ€/â€ï¼Œå¹¶å°†Wä»S1ä¸­å»æ‰ï¼Œæ­¤æ—¶S1=â€è®¡ç®—è¯­è¨€å­¦â€ï¼›<br>ï¼ˆ16ï¼‰S1ä¸ä¸ºç©ºï¼Œäºæ˜¯ä»S1å·¦è¾¹å–å‡ºå€™é€‰å­ä¸²W=â€è®¡ç®—è¯­è¨€å­¦â€ï¼›<br>ï¼ˆ17ï¼‰æŸ¥è¯è¡¨ï¼Œâ€œè®¡ç®—è¯­è¨€å­¦â€åœ¨è¯è¡¨ä¸­ï¼Œå°†WåŠ å…¥åˆ°S2ä¸­ï¼ŒS2=â€œè®¡ç®—è¯­è¨€å­¦/ è¯¾ç¨‹/ æœ‰/ æ„æ€/â€ï¼Œå¹¶å°†Wä»S1ä¸­å»æ‰ï¼Œæ­¤æ—¶S1=â€â€ï¼›<br>ï¼ˆ18ï¼‰S1ä¸ºç©ºï¼Œè¾“å‡ºS2ä½œä¸ºåˆ†è¯ç»“æœï¼Œåˆ†è¯è¿‡ç¨‹ç»“æŸã€‚</p><pre><code class="lang-python">class BMM(object):    def __init__(self,                 dict_path=&#39;./dict.txt&#39;,                 max_word_length=5,                 split_mark=&#39;/&#39;):        self.dict = self.load_dict(_get_abs_path(dict_path))        self.max_word_length = max_word_length        self.split_mark = split_mark    def load_dict(self, path):        word_dict = []        with open(path, &#39;r&#39;, encoding=&#39;utf-8&#39;) as fr:            for line in fr:                word = line.strip().split(&#39; &#39;)[0]                word_dict.append(word)        return word_dict    def seg(self, line):        &quot;&quot;&quot;        seg the line into word list        &quot;&quot;&quot;        word_list = []        s1 = line[-self.max_word_length:]        while len(s1):            if s1 in self.dict or len(s1) == 1:                word_list.append(s1)                s1 = line[:len(line)-len(&#39;&#39;.join(word_list))]            else:                s1 = s1[1:]        return self.split_mark.join(word_list[::-1])</code></pre><h3 id="åŸºäºn-gramè¯­è¨€æ¨¡å‹çš„åˆ†è¯æ–¹æ³•"><a href="#åŸºäºn-gramè¯­è¨€æ¨¡å‹çš„åˆ†è¯æ–¹æ³•" class="headerlink" title="åŸºäºn-gramè¯­è¨€æ¨¡å‹çš„åˆ†è¯æ–¹æ³•"></a>åŸºäºn-gramè¯­è¨€æ¨¡å‹çš„åˆ†è¯æ–¹æ³•</h3><p>å‡è®¾$S$è¡¨ç¤ºä¸€ä¸ªæœ‰æ„ä¹‰çš„å¥å­ï¼Œç”±ä¸€è¿ä¸²ç‰¹å®šé¡ºåºæ’åˆ—çš„è¯$w_{1}, w_{2},â€¦., w_{n}$ç»„æˆï¼Œåˆ™æ­¤å¥å­æˆç«‹çš„æ¦‚ç‡ä¸º</p><script type="math/tex; mode=display">P(S)=P\left(w_{1}\right) P\left(w_{2} | w_{1}\right) P\left(w_{3} | w_{1}, w_{2}\right) \cdots P\left(w_{n} | w_{1}, w_{2}, \dots, w_{n-1}\right)</script><p>$P(S)$ç§°ä¸ºè¯­è¨€æ¨¡å‹ï¼Œ<strong>å°±æ˜¯å»ºç«‹äº†ä¸€ä¸ªåŸºäºç»Ÿè®¡çš„æ¨¡å‹å»è®¡ç®—ä¸€ä¸ªåºåˆ—$S$çš„å¯èƒ½æ€§</strong>ã€‚ </p><p><strong>N-gramå°±æ˜¯è¯­è¨€æ¨¡å‹ã€‚</strong>å¯¹äºå‰é¢æåˆ°çš„è¯­è¨€æ¨¡å‹ä»è®¡ç®—ä¸Šæ¥çœ‹ï¼Œåºåˆ—çš„å‰ä¸¤ä¸ªè¯çš„æ¡ä»¶æ¦‚ç‡ <img src="https://www.zhihu.com/equation?tex=P%28w_%7B1%7D%29%2CP%28w_%7B2%7D%7Cw_%7B1%7D%29" alt="[å…¬å¼]"> ä¸éš¾è®¡ç®—ï¼Œä½†æ˜¯ï¼Œè¶Šåˆ°åé¢çš„å•è¯å¯èƒ½æ€§è¶Šå¤šï¼Œæ— æ³•ä¼°ç®—ã€‚å› æ­¤ï¼Œå¼•å…¥é©¬å°”å¯å¤«å‡è®¾ï¼šä»»æ„ä¸€ä¸ªè¯å‡ºç°çš„æ¦‚ç‡åªå’Œå®ƒå‰é¢çš„å‡ ä¸ªè¯æœ‰å…³ï¼Œäºæ˜¯ <img src="https://www.zhihu.com/equation?tex=P%28S%29%3DP%28w_%7B1%7D%29P%28w_%7B2%7D%7Cw_%7B1%7D%29P%28w_%7B3%7D%7Cw_%7B2%7D%29%5Ccdot%5Ccdot%5Ccdot+P%28w_%7Bn%7D%7Cw_%7Bn-1%7D%29" alt="[å…¬å¼]"> ï¼Œè¿™å°±æ˜¯N-gramæ¨¡å‹ä¸­çš„äºŒå…ƒæ¨¡å‹(bigram)ã€‚åŒç†ï¼Œå¯å¾—åˆ°ä¸€å…ƒæ¨¡å‹(unigram)ã€ä¸‰å…ƒæ¨¡å‹(trigram)çš„å®šä¹‰ã€‚</p><p>æ±‚è§£æ¦‚ç‡ï¼š</p><h4 id="P-left-w-i-w-i-1-right-frac-P-left-w-i-1-w-i-right-P-left-w-i-1-right"><a href="#P-left-w-i-w-i-1-right-frac-P-left-w-i-1-w-i-right-P-left-w-i-1-right" class="headerlink" title="$P\left(w_{i} | w_{i-1}\right)=\frac{P\left(w_{i-1}, w_{i}\right)}{P\left(w_{i-1}\right)}$"></a>$P\left(w_{i} | w_{i-1}\right)=\frac{P\left(w_{i-1}, w_{i}\right)}{P\left(w_{i-1}\right)}$</h4><p>å½“è®­ç»ƒé›†è¯­æ–™åº“è¶³å¤Ÿå¤§ï¼Œé€šè¿‡å…¶ç›¸åº”çš„è¯å’Œè¯å¯¹çš„é¢‘æ•°ï¼Œç›¸å¯¹é¢‘åº¦å°±çº¦ç­‰äºæ¦‚ç‡ã€‚æ‰€ä»¥<strong>BI-gram</strong>åˆ†è¯æ—¶ï¼Œæœ‰ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>é¦–å…ˆè¦å‡†å¤‡ä¸€ä¸ªè¶³å¤Ÿå¤§è¯­æ–™åº“ä½œä¸ºè®­ç»ƒé›†ï¼Œå¯¹æ­¤è¯­æ–™åº“æ„é€ å‡º<strong>è¯é¢‘ç»Ÿè®¡å­—å…¸</strong>å’Œ<strong>æ¯ä¸ªè¯ä¹‹åçš„è¯é¢‘åº¦å­—å…¸</strong></li><li>è¦åˆ†è¯çš„è¯­å¥é¦–å…ˆæ‰¾å‡ºæ‰€æœ‰å¯èƒ½çš„å¤‡é€‰åˆ†è¯ç»“æœï¼Œæ ¹æ®<strong>è¯é¢‘ç»Ÿè®¡å­—å…¸</strong>ä¸­å‡ºç°çš„é”®é€’å½’å¯»æ‰¾ã€‚</li><li>å¯¹æ¯ä¸ªåˆ†è¯ç»“æœï¼Œè®¡ç®—å…¶ç›¸åº”çš„æ¦‚ç‡$P$ï¼Œè¾“å‡ºæœ€å¤§çš„å°±ä¸ºåˆ†è¯ç»“æœã€‚è€Œæ€ä¹ˆè®¡ç®—$P$å¯è§ä¸‹é¢çš„ä»£ç </li></ol><pre><code class="lang-python">def _get_prob(self, result):        &quot;&quot;&quot;        è®¡ç®—æ¯ç§æƒ…å†µçš„æ¦‚ç‡åˆ†æ•°        &quot;&quot;&quot;        p = 1.0        for index in range(len(result)):            if index == 0:                if result[index] in self.word_count:                    # ç¬¬ä¸€é¡¹aåœ¨è¯é¢‘è¡¨ä¸­ï¼Œp = (count(a) + 1) / count(all)                    p *= ((self.word_count[result[index]] + 1) / self.length)                else:                    # è‹¥ä¸åœ¨åˆ™ p = 1 / count(all)                    p *= (1 / self.length)            else:                if result[index - 1] in self.word2_dict and \                        result[index] in self.word2_dict[result[index - 1]]:                    # è‹¥å‰ä¸€é¡¹aå­˜åœ¨äºgramè¡¨ï¼Œä¸”ä¸‹ä¸€é¡¹bå­˜åœ¨äºå®ƒå¯¹åº”çš„valueä¸­                    # p = (count(b|a) + 1) / count(|a)                    p *= ((self.word2_dict[result[index - 1]][result[index]] + 1) /                          self.word_next_count[result[index - 1]])                elif result[index - 1] in self.word2_dict:                    # è‹¥å‰ä¸€é¡¹aå­˜åœ¨äºgramè¡¨ï¼Œä½†ä¸‹ä¸€é¡¹bä¸å­˜åœ¨äºå®ƒå¯¹åº”çš„valueä¸­                    # p = 1 / count(|a)                    p *= (1 / self.word_next_count[result[index - 1]])                else:                    p = p * pow(0.1, 10)        return p</code></pre><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul><li>æ¯”èµ›<strong>SIGHAN</strong><a href="http://sighan.cs.uchicago.edu/bakeoff2005/" target="_blank" rel="noopener">å®˜ç½‘</a></li><li><a href="http://www.52nlp.cn/maximum-matching-method-of-chinese-word-segmentation" target="_blank" rel="noopener">ä¸­æ–‡åˆ†è¯å…¥é—¨ä¹‹æœ€å¤§åŒ¹é…æ³•</a></li><li></li></ul>]]></content>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> nlp </tag>
            
            <tag> åˆ†è¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½¿ç”¨logstashåŒæ­¥Elasticsearchå’Œmysql</title>
      <link href="/2019/06/25/logstash/"/>
      <url>/2019/06/25/logstash/</url>
      <content type="html"><![CDATA[<h2 id="åŒæ­¥Mysqlæ•°æ®åº“åˆ°Elasticsearchä¸­"><a href="#åŒæ­¥Mysqlæ•°æ®åº“åˆ°Elasticsearchä¸­" class="headerlink" title="åŒæ­¥Mysqlæ•°æ®åº“åˆ°Elasticsearchä¸­"></a>åŒæ­¥Mysqlæ•°æ®åº“åˆ°Elasticsearchä¸­</h2><h3 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h3><ul><li>åœ¨<a href="https://www.elastic.co/cn/downloads/logstash" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹è½½logstashå¯¹åº”çš„tar.gzå‹ç¼©æ–‡ä»¶ï¼Œä½¿ç”¨<code>tar -xzvf</code>è¿›è¡Œè§£å‹</li><li>è§£å‹ä¹‹åè¿›å…¥æ–‡ä»¶å¤¹ï¼Œå®‰è£…æ’ä»¶<code>logstash-input-jdbc</code></li></ul><pre><code class="lang-bash">./bin/logstash-plugin install logstash-input-jdbc</code></pre><ul><li>å‡†å¤‡å¯¹åº”çš„<code>mysql-connector-java.jar</code>ï¼Œå¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½</li></ul><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>åˆ›å»ºé…ç½®æ–‡ä»¶<code>logstash.conf</code>å¹¶åœ¨é‡Œé¢å†™å…¥é…ç½®</p><pre><code class="lang-conf">input {        jdbc {                jdbc_driver_library =&gt; &quot;/home/mysql-connector-java-8.0.16.jar&quot;                jdbc_driver_class =&gt; &quot;com.mysql.jdbc.Driver&quot;                jdbc_connection_string =&gt; &quot;jdbc:mysql://127.0.0.1:3306/test&quot;                jdbc_user =&gt; &quot;root&quot;                jdbc_password =&gt; &quot;123&quot;                jdbc_paging_enabled =&gt; &quot;true&quot;                jdbc_page_size =&gt; &quot;50000&quot;                use_column_value =&gt; true                tracking_column =&gt; &quot;id&quot;  # è¿½è¸ªä¸»é”®id                tracking_column_type =&gt; numeric                statement =&gt; &quot;SELECT id, name, address FROM employee WHERE id &gt; :sql_last_value&quot;  #sql_last_valueä¸ºä¸Šæ¬¡æœ€åidï¼Œä»¥å…æ’å…¥é‡å¤                schedule =&gt; &quot;* * * * *&quot;        }}filter {        json{                source =&gt; &quot;message&quot;                remove_field =&gt; [&quot;message&quot;]        }}output {        stdout {                codec =&gt; rubydebug        }        elasticsearch {                hosts =&gt; &quot;127.0.0.1:9200&quot;                index =&gt; &quot;logstash_test&quot;  # è¦å†™å…¥çš„index                document_id =&gt; &quot;%{id}&quot;        }}</code></pre><h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><pre><code class="lang-bash">./bin/logstash -f ./logstash.conf</code></pre><p>å¯åŠ¨logstashåå°†ä¼šæ¯éš”ä¸€åˆ†é’Ÿè¿½è¸ªmysqlä¸­æ•°æ®ï¼ŒåŒæ­¥åˆ°elasticsearchä¹‹ä¸­</p>]]></content>
      
      
        <tags>
            
            <tag> elasticsearch logstash </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>redis</title>
      <link href="/2019/06/10/redis/"/>
      <url>/2019/06/10/redis/</url>
      <content type="html"><![CDATA[<h1 id="Redisæ•°æ®åº“å­¦ä¹ "><a href="#Redisæ•°æ®åº“å­¦ä¹ " class="headerlink" title="Redisæ•°æ®åº“å­¦ä¹ "></a>Redisæ•°æ®åº“å­¦ä¹ </h1><p>Redis æ˜¯å®Œå…¨å¼€æºå…è´¹çš„ï¼Œéµå®ˆBSDåè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„key-valueæ•°æ®åº“ã€‚</p><p>Redis ä¸å…¶ä»– key - value ç¼“å­˜äº§å“æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š</p><ul><li>Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚</li><li>Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„key-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚</li><li>Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚</li></ul><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><pre><code class="lang-bash">sudo apt-get install redis-server</code></pre><h3 id="åå°å¯åŠ¨æœåŠ¡"><a href="#åå°å¯åŠ¨æœåŠ¡" class="headerlink" title="åå°å¯åŠ¨æœåŠ¡"></a>åå°å¯åŠ¨æœåŠ¡</h3><pre><code class="lang-bash"># é»˜è®¤å¯åŠ¨redis-server &amp;# ä»¥é…ç½®æ–‡ä»¶å¯åŠ¨</code></pre><pre><code class="lang-bash">(venv) root@5fb46468cb96:~/workspace# redis-cli127.0.0.1:6379&gt; set foo barOK127.0.0.1:6379&gt; get foo&quot;bar&quot;127.0.0.1:6379&gt; del foo   # åˆ é™¤æ­¤é”®å¯¹</code></pre><h3 id="Rediså¯¹é”®æ“ä½œ"><a href="#Rediså¯¹é”®æ“ä½œ" class="headerlink" title="Rediså¯¹é”®æ“ä½œ"></a>Rediså¯¹é”®æ“ä½œ</h3><div class="table-container"><table><thead><tr><th><strong>å‘½ä»¤</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td><em>DEL key</em></td><td>è¯¥å‘½ä»¤ç”¨äºåœ¨ key å­˜åœ¨æ—¶åˆ é™¤ keyã€‚</td></tr><tr><td><em>DUMP key</em></td><td>åºåˆ—åŒ–ç»™å®š key ï¼Œå¹¶è¿”å›è¢«åºåˆ—åŒ–çš„å€¼ã€‚</td></tr><tr><td><em>EXISTS key</em></td><td>æ£€æŸ¥ç»™å®š key æ˜¯å¦å­˜åœ¨ã€‚</td></tr><tr><td><em>EXPIRE key <seconds></seconds></em></td><td>ä¸ºç»™å®š key è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä»¥ç§’è®¡ã€‚</td></tr><tr><td><em>EXPIRE key <timestamp></timestamp></em></td><td>EXPIREAT çš„ä½œç”¨å’Œ EXPIRE ç±»ä¼¼ï¼Œéƒ½ç”¨äºä¸º key è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ ä¸åŒåœ¨äº EXPIREAT å‘½ä»¤æ¥å—çš„æ—¶é—´å‚æ•°æ˜¯ UNIX æ—¶é—´æˆ³(unix timestamp)ã€‚</td></tr><tr><td><em>PEXPIRE key <milliseconds></milliseconds></em></td><td>è®¾ç½® key çš„è¿‡æœŸæ—¶é—´ä»¥æ¯«ç§’è®¡ã€‚</td></tr><tr><td><em>KEYS pattern</em></td><td>æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼( pattern)çš„ key ã€‚</td></tr><tr><td><em>MOVE key <db></db></em></td><td>å°†å½“å‰æ•°æ®åº“çš„ key ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“ db å½“ä¸­ã€‚</td></tr><tr><td><em>PERSIST key</em></td><td>ç§»é™¤ key çš„è¿‡æœŸæ—¶é—´ï¼Œkey å°†æŒä¹…ä¿æŒã€‚</td></tr><tr><td><em>PTTL key</em></td><td>ä»¥æ¯«ç§’ä¸ºå•ä½è¿”å› key çš„å‰©ä½™çš„è¿‡æœŸæ—¶é—´ã€‚</td></tr><tr><td><em>TTL key</em></td><td>ä»¥ç§’ä¸ºå•ä½ï¼Œè¿”å›ç»™å®š key çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(TTL, time to live)ã€‚</td></tr><tr><td><em>RANDOMKEY</em></td><td>ä»å½“å‰æ•°æ®åº“ä¸­éšæœºè¿”å›ä¸€ä¸ª key ã€‚</td></tr><tr><td><em>RENAME key newkey</em></td><td>ä¿®æ”¹ key çš„åç§°</td></tr><tr><td><em>RENAMENX key newkey</em></td><td>ä»…å½“ newkey ä¸å­˜åœ¨æ—¶ï¼Œå°† key æ”¹åä¸º newkey ã€‚</td></tr><tr><td><em>TYPE key</em></td><td>è¿”å› key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹ã€‚</td></tr></tbody></table></div><h3 id="Redis-Hash"><a href="#Redis-Hash" class="headerlink" title="Redis Hash"></a>Redis Hash</h3><blockquote><p>Redis Hash æ˜¯ä¸€ä¸ªstringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ï¼Œ ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡</p></blockquote><pre><code class="lang-bash">127.0.0.1:6379&gt; HMSET coos name &quot;coos redis&quot; description &quot;coos des&quot; likes 20 visitors 2000OK127.0.0.1:6379&gt; HGETALL coos  # è·å–æ‰€æœ‰é”®å€¼å¯¹1) &quot;name&quot;2) &quot;coos redis&quot;3) &quot;description&quot;4) &quot;coos des&quot;5) &quot;likes&quot;6) &quot;20&quot;7) &quot;visitors&quot;8) &quot;2000&quot;127.0.0.1:6379&gt; HDEL coos likes  # åˆ é™¤likeså­—æ®µ(integer) 1127.0.0.1:6379&gt; HGETALL coos1) &quot;name&quot;2) &quot;coos redis&quot;3) &quot;description&quot;4) &quot;coos des&quot;5) &quot;visitors&quot;6) &quot;2000&quot;127.0.0.1:6379&gt; HGET coos visitors  # è·å–visitorså­—æ®µ&quot;2000&quot;</code></pre><h3 id="Redis-åˆ—è¡¨-List"><a href="#Redis-åˆ—è¡¨-List" class="headerlink" title="Redis åˆ—è¡¨(List)"></a>Redis åˆ—è¡¨(List)</h3><p>Redisåˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰</p><p>ä¸€ä¸ªåˆ—è¡¨æœ€å¤šå¯ä»¥åŒ…å« 232 - 1 ä¸ªå…ƒç´  (4294967295, æ¯ä¸ªåˆ—è¡¨è¶…è¿‡40äº¿ä¸ªå…ƒç´ )ã€‚</p><pre><code class="lang-bash">127.0.0.1:6379&gt; LPUSH run redis(integer) 1127.0.0.1:6379&gt; LPUSH run mongodb(integer) 2127.0.0.1:6379&gt; LPUSH run mysql(integer) 3127.0.0.1:6379&gt; LRANGE run 0 101) &quot;mysql&quot;2) &quot;mongodb&quot;3) &quot;redis&quot;127.0.0.1:6379&gt; LINDEX run 2&quot;redis&quot;</code></pre><h3 id="Redisé›†åˆ-Set"><a href="#Redisé›†åˆ-Set" class="headerlink" title="Redisé›†åˆ(Set)"></a>Redisé›†åˆ(Set)</h3><p>Redis çš„ Set æ˜¯ String ç±»å‹çš„æ— åºé›†åˆã€‚é›†åˆæˆå‘˜æ˜¯å”¯ä¸€çš„ï¼Œè¿™å°±æ„å‘³ç€é›†åˆä¸­ä¸èƒ½å‡ºç°é‡å¤çš„æ•°æ®ã€‚</p><p>Redis ä¸­é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚</p><p>é›†åˆä¸­æœ€å¤§çš„æˆå‘˜æ•°ä¸º 232 - 1 (4294967295, æ¯ä¸ªé›†åˆå¯å­˜å‚¨40å¤šäº¿ä¸ªæˆå‘˜)ã€‚</p><pre><code class="lang-bash">redis 127.0.0.1:6379&gt; SADD runoobkey redis(integer) 1redis 127.0.0.1:6379&gt; SADD runoobkey mongodb(integer) 1redis 127.0.0.1:6379&gt; SADD runoobkey mysql(integer) 1redis 127.0.0.1:6379&gt; SADD runoobkey mysql(integer) 0redis 127.0.0.1:6379&gt; SMEMBERS runoobkey1) &quot;mysql&quot;2) &quot;mongodb&quot;3) &quot;redis&quot;</code></pre><h3 id="Redisæœ‰åºé›†åˆ-Sorted-Set"><a href="#Redisæœ‰åºé›†åˆ-Sorted-Set" class="headerlink" title="Redisæœ‰åºé›†åˆ(Sorted Set)"></a>Redisæœ‰åºé›†åˆ(Sorted Set)</h3><p>Redis æœ‰åºé›†åˆå’Œé›†åˆä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚</p><p>ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚</p><p>æœ‰åºé›†åˆçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤ã€‚</p><p>é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚ é›†åˆä¸­æœ€å¤§çš„æˆå‘˜æ•°ä¸º 232 - 1 (4294967295, æ¯ä¸ªé›†åˆå¯å­˜å‚¨40å¤šäº¿ä¸ªæˆå‘˜)ã€‚</p><pre><code class="lang-bash">redis 127.0.0.1:6379&gt; ZADD runoobkey 1 redis(integer) 1redis 127.0.0.1:6379&gt; ZADD runoobkey 2 mongodb(integer) 1redis 127.0.0.1:6379&gt; ZADD runoobkey 3 mysql(integer) 1redis 127.0.0.1:6379&gt; ZADD runoobkey 3 mysql(integer) 0redis 127.0.0.1:6379&gt; ZADD runoobkey 4 mysql(integer) 0redis 127.0.0.1:6379&gt; ZRANGE runoobkey 0 10 WITHSCORES1) &quot;redis&quot;2) &quot;1&quot;3) &quot;mongodb&quot;4) &quot;2&quot;5) &quot;mysql&quot;6) &quot;4&quot;</code></pre><ul><li>INFO æŸ¥çœ‹RedisæœåŠ¡å™¨ä¿¡æ¯</li></ul><h3 id="Redisæ•°æ®å¤‡ä»½ä¸æ¢å¤"><a href="#Redisæ•°æ®å¤‡ä»½ä¸æ¢å¤" class="headerlink" title="Redisæ•°æ®å¤‡ä»½ä¸æ¢å¤"></a>Redisæ•°æ®å¤‡ä»½ä¸æ¢å¤</h3><p><strong>å¤‡ä»½</strong></p><pre><code class="lang-bash">redis 127.0.0.1:6379&gt; SAVE OK</code></pre><p>è¯¥å‘½ä»¤å°†åœ¨ redis å®‰è£…ç›®å½•ä¸­åˆ›å»ºdump.rdbæ–‡ä»¶ã€‚</p><p><strong>æ¢å¤</strong></p><p>å¦‚æœéœ€è¦æ¢å¤æ•°æ®ï¼Œåªéœ€å°†å¤‡ä»½æ–‡ä»¶ (dump.rdb) ç§»åŠ¨åˆ° redis å®‰è£…ç›®å½•å¹¶å¯åŠ¨æœåŠ¡å³å¯ã€‚è·å– redis ç›®å½•å¯ä»¥ä½¿ç”¨ <strong>CONFIG</strong> å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="lang-bash">127.0.0.1:6379&gt; CONFIG GET dir1) &quot;dir&quot;2) &quot;/root/workspace&quot;</code></pre><p>å‚è€ƒï¼š</p><p><a href="https://www.runoob.com/redis/redis-tutorial.html" target="_blank" rel="noopener">Redis æ•™ç¨‹</a></p>]]></content>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>neo4j</title>
      <link href="/2019/06/05/neo4j/"/>
      <url>/2019/06/05/neo4j/</url>
      <content type="html"><![CDATA[<h2 id="Neo4jå­¦ä¹ "><a href="#Neo4jå­¦ä¹ " class="headerlink" title="Neo4jå­¦ä¹ "></a>Neo4jå­¦ä¹ </h2><blockquote><p>Neo4jæ˜¯ä¸€ä¸ªä¸–ç•Œé¢†å…ˆçš„å¼€æºå›¾å½¢æ•°æ®åº“ã€‚ å®ƒæ˜¯ç”±NeoæŠ€æœ¯ä½¿ç”¨Javaè¯­è¨€å®Œå…¨å¼€å‘çš„ã€‚å›¾å½¢æ•°æ®åº“æ˜¯ä»¥å›¾å½¢ç»“æ„çš„å½¢å¼å­˜å‚¨æ•°æ®çš„æ•°æ®åº“ã€‚ å®ƒä»¥èŠ‚ç‚¹ï¼Œå…³ç³»å’Œå±æ€§çš„å½¢å¼å­˜å‚¨åº”ç”¨ç¨‹åºçš„æ•°æ®ã€‚ æ­£å¦‚RDBMSä»¥è¡¨çš„â€œè¡Œï¼Œåˆ—â€çš„å½¢å¼å­˜å‚¨æ•°æ®ï¼ŒGDBMSä»¥â€œå›¾å½¢â€çš„å½¢å¼å­˜å‚¨æ•°æ®ã€‚</p></blockquote><p>å›¾å½¢æ•°æ®åº“æ•°æ®æ¨¡å‹çš„ä¸»è¦æ„å»ºå—æ˜¯ï¼š</p><ul><li>èŠ‚ç‚¹</li><li>å…³ç³»</li><li>å±æ€§</li></ul><h3 id="CQLè¯­å¥"><a href="#CQLè¯­å¥" class="headerlink" title="CQLè¯­å¥"></a>CQLè¯­å¥</h3><div class="table-container"><table><thead><tr><th>S.NO</th><th>CQLå‘½ä»¤/æ¡</th><th>ç”¨æ³•</th></tr></thead><tbody><tr><td>1.</td><td>Createåˆ›å»º</td><td>åˆ›å»ºèŠ‚ç‚¹ï¼Œå…³ç³»å’Œå±æ€§</td></tr><tr><td>2.</td><td>MatchåŒ¹é…</td><td>æ£€ç´¢æœ‰å…³èŠ‚ç‚¹ï¼Œå…³ç³»å’Œå±æ€§æ•°æ®</td></tr><tr><td>3.</td><td>RETURNè¿”å›</td><td>è¿”å›æŸ¥è¯¢ç»“æœ</td></tr><tr><td>4.</td><td>WHEREå“ªé‡Œ</td><td>æä¾›æ¡ä»¶è¿‡æ»¤æ£€ç´¢æ•°æ®</td></tr><tr><td>5.</td><td>DELETEåˆ é™¤</td><td>åˆ é™¤èŠ‚ç‚¹å’Œå…³ç³»</td></tr><tr><td>6.</td><td>REMOVEç§»é™¤</td><td>åˆ é™¤èŠ‚ç‚¹å’Œå…³ç³»å±æ€§</td></tr><tr><td>7.</td><td>ORDER BYä»¥..æ’åº</td><td>æ’åºæ£€ç´¢æ•°æ®</td></tr><tr><td>8.</td><td>SETç»„</td><td>æ·»åŠ æˆ–æ›´æ–°æ ‡ç­¾</td></tr></tbody></table></div><h3 id="CQLå‡½æ•°"><a href="#CQLå‡½æ•°" class="headerlink" title="CQLå‡½æ•°"></a>CQLå‡½æ•°</h3><div class="table-container"><table><thead><tr><th>S.NO</th><th>å®šåˆ¶åˆ—è¡¨åŠŸèƒ½</th><th>ç”¨æ³•</th></tr></thead><tbody><tr><td>1.</td><td>Stringå­—ç¬¦ä¸²</td><td>å®ƒä»¬ç”¨äºä½¿ç”¨Stringå­—é¢é‡</td></tr><tr><td>2.</td><td>Aggregationèšåˆ</td><td>å®ƒä»¬ç”¨äºå¯¹CQLæŸ¥è¯¢ç»“æœæ‰§è¡Œä¸€äº›èšåˆæ“ä½œ</td></tr><tr><td>3.</td><td>RelationShipå…³ç³»</td><td>å®ƒä»¬ç”¨äºè·å–å…³ç³»çš„ç»†èŠ‚ã€‚</td></tr></tbody></table></div><h3 id="åˆ›å»ºç»“ç‚¹"><a href="#åˆ›å»ºç»“ç‚¹" class="headerlink" title="åˆ›å»ºç»“ç‚¹"></a>åˆ›å»ºç»“ç‚¹</h3><pre><code class="lang-cypher">$ CREATE (   &lt;node-name&gt;:&lt;label-name&gt;   {           &lt;Property1-name&gt;:&lt;Property1-Value&gt;      ........      &lt;Propertyn-name&gt;:&lt;Propertyn-Value&gt;   })# $CREATE (emp:Employee{id:123, name:&quot;Smith&quot;, sal:35000, deptno:10})</code></pre><h3 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h3><pre><code class="lang-cypher">$ MATCH (&lt;node-name&gt;:&lt;label-name&gt;) RETURN &lt;node-name&gt;.att1, &lt;node-name&gt;.att2,.......</code></pre><h3 id="åˆ›å»ºå…³ç³»"><a href="#åˆ›å»ºå…³ç³»" class="headerlink" title="åˆ›å»ºå…³ç³»"></a>åˆ›å»ºå…³ç³»</h3><pre><code class="lang-cypher">$ CREATE (p1:Profile1)-[r1:LIKES]-&gt;(p2:Profile2)$ CREATE     (&lt;node1-label-name&gt;:&lt;node1-name&gt;)-   [&lt;relationship-label-name&gt;:&lt;relationship-name&gt;]-&gt;   (&lt;node1-label-name&gt;:&lt;node1-name&gt;)RETURN &lt;relationship-label-name&gt;</code></pre><h3 id="æŸ¥è¯¢å…³ç³»"><a href="#æŸ¥è¯¢å…³ç³»" class="headerlink" title="æŸ¥è¯¢å…³ç³»"></a>æŸ¥è¯¢å…³ç³»</h3><pre><code class="lang-cypher">$ MATCH (node1)-[r:rname]-&gt;(node2) RETURN r$ MATCH (&lt;node1-label-name&gt;)-[&lt;relationship-label-name&gt;:&lt;relationship-name&gt;]-&gt;(&lt;node2-label-name&gt;)RETURN &lt;relationship-label-name&gt;</code></pre><h3 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h3><pre><code class="lang-cypher">$ MATCH (node_name:node_label) WHERE node_name.att1 = &#39;xxxx&#39; OR/AND ... RETURN ...</code></pre><h3 id="ä½¿ç”¨py2neoæ“ä½œneo4jæ•°æ®åº“"><a href="#ä½¿ç”¨py2neoæ“ä½œneo4jæ•°æ®åº“" class="headerlink" title="ä½¿ç”¨py2neoæ“ä½œneo4jæ•°æ®åº“"></a>ä½¿ç”¨py2neoæ“ä½œneo4jæ•°æ®åº“</h3><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><pre><code class="lang-bash">pip install py2neo</code></pre><h4 id="èŠ‚ç‚¹ä¸å…³ç³»"><a href="#èŠ‚ç‚¹ä¸å…³ç³»" class="headerlink" title="èŠ‚ç‚¹ä¸å…³ç³»"></a>èŠ‚ç‚¹ä¸å…³ç³»</h4><pre><code class="lang-python">from py2neo.data import Node, Relationshipa = Node(&#39;Person&#39;, name=&quot;Alice&quot;)b = Node(&quot;Person&quot;, name=&quot;Bob&quot;)ab = Relationship(a, &quot;KNOWS&quot;, b)ab###(Alice)-[:KNOWS {}]-&gt;(Bob)</code></pre><p>Node å’Œ Relationship éƒ½ç»§æ‰¿äº† PropertyDict ç±»ï¼Œå®ƒå¯ä»¥èµ‹å€¼å¾ˆå¤šå±æ€§ï¼Œç±»ä¼¼äºå­—å…¸çš„å½¢å¼ï¼Œä¾‹å¦‚å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼å¯¹ Node æˆ– Relationship è¿›è¡Œå±æ€§èµ‹å€¼ï¼Œæ¥ç€ä¸Šé¢çš„ä»£ç ï¼Œå®ä¾‹å¦‚ä¸‹:</p><pre><code class="lang-python">a[&#39;age&#39;] = 20b[&#39;age&#39;] = 21ab[&#39;time&#39;] = &#39;2017/08/31&#39;print(a, b, ab)###out(:Person {age: 20, name: &#39;Alice&#39;}) (:Person {age: 21, name: &#39;Bob&#39;}) (Alice)-[:KNOWS {time: &#39;2019/6/5&#39;}]-&gt;(Bob)</code></pre><p>ä½¿ç”¨<strong>update</strong>æ‰¹é‡å¯¹å±æ€§è¿›è¡Œæ›´æ–°</p><pre><code class="lang-python">data = {    &#39;name&#39;: &#39;Amy&#39;,    &#39;age&#39;: 21}a.update(data)print(a)###out(:Person {age: 21, name: &#39;Amy&#39;})</code></pre><h3 id="Subgraphå­å›¾"><a href="#Subgraphå­å›¾" class="headerlink" title="Subgraphå­å›¾"></a>Subgraphå­å›¾</h3><p>Subgraphï¼Œå­å›¾ï¼Œæ˜¯ Node å’Œ Relationship çš„é›†åˆï¼Œæœ€ç®€å•çš„æ„é€ å­å›¾çš„æ–¹å¼æ˜¯é€šè¿‡å…³ç³»è¿ç®—ç¬¦|ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="lang-python">s = a | b | abprint(s)###out&lt;py2neo.data.Subgraph at 0x7fe45c8b2470&gt;# ({(alice:Person {name:&quot;Alice&quot;}), (bob:Person {name:&quot;Bob&quot;})}, {(alice)-[:KNOWS]-&gt;(bob)})</code></pre><ul><li>åœ¨v4ç‰ˆæœ¬ï¼Œè¾“å‡ºs.nodesæ˜¯ä¸€ä¸ªSetViewå¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨<strong>listè½¬æ¢</strong>,å³å¯æ‰“å°å‡ºæ¥</li></ul><pre><code class="lang-python">print(list(s.nodes))###out[(:Person {name: &#39;Alice&#39;}), (:Person {name: &#39;Bob&#39;})]</code></pre><h3 id="Graph"><a href="#Graph" class="headerlink" title="Graph"></a>Graph</h3><p>åœ¨ database æ¨¡å—ä¸­åŒ…å«äº†å’Œ Neo4j æ•°æ®äº¤äº’çš„ APIï¼Œæœ€é‡è¦çš„å½“å± <strong>Graph</strong>ï¼Œå®ƒä»£è¡¨äº† Neo4j çš„å›¾æ•°æ®åº“ï¼ŒåŒæ—¶ Graph ä¹Ÿæä¾›äº†è®¸å¤šæ–¹æ³•æ¥æ“ä½œ Neo4j æ•°æ®åº“ï¼Œç›´æ¥è°ƒç”¨cyperè¯­å¥æ“ä½œneo4jã€‚</p><pre><code>from py2neo import Graphgraph = Graph(password=&quot;123456&quot;)# æ‰§è¡ŒæŸ¥è¯¢graph.run(&quot;MATCH (a:Person) RETURN a.name, a.born LIMIT 4&quot;)# åˆ›å»ºèŠ‚ç‚¹å…³ç³»node = Node(.....)graph.create(node)</code></pre><p>å‚è€ƒï¼š</p><ul><li><a href="https://py2neo.org/v4/" target="_blank" rel="noopener">The py2neo v4 Handbook</a></li><li><a href="https://blog.csdn.net/qq_19707521/article/details/80060675" target="_blank" rel="noopener">Neo4jæ“ä½œä¸py2neoç”¨æ³•</a></li></ul>]]></content>
      
      
        <tags>
            
            <tag> çŸ¥è¯†å›¾è°±ï¼Œneo4j </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ElasticSearch</title>
      <link href="/2019/05/29/ElasticSearch/"/>
      <url>/2019/05/29/ElasticSearch/</url>
      <content type="html"><![CDATA[<h2 id="ElasticSearchå…¥é—¨"><a href="#ElasticSearchå…¥é—¨" class="headerlink" title="ElasticSearchå…¥é—¨"></a>ElasticSearchå…¥é—¨</h2><blockquote><p><strong>ElasticSearch</strong>æ˜¯ä¸€ä¸ªå®æ—¶åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ã€‚å®ƒè®©ä½ ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦å¤„ç†å¤§æ•°æ®æˆä¸º å¯èƒ½ã€‚ å®ƒç”¨äºå…¨æ–‡æœç´¢ã€ç»“æ„åŒ–æœç´¢ã€åˆ†æä»¥åŠå°†è¿™ä¸‰è€…æ··åˆä½¿ç”¨ ã€‚Elasticsearchæ˜¯ä¸€ä¸ªåŸºäº<strong>Apache Lucene(TM)</strong>çš„å¼€æºæœç´¢å¼•æ“ã€‚æ— è®ºåœ¨å¼€æºè¿˜æ˜¯ä¸“æœ‰é¢†åŸŸï¼Œ Luceneå¯ä»¥è¢«è®¤ä¸ºæ˜¯è¿„ä»Šä¸ºæ­¢æœ€å…ˆè¿›ã€æ€§èƒ½æœ€å¥½çš„ã€åŠŸèƒ½æœ€å…¨çš„æœç´¢å¼•æ“åº“ã€‚    </p></blockquote><h3 id="å®‰è£…å¹¶è¿è¡ŒElasticSearch"><a href="#å®‰è£…å¹¶è¿è¡ŒElasticSearch" class="headerlink" title="å®‰è£…å¹¶è¿è¡ŒElasticSearch"></a>å®‰è£…å¹¶è¿è¡ŒElasticSearch</h3><ol><li><p>å®‰è£…Elasticsearché¦–å…ˆéœ€è¦å®‰è£…javaï¼Œå»å®˜ç½‘ä¸‹è½½1.8ç‰ˆæœ¬å³å¯ã€‚</p></li><li><p>åˆ°eså®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„Elasticsearch</p><pre><code class="lang-bash">curl -L -O http://download.elasticsearch.org/PATH/TO/VERSION.zip &lt;1&gt;unzip elasticsearch-$VERSION.zipcd elasticsearch-$VERSION</code></pre></li><li><p>æ–°ç‰ˆçš„ElasticSearchä¸æ¨èä½¿ç”¨rootç”¨æˆ·è¿è¡Œï¼Œæ‰€ä»¥å¦‚æœåœ¨dockerå†…è¿è¡Œçš„è¯ï¼Œéœ€è¦åˆ›å»ºæ–°ç”¨æˆ·</p><pre><code class="lang-bash">sudo adduser elasticsearchsu elasticsearch</code></pre></li><li><p>åˆ‡æ¢åˆ°æ–°ç”¨æˆ·ä¹‹åå¯åŠ¨ElasticSearch</p><pre><code class="lang-bash">./bin/elasticsearch</code></pre></li><li><p>æµ‹è¯•æˆåŠŸå¯åŠ¨</p><pre><code class="lang-bash">curl &#39;http://localhost:9200/?pretty&#39;</code></pre><p>è‹¥è¿”å›ä»¥ä¸‹ä¿¡æ¯åˆ™è¡¨ç¤ºElasticsearchæˆåŠŸå¯åŠ¨</p><pre><code class="lang-bash">{&quot;status&quot;: 200,&quot;name&quot;: &quot;Shrunken Bones&quot;,&quot;version&quot;: {&quot;number&quot;: &quot;1.4.0&quot;,&quot;lucene_version&quot;: &quot;4.10&quot;},&quot;tagline&quot;: &quot;You Know, for Search&quot;}</code></pre></li></ol><h3 id="åˆ›å»ºç´¢å¼•"><a href="#åˆ›å»ºç´¢å¼•" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h3><p><strong>Elasticsearch</strong>æ˜¯é¢å‘æ–‡æ¡£(document oriented)çš„ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥å­˜å‚¨æ•´ä¸ªå¯¹è±¡æˆ–æ–‡æ¡£ (document)ã€‚ç„¶è€Œå®ƒä¸ä»…ä»…æ˜¯å­˜å‚¨ï¼Œè¿˜ä¼šç´¢å¼•(index)æ¯ä¸ªæ–‡æ¡£çš„å†…å®¹ä½¿ä¹‹å¯ä»¥è¢«æœç´¢ã€‚åœ¨ Elasticsearchä¸­ï¼Œä½ å¯ä»¥å¯¹æ–‡æ¡£ï¼ˆè€Œéæˆè¡Œæˆåˆ—çš„æ•°æ®ï¼‰ è¿›è¡Œç´¢å¼•ã€æœç´¢ã€æ’åºã€è¿‡æ»¤ã€‚è¿™ ç§ç†è§£æ•°æ®çš„æ–¹å¼ä¸ä»¥å¾€å®Œå…¨ä¸åŒï¼Œè¿™ä¹Ÿæ˜¯Elasticsearchèƒ½å¤Ÿæ‰§è¡Œå¤æ‚çš„å…¨æ–‡æœç´¢çš„åŸå› ä¹‹ ä¸€ã€‚    å°†Esä¸­ä¿¡æ¯ä¸ä¼ ç»Ÿå…³ç³»æ•°æ®åº“æ¯”è¾ƒ</p><pre><code class="lang-bash">Relational DB -&gt; Databases -&gt; Tables -&gt; Rows -&gt; ColumnsElasticsearch -&gt; Indices -&gt; Types -&gt; Documents -&gt; Fields</code></pre><p>Elasticsearché›†ç¾¤å¯ä»¥åŒ…å«å¤šä¸ªç´¢å¼•(indices)ï¼ˆæ•°æ®åº“ï¼‰ ï¼Œæ¯ä¸€ä¸ªç´¢å¼•å¯ä»¥åŒ…å«å¤šä¸ªç±»å‹ (types)ï¼ˆè¡¨ï¼‰ ï¼Œæ¯ä¸€ä¸ªç±»å‹åŒ…å«å¤šä¸ªæ–‡æ¡£(documents)ï¼ˆè¡Œï¼‰ ï¼Œç„¶åæ¯ä¸ªæ–‡æ¡£åŒ…å«å¤šä¸ªå­—æ®µ (Fields)ï¼ˆåˆ—ï¼‰ ã€‚    </p><p>åœ¨bashä¸‹ä½¿ç”¨curlå‘½ä»¤åˆ›å»ºç´¢å¼•å¹¶æŒ‡å®š<strong>ä¸­æ–‡åˆ†è¯å™¨ik_smart</strong></p><pre><code class="lang-bash">curl -H&#39;Content-Type: application/json&#39; -XPUT &#39;localhost:9200/es_test&#39; -d &#39;{  &quot;mappings&quot;: {    &quot;posts&quot;: {      &quot;properties&quot;: {        &quot;title&quot;: {          &quot;type&quot;: &quot;text&quot;,          &quot;analyzer&quot;: &quot;ik_smart&quot;,          &quot;search_analyzer&quot;: &quot;ik_smart&quot;        },        &quot;desc&quot;: {          &quot;type&quot;: &quot;text&quot;,          &quot;analyzer&quot;: &quot;ik_smart&quot;,          &quot;search_analyzer&quot;: &quot;ik_smart&quot;        },        &quot;answers&quot;:{          &quot;type&quot;: &quot;text&quot;,          &quot;analyzer&quot;: &quot;ik_smart&quot;,          &quot;search_analyzer&quot;: &quot;ik_smart&quot;        }      }    }  }}&#39;</code></pre><p>è¿™æ ·å°±æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªç´¢å¼•<em>es_test</em>ï¼Œè€Œtypeä¸º<em>post</em>sã€‚</p><h3 id="pythonå¸¸è§„æ“ä½œElasticsearch"><a href="#pythonå¸¸è§„æ“ä½œElasticsearch" class="headerlink" title="pythonå¸¸è§„æ“ä½œElasticsearch"></a>pythonå¸¸è§„æ“ä½œElasticsearch</h3><h4 id="1-ä½¿ç”¨bulkæ‰¹é‡å¯¼å…¥æ•°æ®"><a href="#1-ä½¿ç”¨bulkæ‰¹é‡å¯¼å…¥æ•°æ®" class="headerlink" title="1. ä½¿ç”¨bulkæ‰¹é‡å¯¼å…¥æ•°æ®"></a>1. ä½¿ç”¨bulkæ‰¹é‡å¯¼å…¥æ•°æ®</h4><pre><code class="lang-python">from elasticsearch import Elasticsearchfrom elasticsearch.helpers import bulkes = Elasticsearch()actions = []# all_jsonæ˜¯è¦å¯¼å…¥çš„æ•°æ®for lidx, sample in enumerate(all_json):    action = {        &quot;_index&quot;: &quot;es_test&quot;,        &quot;_type&quot;: &quot;posts&quot;,        &quot;_source&quot;:{        &quot;title&quot;: sample[&#39;title&#39;],        &quot;desc&quot;: sample[&#39;desc&#39;]        &quot;answers&quot;: sample[&#39;content&#39;]        }    }    actions.append(action)    if lidx % 500 == 0:   # æ¯500ç»„å¯¼å…¥ä¸€æ¬¡        res, _ = bulk(es, actions, index=&quot;es_test&quot;, raise_on_error=True)        # print(res)        actions = []</code></pre><h4 id="2-æŸ¥è¯¢æ‰€æœ‰å†…å®¹æ˜¯å¦å¯¼å…¥"><a href="#2-æŸ¥è¯¢æ‰€æœ‰å†…å®¹æ˜¯å¦å¯¼å…¥" class="headerlink" title="2. æŸ¥è¯¢æ‰€æœ‰å†…å®¹æ˜¯å¦å¯¼å…¥"></a>2. æŸ¥è¯¢æ‰€æœ‰å†…å®¹æ˜¯å¦å¯¼å…¥</h4><pre><code class="lang-python">res = es.search(index=&quot;es_test&quot;, body={&quot;query&quot;: {&quot;match_all&quot;: {}}})print(&quot;Got %d Hits:&quot; % res[&#39;hits&#39;][&#39;total&#39;])####Got 7001 Hits:</code></pre><h4 id="3-å†™å…¥æ•°æ®å’Œè¯»å–æ•°æ®"><a href="#3-å†™å…¥æ•°æ®å’Œè¯»å–æ•°æ®" class="headerlink" title="3. å†™å…¥æ•°æ®å’Œè¯»å–æ•°æ®"></a>3. å†™å…¥æ•°æ®å’Œè¯»å–æ•°æ®</h4><p>å‘Elasticsearchå†™å…¥ä¸€æ¡æ•°æ®ï¼Œä¸æŒ‡å®šidï¼Œå³å¯éšæœºå¾—åˆ°idã€‚å½“ç´¢å¼•ä¸å­˜åœ¨æ—¶ä¼šæ ¹æ®docå­—æ®µè‡ªåŠ¨åˆ›å»ºç´¢å¼•</p><pre><code class="lang-python">from datetime import datetimefrom elasticsearch import Elasticsearches = Elasticsearch()doc = {    &#39;author&#39;: &#39;kimchy&#39;,    &#39;text&#39;: &#39;Elasticsearch: cool. bonsai cool.&#39;,    &#39;timestamp&#39;: datetime.now(),}# å½“ç´¢å¼•ä¸å­˜åœ¨æ—¶ä¼šæ ¹æ®docå­—æ®µres = es.index(index=&quot;test-index&quot;, doc_type=&#39;tweet&#39;, id=1, body=doc)print(res[&#39;result&#39;])### created</code></pre><p>è¯»å–åˆšæ‰åˆ›å»ºçš„æ•°æ®ï¼Œè¿”å›å½¢å¼åŒæ ·æ˜¯jsonæ ¼å¼</p><pre><code class="lang-python">res = es.get(index=&quot;test-index&quot;, doc_type=&#39;tweet&#39;, id=1)print(res[&#39;_source&#39;])###{&#39;author&#39;: &#39;kimchy&#39;, &#39;text&#39;: &#39;Elasticsearch: cool. bonsai cool.&#39;, &#39;timestamp&#39;: &#39;2019-04-04T06:33:37.442271&#39;}</code></pre><p>æ­¤æ—¶æŸ¥è¯¢è¿™ä¸ªindiceså°†å¾—åˆ°</p><pre><code class="lang-python"># æŸ¥è¯¢res = es.search(index=&quot;test-index&quot;, body={&quot;query&quot;: {&quot;match_all&quot;: {}}})print(&quot;Got %d Hits:&quot; % res[&#39;hits&#39;][&#39;total&#39;])### outputGot 1 Hits</code></pre><h4 id="4-æŸ¥è¯¢"><a href="#4-æŸ¥è¯¢" class="headerlink" title="4. æŸ¥è¯¢"></a>4. æŸ¥è¯¢</h4><p>ä½¿ç”¨ä¸Šé¢çš„åˆ›å»ºæ–¹æ³•æ’å…¥3æ¡æ•°æ®ï¼Œä¾›æŸ¥è¯¢</p><pre><code class="lang-python">body1={    &quot;first_name&quot; : &quot;John&quot;,    &quot;last_name&quot; :  &quot;Smith&quot;,    &quot;age&quot; :        25,    &quot;about&quot; :      &quot;I love to go rock climbing&quot;,    &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]}#ä½™ä¸‹ä»£ç ä¸ºå†™å…¥ä¸‰æ®µæ•°æ®body2={    &quot;first_name&quot; :  &quot;Jane&quot;,    &quot;last_name&quot; :   &quot;Smith&quot;,    &quot;age&quot; :         32,    &quot;about&quot; :       &quot;I like to collect rock albums&quot;,    &quot;interests&quot;:  [ &quot;music&quot; ]}body3={    &quot;first_name&quot; :  &quot;Douglas&quot;,    &quot;last_name&quot; :   &quot;Fir&quot;,    &quot;age&quot; :         35,    &quot;about&quot;:        &quot;I like to build cabinets&quot;,    &quot;interests&quot;:  [ &quot;forestry&quot; ]}res1 = es.index(&quot;test-index1&quot;, doc_type=&quot;employee&quot;, id=1, body=body1)re2 = es.index(&quot;test-index1&quot;, doc_type=&quot;employee&quot;, id=2, body=body2)re3 = es.index(&quot;test-index1&quot;, doc_type=&quot;employee&quot;, id=3, body=body3)</code></pre><h5 id="æŸ¥è¯¢å§“æ°ä¸ºSmithçš„å­—æ®µ"><a href="#æŸ¥è¯¢å§“æ°ä¸ºSmithçš„å­—æ®µ" class="headerlink" title="æŸ¥è¯¢å§“æ°ä¸ºSmithçš„å­—æ®µ"></a>æŸ¥è¯¢å§“æ°ä¸ºSmithçš„å­—æ®µ</h5><pre><code class="lang-python">bb1 = {    &quot;query&quot;: {        &quot;match&quot;: {&quot;last_name&quot;: &quot;Smith&quot;}    }}rt1 = es.search(index=&quot;test-index1&quot;, body=bb1)print(rt1)</code></pre><p>è¾“å‡ºæŸ¥è¯¢åˆ°çš„ä¸¤ä¸ªå‘˜å·¥ï¼Œç”±äºä»–ä»¬å§“æ°æ»¡è¶³Smithã€‚æ‰€ä»¥åˆ†æ•°ç›¸åŒ</p><pre><code class="lang-json">{&#39;took&#39;: 48, &#39;timed_out&#39;: False, &#39;_shards&#39;: {&#39;total&#39;: 5, &#39;successful&#39;: 5, &#39;skipped&#39;: 0, &#39;failed&#39;: 0}, &#39;hits&#39;: {&#39;total&#39;: 2,  &#39;max_score&#39;: 0.2876821,  &#39;hits&#39;: [{&#39;_index&#39;: &#39;test-index1&#39;,    &#39;_type&#39;: &#39;employee&#39;,    &#39;_id&#39;: &#39;2&#39;,    &#39;_score&#39;: 0.2876821,    &#39;_source&#39;: {&#39;first_name&#39;: &#39;Jane&#39;,     &#39;last_name&#39;: &#39;Smith&#39;,     &#39;age&#39;: 32,     &#39;about&#39;: &#39;I like to collect rock albums&#39;,     &#39;interests&#39;: [&#39;music&#39;]}},   {&#39;_index&#39;: &#39;test-index1&#39;,    &#39;_type&#39;: &#39;employee&#39;,    &#39;_id&#39;: &#39;1&#39;,    &#39;_score&#39;: 0.2876821,    &#39;_source&#39;: {&#39;first_name&#39;: &#39;John&#39;,     &#39;last_name&#39;: &#39;Smith&#39;,     &#39;age&#39;: 25,     &#39;about&#39;: &#39;I love to go rock climbing&#39;,     &#39;interests&#39;: [&#39;sports&#39;, &#39;music&#39;]}}]}}</code></pre><h5 id="åœ¨æŸ¥è¯¢å§“æ°çš„åŸºç¡€ä¸ŠåŒæ—¶ç»™ä¸Šå¹´é¾„é™åˆ¶"><a href="#åœ¨æŸ¥è¯¢å§“æ°çš„åŸºç¡€ä¸ŠåŒæ—¶ç»™ä¸Šå¹´é¾„é™åˆ¶" class="headerlink" title="åœ¨æŸ¥è¯¢å§“æ°çš„åŸºç¡€ä¸ŠåŒæ—¶ç»™ä¸Šå¹´é¾„é™åˆ¶"></a>åœ¨æŸ¥è¯¢å§“æ°çš„åŸºç¡€ä¸ŠåŒæ—¶ç»™ä¸Šå¹´é¾„é™åˆ¶</h5><pre><code class="lang-python">bb2 = {    &quot;query&quot;: {        &quot;bool&quot;:{            &quot;must&quot;: {&quot;match&quot; :{&quot;last_name&quot;: &quot;Smith&quot;}},            &quot;filter&quot;:{&quot;range&quot;:{&quot;age&quot;: {&quot;gt&quot;: 30}}}        }    }}rt2 = es.search(index=&quot;test-index1&quot;, body=bb2)print(rt2)</code></pre><p>æ­¤æ—¶è¾“å‡ºçš„åªæœ‰æ»¡è¶³å¹´é¾„å¤§äº30çš„è¿™ä¸ªå‘˜å·¥</p><pre><code class="lang-json">{&#39;took&#39;: 1019, &#39;timed_out&#39;: False, &#39;_shards&#39;: {&#39;total&#39;: 5, &#39;successful&#39;: 5, &#39;skipped&#39;: 0, &#39;failed&#39;: 0}, &#39;hits&#39;: {&#39;total&#39;: 1,  &#39;max_score&#39;: 0.2876821,  &#39;hits&#39;: [{&#39;_index&#39;: &#39;test-index1&#39;,    &#39;_type&#39;: &#39;employee&#39;,    &#39;_id&#39;: &#39;2&#39;,    &#39;_score&#39;: 0.2876821,    &#39;_source&#39;: {&#39;first_name&#39;: &#39;Jane&#39;,     &#39;last_name&#39;: &#39;Smith&#39;,     &#39;age&#39;: 32,     &#39;about&#39;: &#39;I like to collect rock albums&#39;,     &#39;interests&#39;: [&#39;music&#39;]}}]}}</code></pre><h5 id="å…¨æ–‡æœç´¢-â€”-ä¼ ç»Ÿæ•°æ®åº“å¾ˆéš¾å®ç°çš„åŠŸèƒ½"><a href="#å…¨æ–‡æœç´¢-â€”-ä¼ ç»Ÿæ•°æ®åº“å¾ˆéš¾å®ç°çš„åŠŸèƒ½" class="headerlink" title="å…¨æ–‡æœç´¢ â€” ä¼ ç»Ÿæ•°æ®åº“å¾ˆéš¾å®ç°çš„åŠŸèƒ½"></a>å…¨æ–‡æœç´¢ â€” ä¼ ç»Ÿæ•°æ®åº“å¾ˆéš¾å®ç°çš„åŠŸèƒ½</h5><pre><code class="lang-python">## å…¨æ–‡æœç´¢all_search = {    &quot;query&quot;:{        &quot;match&quot;:{            &quot;about&quot;:&quot;rock climbing&quot;        }    }}rt3 = es.search(index=&quot;test-index1&quot;, body=all_search)print(rt3)</code></pre><p>æ­¤æ—¶å°†ä¼šå¾—åˆ°ä¸¤ä¸ªåŒ¹é…çš„å­—æ®µï¼Œå®ƒä»¬åˆ†åˆ«æœ‰ä¸€ä¸ªå¯¹äºæœç´¢å¾—åˆ°çš„è¯„åˆ†</p><pre><code class="lang-json">{&#39;took&#39;: 15, &#39;timed_out&#39;: False, &#39;_shards&#39;: {&#39;total&#39;: 5, &#39;successful&#39;: 5, &#39;skipped&#39;: 0, &#39;failed&#39;: 0}, &#39;hits&#39;: {&#39;total&#39;: 2,  &#39;max_score&#39;: 0.5753642,  &#39;hits&#39;: [{&#39;_index&#39;: &#39;test-index1&#39;,    &#39;_type&#39;: &#39;employee&#39;,    &#39;_id&#39;: &#39;1&#39;,    &#39;_score&#39;: 0.5753642,    &#39;_source&#39;: {&#39;first_name&#39;: &#39;John&#39;,     &#39;last_name&#39;: &#39;Smith&#39;,     &#39;age&#39;: 25,     &#39;about&#39;: &#39;I love to go rock climbing&#39;,     &#39;interests&#39;: [&#39;sports&#39;, &#39;music&#39;]}},   {&#39;_index&#39;: &#39;test-index1&#39;,    &#39;_type&#39;: &#39;employee&#39;,    &#39;_id&#39;: &#39;2&#39;,    &#39;_score&#39;: 0.2876821,    &#39;_source&#39;: {&#39;first_name&#39;: &#39;Jane&#39;,     &#39;last_name&#39;: &#39;Smith&#39;,     &#39;age&#39;: 32,     &#39;about&#39;: &#39;I like to collect rock albums&#39;,     &#39;interests&#39;: [&#39;music&#39;]}}]}}</code></pre><h5 id="å¤šå­—æ®µæŸ¥è¯¢"><a href="#å¤šå­—æ®µæŸ¥è¯¢" class="headerlink" title="å¤šå­—æ®µæŸ¥è¯¢"></a>å¤šå­—æ®µæŸ¥è¯¢</h5><p>è¦å¯¹äºå¤šå­—æ®µåŒæ—¶å¯¹äºä¸€ä¸ªæ¡ç›®æŸ¥è¯¢åŒ¹é…ç¨‹åº¦ï¼Œåœ¨æ­¤ç§æ–¹æ³•ä¸‹å¯ä»¥è®¾ç½®boostï¼Œåˆ™ç›¸åº”å­—æ®µçš„æŸ¥è¯¢åŒ¹é…æƒé‡å°†ä¼šå¢åŠ ã€‚</p><pre><code class="lang-python">query = &quot;å¤´ç—›äº†æ€ä¹ˆåŠ&quot;all_search = {    &quot;query&quot;:{        &quot;match&quot;:{            &quot;title&quot;:query,            &quot;boost&quot;:2  # æ ‡é¢˜æƒé‡è®¾ç½®ä¸º2ï¼Œé»˜è®¤ä¸º1        },        &quot;match&quot;:{            &quot;desc&quot;:query        }    }}rt = es.search(index=&quot;qa_test&quot;, body=all_search)</code></pre><p>å¦å¤–ä¸€ç§æ–¹æ³•æ˜¯<strong>å¸ƒå°”æŸ¥è¯¢</strong>ï¼Œé‡‡ç”¨çš„æ˜¯<strong>â€œåŒ¹é…è¶Šå¤šè¶Šå¥½(More-matches-is-better)â€</strong>çš„æ–¹æ³•ï¼Œæ‰€ä»¥æ¯ä¸ªmatchå­å¥çš„å¾—åˆ†ä¼š è¢«åŠ èµ·æ¥å˜æˆæœ€åçš„æ¯ä¸ªæ–‡æ¡£çš„å¾—åˆ†ã€‚åŒ¹é…ä¸¤ä¸ªå­å¥çš„æ–‡æ¡£çš„å¾—åˆ†ä¼šæ¯”åªåŒ¹é…äº†ä¸€ä¸ªæ–‡æ¡£çš„ å¾—åˆ†é«˜ã€‚    </p><pre><code class="lang-python">query = &quot;å¤´ç—›äº†æ€ä¹ˆåŠ&quot;all_search = {    &quot;query&quot;: {        &quot;bool&quot;:{            &quot;should&quot;:[                {&quot;match&quot;: {&quot;title&quot;: query}},  # åŒæ ·å¯ä»¥ä½¿ç”¨boost:2æ¥æå‡æƒé‡                {&quot;match&quot;: {&quot;desc&quot;: query}}            ]        }}}rt = es.search(index=&quot;qa_test&quot;, body=all_search)</code></pre><p>è¿™ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥å¯¹äºå¤šå­—æ®µæŸ¥è¯¢ï¼Œä½†å®ƒä»¬æŸ¥è¯¢å‡ºæ¥å¾—åˆ°çš„ç»“æœå°†ä¼šä¸åŒã€‚å…¶å®ƒæŸ¥è¯¢æ–¹æ³•è¿˜åŒ…æ‹¬<strong>dis_maxæŸ¥è¯¢ï¼Œå¤šé‡åŒ¹é…æŸ¥è¯¢</strong>ï¼Œå…·ä½“ä½¿ç”¨å¯æŸ¥çœ‹æ–‡æ¡£ã€‚</p><h3 id="å¸¸ç”¨çš„curlæ“ä½œElasticsearch"><a href="#å¸¸ç”¨çš„curlæ“ä½œElasticsearch" class="headerlink" title="å¸¸ç”¨çš„curlæ“ä½œElasticsearch"></a>å¸¸ç”¨çš„curlæ“ä½œElasticsearch</h3><h4 id="1-åˆ›å»ºç´¢å¼•"><a href="#1-åˆ›å»ºç´¢å¼•" class="headerlink" title="1.åˆ›å»ºç´¢å¼•"></a>1.åˆ›å»ºç´¢å¼•</h4><pre><code class="lang-bash">curl -XPUT &#39;localhost:9200/&lt;indice_name&gt;?pretty&#39;</code></pre><h4 id="2-æŸ¥è¯¢æ‰€æœ‰çš„ç´¢å¼•"><a href="#2-æŸ¥è¯¢æ‰€æœ‰çš„ç´¢å¼•" class="headerlink" title="2. æŸ¥è¯¢æ‰€æœ‰çš„ç´¢å¼•"></a>2. æŸ¥è¯¢æ‰€æœ‰çš„ç´¢å¼•</h4><pre><code class="lang-bash">curl &#39;localhost:9200/_cat/indices?v&#39;</code></pre><h4 id="3-åˆ é™¤æŒ‡å®šç´¢å¼•"><a href="#3-åˆ é™¤æŒ‡å®šç´¢å¼•" class="headerlink" title="3.åˆ é™¤æŒ‡å®šç´¢å¼•"></a>3.åˆ é™¤æŒ‡å®šç´¢å¼•</h4><pre><code class="lang-bash">curl -XDELETE http://localhost:9200/&lt;indice_name&gt;</code></pre><h4 id="4-å‘ç´¢å¼•é‡Œæ’å…¥ä¸€æ¡æ•°æ®"><a href="#4-å‘ç´¢å¼•é‡Œæ’å…¥ä¸€æ¡æ•°æ®" class="headerlink" title="4.å‘ç´¢å¼•é‡Œæ’å…¥ä¸€æ¡æ•°æ®"></a>4.å‘ç´¢å¼•é‡Œæ’å…¥ä¸€æ¡æ•°æ®</h4><pre><code class="lang-bash">curl -H&#39;Content-Type: application/json&#39; -XPUT &#39;localhost:9200/customer/external/1?pretty&#39; -d &#39;{&quot;name&quot;:&quot;John Doe&quot;}&#39;</code></pre><h4 id="5-æ ¹æ®ç¼–å·è·å–ä¸€æ¡æ•°æ®"><a href="#5-æ ¹æ®ç¼–å·è·å–ä¸€æ¡æ•°æ®" class="headerlink" title="5. æ ¹æ®ç¼–å·è·å–ä¸€æ¡æ•°æ®"></a>5. æ ¹æ®ç¼–å·è·å–ä¸€æ¡æ•°æ®</h4><pre><code class="lang-bash">curl -XGET &#39;localhost:9200/customer/external/1?pretty&#39;</code></pre><h3 id="BUG"><a href="#BUG" class="headerlink" title="BUG"></a>BUG</h3><h4 id="æ€ä¹ˆè§£å†³â€œFORBIDDEN-12-index-read-onlyâ€"><a href="#æ€ä¹ˆè§£å†³â€œFORBIDDEN-12-index-read-onlyâ€" class="headerlink" title="æ€ä¹ˆè§£å†³â€œFORBIDDEN/12/index read-onlyâ€"></a>æ€ä¹ˆè§£å†³â€œFORBIDDEN/12/index read-onlyâ€</h4><pre><code class="lang-bash">curl -XPUT -H &quot;Content-Type: application/json&quot; http://localhost:9200/_cluster/settings -d &#39;{ &quot;transient&quot;: { &quot;cluster.routing.allocation.disk.threshold_enabled&quot;: false } }&#39;curl -XPUT -H &quot;Content-Type: application/json&quot; http://localhost:9200/_all/_settings -d &#39;{&quot;index.blocks.read_only_allow_delete&quot;: null}&#39;</code></pre><h3 id="1-max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144"><a href="#1-max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144" class="headerlink" title="[1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]"></a>[1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</h3><pre><code class="lang-bash">sudo sysctl -w vm.max_map_count=262144</code></pre>]]></content>
      
      
        <tags>
            
            <tag> æ£€ç´¢ elasticsearch </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç»´åŸºä¸­æ–‡ç™¾ç§‘è·å–</title>
      <link href="/2019/05/29/%E7%BB%B4%E5%9F%BA%E4%B8%AD%E6%96%87%E7%99%BE%E7%A7%91%E8%8E%B7%E5%8F%96/"/>
      <url>/2019/05/29/%E7%BB%B4%E5%9F%BA%E4%B8%AD%E6%96%87%E7%99%BE%E7%A7%91%E8%8E%B7%E5%8F%96/</url>
      <content type="html"><![CDATA[<h3 id="ç»´åŸºä¸­æ–‡è¯­æ–™è·å–"><a href="#ç»´åŸºä¸­æ–‡è¯­æ–™è·å–" class="headerlink" title="ç»´åŸºä¸­æ–‡è¯­æ–™è·å–"></a>ç»´åŸºä¸­æ–‡è¯­æ–™è·å–</h3><h4 id="ä¸‹è½½ä¸­æ–‡çš„Wiki-Dump"><a href="#ä¸‹è½½ä¸­æ–‡çš„Wiki-Dump" class="headerlink" title="ä¸‹è½½ä¸­æ–‡çš„Wiki Dump"></a>ä¸‹è½½ä¸­æ–‡çš„Wiki Dump</h4><pre><code class="lang-bash">wget http://download.wikipedia.com/zhwiki/latest/zhwiki-latest-pages-articles.xml.bz2</code></pre><h4 id="ä¸‹è½½ä¹‹åè§£å‹"><a href="#ä¸‹è½½ä¹‹åè§£å‹" class="headerlink" title="ä¸‹è½½ä¹‹åè§£å‹"></a>ä¸‹è½½ä¹‹åè§£å‹</h4><pre><code class="lang-bash">tar -zxvf zhwiki-latest-pages-articles.xml.bz2</code></pre><h3 id="ä½¿ç”¨Wikipedia-Extractor-æŠ½å–å†…å®¹"><a href="#ä½¿ç”¨Wikipedia-Extractor-æŠ½å–å†…å®¹" class="headerlink" title="ä½¿ç”¨Wikipedia Extractor æŠ½å–å†…å®¹"></a>ä½¿ç”¨Wikipedia Extractor æŠ½å–å†…å®¹</h3><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><pre><code class="lang-bash">git clone https://github.com/attardi/wikiextractor.git wikiextractorcd wikiextractorpython setup.py install</code></pre><h3 id="è¿è¡ŒæŠ½å–"><a href="#è¿è¡ŒæŠ½å–" class="headerlink" title="è¿è¡ŒæŠ½å–"></a>è¿è¡ŒæŠ½å–</h3><pre><code class="lang-bash">python WikiExtractor.py -b 1024M -o extracted zhwiki-latest-pages-articles.xml.bz2</code></pre><h3 id="è¿‡æ»¤æ‰æ‹¬å·ç­‰ä¸ç›¸å…³å†…å®¹"><a href="#è¿‡æ»¤æ‰æ‹¬å·ç­‰ä¸ç›¸å…³å†…å®¹" class="headerlink" title="è¿‡æ»¤æ‰æ‹¬å·ç­‰ä¸ç›¸å…³å†…å®¹"></a>è¿‡æ»¤æ‰æ‹¬å·ç­‰ä¸ç›¸å…³å†…å®¹</h3><h4 id="ä¿å­˜ä¸ºstripæ–‡ä»¶"><a href="#ä¿å­˜ä¸ºstripæ–‡ä»¶" class="headerlink" title="ä¿å­˜ä¸ºstripæ–‡ä»¶"></a>ä¿å­˜ä¸ºstripæ–‡ä»¶</h4><pre><code class="lang-python">import reimport sysimport codecsdef filte(input_file):    p1 = re.compile(&#39;ï¼ˆï¼‰&#39;)    p2 = re.compile(&#39;ã€Šã€‹&#39;)    p3 = re.compile(&#39;ã€Œ&#39;)    p4 = re.compile(&#39;ã€&#39;)    p5 = re.compile(&#39;&lt;doc (.*)&gt;&#39;)    p6 = re.compile(&#39;&lt;/doc&gt;&#39;)    outfile = codecs.open(&#39;std_&#39; + input_file, &#39;w&#39;, &#39;utf-8&#39;)    with codecs.open(input_file, &#39;r&#39;, &#39;utf-8&#39;) as myfile:        for line in myfile:            line = p1.sub(&#39;&#39;, line)            line = p2.sub(&#39;&#39;, line)            line = p3.sub(&#39;&#39;, line)            line = p4.sub(&#39;&#39;, line)            line = p5.sub(&#39;&#39;, line)            line = p6.sub(&#39;&#39;, line)            outfile.write(line)    outfile.close()if __name__ == &#39;__main__&#39;:    input_file = sys.argv[1]    filte(input_file)</code></pre><h4 id="å¯¹AAæ–‡ä»¶å¤¹ä¸‹ä¸‰ä¸ªæ–‡ä»¶åˆ†åˆ«è¿è¡Œ"><a href="#å¯¹AAæ–‡ä»¶å¤¹ä¸‹ä¸‰ä¸ªæ–‡ä»¶åˆ†åˆ«è¿è¡Œ" class="headerlink" title="å¯¹AAæ–‡ä»¶å¤¹ä¸‹ä¸‰ä¸ªæ–‡ä»¶åˆ†åˆ«è¿è¡Œ"></a>å¯¹AAæ–‡ä»¶å¤¹ä¸‹ä¸‰ä¸ªæ–‡ä»¶åˆ†åˆ«è¿è¡Œ</h4><pre><code class="lang-bash">python strip.py wiki_00\wiki_01\wiki_02</code></pre><h4 id="æ­¤æ—¶å¾—åˆ°ä¸‰ä¸ª-std-wikiæ–‡ä»¶"><a href="#æ­¤æ—¶å¾—åˆ°ä¸‰ä¸ª-std-wikiæ–‡ä»¶" class="headerlink" title="æ­¤æ—¶å¾—åˆ°ä¸‰ä¸ª std_wikiæ–‡ä»¶"></a>æ­¤æ—¶å¾—åˆ°ä¸‰ä¸ª std_wikiæ–‡ä»¶</h4><h3 id="ç¹è½¬ç®€"><a href="#ç¹è½¬ç®€" class="headerlink" title="ç¹è½¬ç®€"></a>ç¹è½¬ç®€</h3><h4 id="å®‰è£…opencc"><a href="#å®‰è£…opencc" class="headerlink" title="å®‰è£…opencc"></a>å®‰è£…opencc</h4><p>ä¸‹è½½åœ°å€ä¸º <a href="https://link.jianshu.com/?t=https://bintray.com/package/files/byvoid/opencc/OpenCC" target="_blank" rel="noopener">https://link.jianshu.com/?t=https://bintray.com/package/files/byvoid/opencc/OpenCC</a></p><h4 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h4><pre><code class="lang-bash">tar -xzvf opencc-1.0.4.tar.gz</code></pre><h4 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h4><pre><code class="lang-bash">å®‰è£…cmake doxygensudo apt-get install doxygencd opencc-1.0.4/makesudo mask installæµ‹è¯•å®‰è£…å®Œæˆopencc --h</code></pre><h4 id="è½¬æ¢"><a href="#è½¬æ¢" class="headerlink" title="è½¬æ¢"></a>è½¬æ¢</h4><p>å¯¹ä¹‹å‰ä¸‰ä¸ªstdå¼€å¤´æ–‡ä»¶åˆ†åˆ«æ‰§è¡Œ</p><pre><code class="lang-bash">opencc -i std_wiki_00 -o zh_wiki_00 -c t2s.json</code></pre>]]></content>
      
      
        <tags>
            
            <tag> æ•°æ®é›† </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>fpn</title>
      <link href="/2018/07/14/fpn/"/>
      <url>/2018/07/14/fpn/</url>
      <content type="html"><![CDATA[<h2 id="FPN"><a href="#FPN" class="headerlink" title="FPN"></a>FPN</h2><blockquote><p>FPNæ˜¯ç”±facebookæ‰€æå‡ºï¼Œå…¨ç§°ä¸ºFeature Pyramid Networkâ€”ç‰¹å¾é‡‘å­—å¡”ç½‘ç»œã€‚FPNä¸»è¦è§£å†³çš„æ˜¯ç‰©ä½“æ£€æµ‹ä¸­çš„å¤šå°ºåº¦é—®é¢˜ï¼Œé€šè¿‡ç®€å•çš„ç½‘ç»œè¿æ¥æ”¹å˜ï¼Œåœ¨åŸºæœ¬ä¸æ”¹å˜åŸæœ‰æ¨¡å‹è®¡ç®—é‡çš„æƒ…å†µä¸‹ï¼Œå¤§å¹…æé«˜äº†å°ç‰©ä½“æ£€æµ‹çš„æ€§èƒ½ã€‚</p></blockquote><p>â€‹       åŸæ¥å¤šæ•°çš„ç›®æ ‡æ£€æµ‹ç®—æ³•éƒ½åªæ˜¯é‡‡ç”¨é¡¶å±‚ç‰¹å¾åšæ£€æµ‹ï¼Œä½†äº‹å®ä¸Šä½å±‚çš„ç‰¹å¾è¯­ä¹‰ä¿¡æ¯æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯ç›®æ ‡ä½ç½®å‡†ç¡®ï¼›é«˜å±‚çš„ç‰¹å¾è¯­ä¹‰ä¿¡æ¯æ¯”è¾ƒä¸°å¯Œï¼Œä½†æ˜¯ç›®æ ‡ä½ç½®æ¯”è¾ƒç²—ç•¥ã€‚è™½ç„¶æœ‰äº›ç®—æ³•é‡‡ç”¨å¤šå°ºåº¦ç‰¹å¾èåˆçš„æ–¹å¼ï¼Œä½†æ˜¯ä¸€èˆ¬æ˜¯é‡‡ç”¨èåˆåçš„ç‰¹å¾åšæ£€æµ‹ï¼Œè€ŒFPNä¸ä¸€æ ·çš„åœ°æ–¹æ˜¯åœ¨é¢„æµ‹åœ¨ä¸åŒç‰¹å¾å±‚ç‹¬ç«‹è¿›è¡Œçš„ã€‚ç°åœ¨ç›®æ ‡æ£€æµ‹çš„æ–¹æ³•æœ‰è®¸å¤šï¼Œå¸¸è§çš„<em>Faster R-CNN</em>, <em>YOLO</em>, <em>SSD</em>,åä¸¤è€…åœ¨æ£€æµ‹é€Ÿåº¦ä¸Šå¤§å¹…æé«˜ã€‚ä½†æ˜¯æ£€æµ‹æ•ˆæœä¸€ç›´æ˜¯ç”±Faster R-CNNä¸»å¯¼ï¼Œè™½ç„¶é€Ÿåº¦è¾ƒä¸ºæ…¢ï¼Œä½†ç²¾åº¦å¾ˆé«˜ï¼Œå¯¹å¤§ç‰©ä½“çš„æ£€æµ‹æ•ˆæœå·²ç»éå¸¸æ˜¾è‘—ã€‚</p><p>â€‹        ä½†æ˜¯åœ¨ç›®æ ‡æ£€æµ‹é‡Œé¢ï¼Œåœ¨æœ‰é™è®¡ç®—é‡çš„æƒ…å†µä¸‹ï¼Œå¸¸ç”¨çš„ç½‘ç»œç»“æ„å¯¹åº”çš„strideä¸€èˆ¬ä¼šæ¯”è¾ƒå¤§ï¼Œå›¾åƒä¸­çš„å°ç‰©ä½“ç”šè‡³ä¼šå°äºstrideçš„å¤§å°ï¼Œé€ æˆçš„ç»“æœå°±æ˜¯å°ç‰©ä½“æ£€æµ‹çš„æ€§èƒ½ã€‚</p><p><img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20180714193425.png" alt=""></p><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œä¼ ç»Ÿè§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯åŒ…æ‹¬ï¼š</p><ol><li>å¤šå°ºåº¦è®­ç»ƒå’Œæµ‹è¯•ï¼Œåˆç§°å›¾åƒé‡‘å­—å¡”ï¼Œå¦‚å›¾(a)æ‰€ç¤ºï¼Œè¿™ç§æ–¹æ³•ç”±äºå¾ˆé«˜çš„æ—¶é—´å’Œè®¡ç®—é‡å¼€é”€ï¼Œå¾ˆéš¾åœ¨å®é™…ä¸­å¾—åˆ°ä½¿ç”¨ã€‚</li><li><strong>ç‰¹å¾åˆ†å±‚ã€‚</strong>å³æ¯å±‚åˆ†åˆ«é¢„æµ‹å¯¹åº”çš„scaleåˆ†è¾¨ç‡çš„æ£€æµ‹ç»“æœï¼Œå¦‚å›¾(c)æ‰€ç¤ºã€‚<strong>SSD</strong>æ¡†æ¶é‡‡ç”¨äº†ç±»ä¼¼çš„æ€æƒ³ï¼Œè¿™æ ·çš„æ–¹æ³•åœ¨äºå¼ºè¡Œè®©ä¸åŒå±‚å»å­¦ä¹ åŒæ ·çš„è¯­ä¹‰ä¿¡æ¯ã€‚ä¸åŒæ·±åº¦å¯¹åº”ä¸åŒå±‚æ¬¡çš„è¯­ä¹‰ç‰¹å¾ï¼Œ<strong>æµ…å±‚ç½‘ç»œåˆ†è¾¨ç‡é«˜ï¼Œå­¦çš„æ›´å¤šæ˜¯ç»†èŠ‚ç‰¹å¾ï¼Œæ·±å±‚ç½‘ç»œåˆ†è¾¨ç‡ä½ï¼Œå­¦çš„æ›´å¤šçš„æ˜¯è¯­ä¹‰ç‰¹å¾ã€‚</strong></li></ol><p>æ‰€ä»¥ç›®å‰çš„å¤šå°ºåº¦ç›®æ ‡æ£€æµ‹ä¸»è¦é¢å¯¹çš„æŒ‘æˆ˜ä¸ºï¼š</p><ul><li>å¦‚ä½•å­¦ä¹ å…·æœ‰å¼ºè¯­ä¹‰ä¿¡æ¯çš„å¤šå°ºåº¦ç‰¹å¾è¡¨ç¤ºï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡é€šç”¨çš„ç‰¹å¾è¡¨ç¤ºæ¥è§£å†³ç‰©ä½“æ£€æµ‹ä¸­çš„å¤šä¸ªå­é—®é¢˜ï¼Ÿ</li><li>å¦‚ä½•é«˜æ•ˆè®¡ç®—å¤šå°ºåº¦çš„ç‰¹å¾è¡¨ç¤º?</li></ul><p>å¦‚å›¾(d)ï¼Œç½‘ç»œç›´æ¥åœ¨åŸæ¥çš„å•ç½‘ç»œä¸Šåšä¿®æ”¹ï¼Œæ¯ä¸ªåˆ†è¾¨ç‡çš„feature mapå¼•å…¥åä¸€åˆ†è¾¨ç‡ç¼©æ”¾ä¸¤å€çš„feature mapåš<strong>element-wise</strong>çš„æ“ä½œã€‚é€šè¿‡è¿™æ ·çš„è¿æ¥ï¼Œæ¯ä¸€å±‚é¢„æµ‹æ‰€ç”¨çš„feature mapéƒ½èåˆäº†ä¸åŒåˆ†è¾¨ç‡ã€ä¸åŒè¯­ä¹‰å¼ºåº¦çš„ç‰¹å¾ï¼Œèåˆçš„ä¸åŒåˆ†è¾¨ç‡çš„feature mapåˆ†åˆ«åšå¯¹åº”åˆ†è¾¨ç‡å¤§å°çš„ç‰©ä½“æ£€æµ‹ã€‚è¿™æ ·ä¿è¯äº†æ¯ä¸€å±‚éƒ½æœ‰åˆé€‚çš„åˆ†è¾¨ç‡ä»¥åŠå¼ºè¯­ä¹‰ç‰¹å¾ã€‚åŒæ—¶ï¼Œç”±äºæ­¤æ–¹æ³•åªæ˜¯åœ¨åŸç½‘ç»œåŸºç¡€ä¸ŠåŠ ä¸Šäº†é¢å¤–çš„è·¨å±‚è¿æ¥ï¼Œåœ¨å®é™…åº”ç”¨ä¸­å‡ ä¹ä¸å¢åŠ é¢å¤–çš„æ—¶é—´å’Œè®¡ç®—é‡ã€‚</p><p><img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20180714194713.png" alt=""></p><p>åœ¨Faster R-CNNä¸­åŠ å…¥FPNï¼Œå…¶åˆ†åˆ«æ˜¯åœ¨<strong>RPN</strong>å’Œ<strong>Fast RCNN</strong>ä¸¤æ­¥èµ·ä½œç”¨ã€‚</p><p>ä¸»ç½‘ç»œé‡‡ç”¨ResNetï¼Œç®—æ³•ç»“æ„å¤§è‡´ä¸ºFigure 3ï¼Œä¸€ä¸ªè‡ªåº•å‘ä¸Šçš„çº¿è·¯ï¼Œä¸€ä¸ªè‡ªé¡¶å‘ä¸‹çš„çº¿è·¯ï¼Œæ¨ªå‘è¿æ¥ã€‚å›¾ä¸­æ”¾å¤§åŒºåŸŸå°±æ˜¯æ¨ªå‘è¿æ¥ï¼Œ$1\times1$å¤§å°çš„å·ç§¯æ ¸çš„ä½œç”¨æ˜¯å‡å°‘feature mapçš„ä¸ªæ•°ï¼Œ è€Œå¹¶ä¸æ”¹å˜å…¶å¤§å°ã€‚è‡ªåº•å‘ä¸Šä¸ºç½‘ç»œçš„å‰å‘ä¼ æ’­è¿‡ç¨‹ï¼Œå°†feature mapæœªæ”¹å˜å¤§å°çš„å±‚å½’ä¸ºä¸€ä¸ª<strong>stage</strong>ï¼Œ æ¯æ¬¡æŠ½å–çš„ç‰¹å¾éƒ½æ˜¯æ¯ä¸ªstageçš„æœ€åä¸€å±‚è¾“å‡ºï¼Œè¿™æ ·èƒ½å¤Ÿæ„æˆé‡‘å­—å¡”ã€‚è‡ªé¡¶å‘ä¸‹çš„è¿‡ç¨‹é‡‡ç”¨ä¸Šé‡‡æ ·å®Œæˆï¼Œæ¨ªå‘è¿æ¥å°±æ˜¯å°†ä¸Šé‡‡ç”¨çš„ç»“æœå’Œè‡ªåº•å‘ä¸Šçš„ç”Ÿæˆçš„ç›¸åŒå¤§å°çš„feature map ç›¸èåˆã€‚</p><ul><li>åœ¨RPNä¸­åŒºåˆ«äºåŸè®ºæ–‡ç›´æ¥åœ¨æœ€åçš„feature mapä¸Šè®¾ç½®anchorï¼ŒFPNåœ¨ç›¸åº”çš„feature mapä¸Šè®¾ç½®ï¼Œåœ¨æ¯ä¸ªscaleéƒ½è®¾ç½®ä¸åŒçš„anchorä¸”è®¾ç½®ç±»å‹å˜ä¸º$5\times3$ç§ï¼Œ FPNå¯¹æ¯”åŸæ¥çš„RPNç½‘ç»œï¼Œå¬å›ç‡å¾—åˆ°å¤§å¹…åº¦æå‡ã€‚</li><li>åœ¨Fast RCNNä¸­ï¼Œ é¦–å…ˆéœ€è¦å›ºå®šFPN+RPNæå–çš„proposalç»“æœã€‚åœ¨Fast RCNNä¸­ï¼ŒFPNä¸»è¦ç”¨äºé€‰æ‹©å“ªä¸€å±‚çš„feature map æ¥åšROI Poolingï¼Œ FPNç­›é€‰ROIåŒºåŸŸï¼ŒåŒæ ·å¯¹äºæ£€æµ‹å°ç‰©ä½“çš„ç²¾åº¦æœ‰å¤§å¹…æå‡ã€‚</li></ul><p>å®éªŒç»“æœ</p><p><img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20180715092613.png" alt=""></p><p><img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20180715092757.png" alt=""></p><p>FPNç®—æ³•åŒæ—¶åˆ©ç”¨ä½å±‚ç‰¹å¾é«˜åˆ†è¾¨ç‡å’Œé«˜å±‚ç‰¹å¾çš„é«˜è¯­ä¹‰ä¿¡æ¯ï¼Œé€šè¿‡èåˆè¿™äº›ä¸åŒå±‚çš„ç‰¹å¾è¾¾åˆ°é¢„æµ‹æ•ˆæœã€‚å¹¶ä¸”é¢„æµ‹æ˜¯åœ¨æ¯ä¸ªèåˆåçš„ç‰¹å¾å±‚ä¸Šå•ç‹¬è¿›è¡Œçš„ï¼Œè¿™å’Œå¸¸è§„çš„ç‰¹å¾èåˆæ–¹å¼ä¸åŒã€‚</p><p><a href="https://blog.csdn.net/u014380165/article/details/72890275/" target="_blank" rel="noopener">å‚è€ƒ</a></p>]]></content>
      
      
        <tags>
            
            <tag> ç›®æ ‡æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>faster-rcnn</title>
      <link href="/2018/06/26/faster-rcnn/"/>
      <url>/2018/06/26/faster-rcnn/</url>
      <content type="html"><![CDATA[<h2 id="Faster-R-CNN"><a href="#Faster-R-CNN" class="headerlink" title="Faster R-CNN"></a>Faster R-CNN</h2><blockquote><p>åœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸï¼Œåœ¨ç¬¬ä¸€æ¬¡å‡ºç°äº†<strong>R-CNN</strong>ä¹‹åï¼Œå¼€å§‹å¹¿æ³›ä½¿ç”¨äº†ç¥ç»ç½‘ç»œçš„æ–¹æ³•ï¼Œåœ¨R-CNNåŸºç¡€ä¸Šå‡ºç°äº†<strong>Fast R-CNN</strong>ï¼Œå…¶å˜å¾—æ¯”R-CNNæ›´å¿«ï¼Œä½†ä¸èƒ½æ”¹å˜çš„æ˜¯åœ¨äº§ç”Ÿå€™é€‰åŒºåŸŸçš„è¿‡ç¨‹ä¸­ï¼Œå®ƒä»¬ä¸¤è€…éƒ½é‡‡ç”¨çš„å«ä¸€ç§<em>Selective search</em>çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•éå¸¸æ…¢ã€‚è€ŒFaster R-CNNçš„å‡ºç°ï¼Œå…¶åˆ©ç”¨å·ç§¯ç¥ç»ç½‘ç»œå»æå–å€™é€‰åŒºåŸŸï¼Œå¤§å¤§åŠ å¿«äº†è®­ç»ƒé€Ÿåº¦ï¼ŒåŒæ ·ä¹Ÿæé«˜äº†å‡†ç¡®ç‡ï¼ŒFaster-RCNNæ˜¯åœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸéå¸¸é‡è¦çš„ä¸€ä¸ªæ–¹æ³•ã€‚</p></blockquote><h3 id="R-CNN-å’Œ-Fast-R-CNN"><a href="#R-CNN-å’Œ-Fast-R-CNN" class="headerlink" title="R-CNN å’Œ Fast R-CNN"></a>R-CNN å’Œ Fast R-CNN</h3><p><strong>R-CNNæ­¥éª¤</strong>ï¼š</p><ol><li><p>è®­ç»ƒæˆ–è€…ä¸‹è½½ä¸€ä¸ªåˆ†ç±»æ¨¡å‹ï¼ˆåŸºäºImageNetï¼‰ï¼Œå¯¹è¯¥æ¨¡å‹åš<em>fine-tuning</em>ï¼Œå°†åˆ†ç±»æ•°ä»1000æ”¹ä¸º20ï¼Œå¹¶å»æ‰æœ€åä¸€ä¸ªå…¨è¿æ¥å±‚ã€‚</p></li><li><p>åˆ©ç”¨<strong>é€‰æ‹©æ€§æœç´¢</strong>(selective search)ï¼Œä»å›¾åƒä¸­é€‰å–å¤§çº¦2000ä¸ªå€™é€‰æ¡†</p></li><li><p>å¯¹äºæ‰€é€‰æ‹©çš„æ¯ä¸€ä¸ªåŒºåŸŸï¼Œä¿®æ­£åŒºåŸŸçš„å¤§å°ä»¥é€‚åˆCNNçš„è¾“å…¥ï¼Œå°†æ¯ä¸ªå€™é€‰åŒºåŸŸä¼ å…¥ç½‘ç»œä¸­æå–ç‰¹å¾</p></li><li><p>ç‰¹å¾é€å…¥æ¯ä¸€ç±»çš„<strong>SVMåˆ†ç±»å™¨</strong>ï¼Œåˆ¤æ–­æ˜¯å¦å±äºæ­¤ç±»ã€‚å¹¶ä½¿ç”¨å›å½’å™¨ç²¾ä¿®å€™é€‰æ¡†çš„ä½ç½®ã€‚</p></li></ol><p>   <img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20180630160655.png" alt=""></p><p>ç”±äºR-CNNä½¿ç”¨<em>selective search</em>æ–¹æ³•é€‰æ‹©å‡ºå€™é€‰æ¡†ä¹‹åï¼Œéœ€å°†æ¯ä¸ªå€™é€‰æ¡†ä¼ å…¥ç¥ç»ç½‘ç»œä¸­æå–ç‰¹å¾è¿›è¡Œåˆ¤æ–­ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹éå¸¸æ…¢ï¼ŒFast R-CNNåœ¨æ­¤åŸºç¡€ä¸Šæå‡äº†åŒºåŸŸæ¡†çš„é€‰å–è¿‡ç¨‹ï¼Œä¸æ˜¯å…ˆé€‰å–æ¡†å†ä¼ å…¥CNNä¹‹ä¸­ä¸€ä¸ªä¸€ä¸ªè®­ç»ƒï¼Œè€Œæ˜¯ç›´æ¥å°†æ•´å¼ å›¾ç‰‡ä¼ å…¥CNNä¹‹ä¸­æå–ç‰¹å¾ã€‚ç”±äºé€‰æ‹©å‡ºçš„RoIsçš„å¤§å°éƒ½å„ä¸ç›¸åŒï¼Œæ‰€ä»¥åœ¨Fast R-CNNä¹‹ä¸­å¼•å…¥äº†RoI poolingï¼Œå¯å°†ä¸åŒåŒºåŸŸå¤§å°çš„å€™é€‰åŒºpoolingä¸ºç›¸åŒå°ºå¯¸çš„ç‰¹å¾åŒºåŸŸã€‚</p><p><strong>Fast R-CNNæ­¥éª¤</strong>:</p><ol><li>ä»»æ„å¤§å°çš„å›¾ç‰‡ä¼ å…¥ImageNeté¢„è®­ç»ƒç½‘ç»œ(VGG)ä¹‹ä¸­ï¼Œå¾—åˆ°feature map</li><li>åœ¨æ­¤å›¾åƒä¸­é€šè¿‡selective searché€‰å–2000ä¸ªå·¦å³çš„å€™é€‰æ¡†</li><li>é€šè¿‡ç‰¹å¾å›¾å’ŒåŸå›¾çš„æ˜ å°„å…³ç³»ï¼Œå°†åœ¨åŸå›¾ä¸­æå–åˆ°çš„å€™é€‰æ¡†ï¼Œæ˜ å°„åˆ°feature mapä¸­</li><li>é€šè¿‡RoI Pooling å°†ç‰¹å¾å›¾ä¸Šçš„2000ä¸ªå€™é€‰æ¡†æ± åŒ–ä¸ºå›ºå®šå¤§å°(VGGä¸­ä¸º7x7å¤§å°)ï¼Œç»è¿‡ä¸€ä¸ªå…¨è¿æ¥å±‚å¾—åˆ°å›ºå®šçš„ç‰¹å¾å‘é‡ã€‚</li><li>æ‰€å¾—åˆ°çš„ç‰¹å¾å‘é‡å†ç»è¿‡ä¸¤ä¸ªå…¨è¿æ¥å±‚åˆ†åˆ«å¾—åˆ°ä¸¤ä¸ªè¾“å‡ºå‘é‡ï¼šä¸€ä¸ªæ˜¯softmaxçš„<strong>åˆ†ç±»</strong>å¾—åˆ†ï¼Œä¸€ä¸ªæ˜¯Bounding-boxçš„çª—å£<strong>å›å½’</strong>ã€‚</li><li>åˆ©ç”¨çª—å£å¾—åˆ°çš„scoreåˆ†åˆ«å¯¹æ¯ä¸€ç±»ç‰©ä½“è¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶(nms)ï¼Œå‰”é™¤é‡å çš„å»ºè®®æ¡†ï¼Œæœ€ç»ˆå¾—åˆ°æ¯ä¸ªç±»åˆ«å›å½’ä¿®æ­£å¾—åˆ†æœ€é«˜çš„çª—å£ã€‚</li></ol><p><img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20180630162003.png" alt=""></p><h3 id="Faster-R-CNN-1"><a href="#Faster-R-CNN-1" class="headerlink" title="Faster R-CNN"></a>Faster R-CNN</h3><p><a href="https://arxiv.org/abs/1506.01497" target="_blank" rel="noopener">è®ºæ–‡</a></p><p>æ•´ä½“æµç¨‹ï¼š</p><p><img src="https://pic2.zhimg.com/80/v2-4e372e4536ef6d3d28ebd8803a9b13e2_hd.jpg" alt=""></p><p>å¤§è‡´åˆ†ä¸ºä¸‰ä¸ªåŒºåŸŸï¼š</p><ol><li><strong>Extractor</strong>ï¼Œä¸ºå¸¸ç”¨çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œé€šè¿‡è¾“å…¥å›¾åƒï¼Œä»¥æ­¤æ¥æå–ç‰¹å¾ã€‚</li><li><strong>RPN</strong>ï¼ŒFaster-RCNNä¸­æ–°æå‡ºçš„åŒºåŸŸç”Ÿæˆæ–¹æ³•ï¼Œæ‘ˆé™¤äº†ä¹‹å‰é‡‡ç”¨çš„<em>Selective search</em>ï¼Œè€Œé‡‡ç”¨äº†å·ç§¯ç¥ç»ç½‘ç»œå»ç”ŸæˆRoIsï¼Œè¿™æ ·å¤§å¤§æé«˜äº†ç½‘ç»œçš„é€Ÿåº¦ã€‚</li><li><strong>ROIHead</strong>ï¼Œé€šè¿‡ä¼ å…¥RPNä¸­ç”Ÿæˆçš„åŒºåŸŸï¼Œå¯¹æ¯ä¸ªåŒºåŸŸè¿›è¡Œåˆ†ç±»å’Œåæ ‡å›å½’ï¼Œæ­¤å¤„å’Œä¹‹å‰çš„Fast R-CNNç±»ä¼¼ã€‚</li></ol><h4 id="æ•°æ®é¢„å¤„ç†"><a href="#æ•°æ®é¢„å¤„ç†" class="headerlink" title="æ•°æ®é¢„å¤„ç†"></a>æ•°æ®é¢„å¤„ç†</h4><p>æ•°æ®é‡‡ç”¨å¸¸ç”¨çš„ç›®æ ‡æ£€æµ‹æ•°æ®åº“VOCæˆ–COCOï¼Œéœ€åšä»¥ä¸‹å¤„ç†ï¼š</p><ul><li>å¯¹æ¯ä¸ªå›¾ç‰‡,reshapeä¸ºè¾¹é•¿å°äºæˆ–ç­‰äº1000å’Œ600ï¼Œå…¶ä¸­ï¼ˆè‡³å°‘ä¸€ä¸ªç­‰äºï¼‰</li><li>å¯¹ç›¸åº”çš„<em>ground truth</em>ä¹ŸåšåŒæ ·å°ºåº¦çš„ç¼©æ”¾</li></ul><p>æœ€åè®­ç»ƒè¿‡ç¨‹ä¸­æ‰€éœ€è¦çš„å››ä¸ªå€¼åˆ†åˆ«ä¸ºï¼š</p><ul><li><em>images</em>: $3<em>H</em>W$å¤§å°</li><li><em>bboxes</em>: $4*K$, å…¶ä¸­$K$ä¸ºbboxesæ•°é‡ï¼Œåæ ‡å½¢å¦‚(Y_min, X_min, Y_max, X_max)</li><li><em>labels</em>: $(K, )$, å¯¹åº”Kä¸ªbboxesçš„labelsï¼Œåœ¨VOCä¸­ä¸º(0~19)</li><li><em>scale</em>: å›¾åƒç¼©æ”¾çš„å€æ•°ï¼ŒåŸå›¾$H^{â€˜} <em> W^{â€˜}$reshapeåˆ°$H </em> W$,åˆ™$scale=H^{â€˜} / H$</li></ul><h4 id="Extractor"><a href="#Extractor" class="headerlink" title="Extractor"></a>Extractor</h4><p><img src="https://pic2.zhimg.com/80/v2-28887eb4f69439e1384165da0ca20b6f_hd.jpg" alt="img"> </p><p>è¿™é‡Œä½¿ç”¨VGG16,å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ResNet101ï¼Œåœ¨VGGçš„å‰å››å±‚ï¼Œç”±äºè®­ç»ƒæ—¶ä¸ºäº†èŠ‚çº¦æ˜¾å­˜ï¼Œæ‰€ä»¥å°†å…¶å­¦ä¹ ç‡è®¾ç½®ä¸º0ï¼Œåœ¨<strong>Extractor</strong>éƒ¨åˆ†ï¼Œåªç”¨åˆ°äº†conv5_3ä¹‹å‰ï¼ŒåŠå›¾åƒreshapeåˆ°å¤§å°ä¸º$1000<em>600$ä¹‹åï¼Œä¼ å…¥åˆ°VGG16ä¸­ï¼Œåœ¨conv5_3å¤„è¾“å‡ºå›¾åƒçš„feature mapï¼Œåˆ°æ­¤å›¾åƒä¸‹é‡‡æ ·äº†16å€ï¼Œå¾—åˆ°äº†$C</em>(H/16)<em>(W/16)$ç‰¹å¾å›¾ï¼Œåœ¨æ­¤å…·ä½“ä¸º$512</em>62*38$ã€‚åœ¨conv5_3ä¹‹åè¿˜æœ‰ä¸¤ä¸ªå…¨è¿æ¥å±‚ï¼Œåœ¨extractorä¸­å¹¶æœªä½¿ç”¨ï¼Œä½†åœ¨ä¹‹åçš„ROIHeadä¸­ç”¨åˆ°äº†ã€‚</p><h4 id="Region-Proposal-Network"><a href="#Region-Proposal-Network" class="headerlink" title="Region Proposal Network"></a>Region Proposal Network</h4><p><strong>Anchor</strong></p><p>ä½œè€…é¦–å…ˆä¸€æ”¹ä¹‹å‰ï¼Œæå‡ºäº†Anchorï¼Œå³å°ºå¯¸å¤§å°å›ºå®šçš„å€™é€‰æ¡†ï¼Œåœ¨è®ºæ–‡ä¸­ä½¿ç”¨äº†ä¸‰ç§å°ºå¯¸(1:1,1:2,2:1)ï¼Œä¸‰ç§å¤§å°(128,256,512)ï¼Œå¾—åˆ°äº†9ä¸ªä¸åŒçš„anchor</p><p><img src="https://pic1.zhimg.com/80/v2-7abead97efcc46a3ee5b030a2151643f_hd.jpg" alt=""></p><p>è¿™9ä¸ªanchoråœ¨åˆšç”Ÿæˆçš„feature mapä¸­å·¦å³ä¸Šä¸‹ç§»åŠ¨ï¼Œå¯¹äºæ¯ä¸ªç‚¹éƒ½å¾—åˆ°äº†9ä¸ªanchorï¼Œè¿™æ ·å°±å¾—åˆ°äº†å…±$62<em>38</em>9$~20000ä¸ªanchor.å½“ç„¶è¿™20000ä¸ªanchorå¹¶ä¸ä¼šå…¨éƒ¨ä¼ ç»™ROIHeadè®­ç»ƒï¼Œåªä¼šä»ä¸­é€‰å–2000ä¸ªä¼ ç»™ä¹‹åã€‚</p><p><img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20180630165723.png" alt=""></p><p>åœ¨RPNä¸­å°±éœ€è¦å¯¹å€™é€‰æ¡†è¿›è¡Œåˆ†ç±»ï¼Œä½†æ­¤å¤„ä¸æ˜¯20åˆ†ç±»ï¼Œè€Œæ˜¯äºŒåˆ†ç±»ï¼Œå³åˆ¤æ–­æ˜¯å¦å«æœ‰ç‰©ä½“ã€‚åœ¨ç‰¹å¾å›¾çš„åŸºç¡€ä¸Šï¼Œåœ¨ä¸€ä¸ª3x3å·ç§¯ä¹‹åï¼Œåˆ†åˆ«ä½¿ç”¨$9<em>2$å’Œ$9</em>4$ä¸ª1x1çš„å·ç§¯æ ¸è¿›è¡Œå·ç§¯æ“ä½œï¼Œè¿™æ ·åŸæœ¬ç‰¹å¾å›¾ä¸º512x62x38ï¼Œåˆ™åˆ†åˆ«å·ç§¯åˆ°62x38x9*2ï¼Œå’Œ62x38x9x4ï¼Œè¿™æ ·å¾—åˆ°å¤§çº¦20000ä¸ªæ¡†çš„scoreå’Œåæ ‡ã€‚</p><h4 id="RPNç”ŸæˆRoIs"><a href="#RPNç”ŸæˆRoIs" class="headerlink" title="RPNç”ŸæˆRoIs"></a>RPNç”ŸæˆRoIs</h4><p>RPNçš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸ºä¹‹åçš„ROIHeadç”Ÿæˆå¤§çº¦RoIsï¼Œåœ¨ä»£ç ä¸­ä¸º(Proposal Creator)</p><ul><li>å¯¹äºæ¯å¼ å›¾ç‰‡çš„å¤§çº¦20000ä¸ªå€™é€‰æ¡†ï¼Œé¦–å…ˆå…ˆé€‰å–scoreè¾ƒå¤§çš„12000ä¸ªanchor</li><li>åˆ©ç”¨å›å½’çš„ä½ç½®å‚æ•°ï¼Œä¿®æ­£è¿™12000ä¸ªanchor,å¾—åˆ°RoIs</li><li>åˆ©ç”¨éæå¤§å€¼æŠ‘åˆ¶(NMS)ï¼Œé€‰å‡ºæ¦‚ç‡æœ€å¤§çš„2000ä¸ªRoIsã€‚</li></ul><p>æ³¨æ„ï¼šåœ¨Testæ—¶ï¼Œ12000å’Œ2000åˆ†åˆ«å˜ä¸º6000å’Œ300</p><h4 id="RPNè®­ç»ƒ"><a href="#RPNè®­ç»ƒ" class="headerlink" title="RPNè®­ç»ƒ"></a>RPNè®­ç»ƒ</h4><p>RPNè‡ªèº«ä¹Ÿè¦è®­ç»ƒï¼Œä»¥æ­¤é€‰å–æ›´å¥½çš„RoIsï¼Œæ­¤å¤„RPNä»20000ä¸ªé€‰å‡ºå¤§çº¦256ä¸ªä¾›è‡ªèº«è®­ç»ƒï¼Œå…¶ä¸­æ­£è´Ÿæ ·æœ¬å„å ä¸€åŠï¼Œé€‰æ‹©è¿‡ç¨‹å¦‚ä¸‹,ä»£ç ä¸­ä¸º<code>Anchor Target creator</code>ï¼š</p><ul><li>å¯¹äºæ¯ä¸ªground truth bboxï¼Œé€‰æ‹©å’Œå®ƒIOUæœ€é«˜çš„ä¸€ä¸ªanchorä½œä¸ºæ­£æ ·æœ¬</li><li>å¯¹äºæ¯ä¸ªanchorï¼Œè‹¥æœ‰ground truthå’Œå®ƒçš„IOUå¤§äº0.7ï¼Œåˆ™é€‰å–å®ƒä½œä¸ºæ­£æ ·æœ¬ï¼Œæ­£æ ·æœ¬çš„æ•°ç›®ä¸è¶…è¿‡128ï¼Œè‹¥ä¸å¤Ÿï¼Œåˆ™ç”±è´Ÿæ ·æœ¬å‡‘</li><li>éšæœºé€‰å–å’Œä»»æ„ground truthçš„IOUéƒ½å°äº0.3çš„anchorä½œä¸ºè´Ÿæ ·æœ¬ï¼Œæ•°ç›®ä¸º128</li></ul><p>å¯¹äºåˆ†ç±»åªæœ‰äºŒåˆ†ç±»ï¼Œå³è¦ä¹ˆä¸º1ï¼ˆå‰æ™¯ï¼‰ï¼Œ0ï¼ˆèƒŒæ™¯ï¼‰ï¼Œå›å½’åæ ‡åˆ™éœ€è¦æ”¹å˜ä¸€ä¸‹</p><p><img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20180630171202.png" alt=""></p><p>å…¶ä¸­åˆ†ç±»é‡‡ç”¨äº¤å‰ç†µæŸå¤±ï¼Œè€Œè®¡ç®—å›å½’åˆ™é‡‡ç”¨çš„æ˜¯<code>Smooth L1</code>æŸå¤±ï¼ŒåŒæ ·åœ¨è®¡ç®—<strong>å›å½’</strong>æŸå¤±æ—¶ï¼Œåªè®¡ç®—æ­£æ ·æœ¬çš„æŸå¤±ï¼Œè€Œä¸è®¡ç®—è´Ÿæ ·æœ¬çš„æŸå¤±ã€‚</p><h3 id="ROIHead"><a href="#ROIHead" class="headerlink" title="ROIHead"></a>ROIHead</h3><p><img src="https://pic1.zhimg.com/80/v2-5b0d1ca6e990fcdecd41280b69cd8622_hd.jpg" alt=""></p><p>RPNä¼šäº§ç”Ÿå¤§çº¦2000ä¸ªROIsï¼Œä½†å¹¶ä¸æ˜¯å…¨éƒ¨éƒ½è¦åœ¨ROIHeadä¸­è®­ç»ƒï¼Œè€Œæ˜¯é€šè¿‡<code>ProposalTargetCreator</code>é€‰å–128ä¸ªRoIsè¿›è¡Œè®­ç»ƒã€‚é€‰æ‹©çš„è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>RoIså’Œgt_bboxesçš„IoUå¤§äº0.5çš„é€‰æ‹©32ä¸ªä½œä¸ºæ­£æ ·æœ¬</li><li>IoUå°äºç­‰äº0æˆ–0.1(è‡ªå·±è®¾ç½®)é€‰æ‹©96ä¸ªä½œä¸ºè´Ÿæ ·æœ¬</li></ul><p>ä½†ç”±äºè¿™äº›å€™é€‰æ¡†çš„å¤§å°éƒ½ä¸ç›¸åŒï¼Œæ‰€ä»¥é‡‡ç”¨RoIPoolingå°†è¿™äº›å€™é€‰æ¡†poolingæˆç›¸åŒçš„å¤§å°(7x7,åœ¨VGGä¸­)ã€‚é€‰å–çš„æ¡†éœ€è¦æ˜ å°„åˆ°feature map ä¸­ï¼Œæ‰€ä»¥RoIpoolingå°†åŒºåŸŸéƒ½ç»Ÿä¸€ä¸‹é‡‡æ ·åˆ°$512\times7\times7$ï¼Œç”±äºé€‰å–äº†128ä¸ªï¼Œæ‰€ä»¥å°±å¾—åˆ°äº†$128\times512\times7\times7$å¤§å°çš„ç‰¹å¾å‘é‡ï¼Œä¹‹å‰VGGçš„å…¨è¿æ¥å±‚åœ¨è¿™é‡Œè¿˜éœ€è¦ç”¨åˆ°ï¼Œå°†ç‰¹å¾å‘é‡reshapeä¸ºä¸€ç»´çš„ä¹‹åï¼Œä¼ å…¥å…¨è¿æ¥å±‚ï¼Œå†åˆ†åˆ«ä¼ å…¥<strong>FC21</strong>å’Œ<strong>FC84</strong>å¾—åˆ°åˆ†ç±»ç»“æœå’Œåæ ‡ç»“æœï¼ŒæŸå¤±å‡½æ•°å’Œä¹‹å‰RPNä¸­é‡‡ç”¨çš„ç›¸åŒã€‚</p><p><img src="https://raw.githubusercontent.com/HandsomeCao/markdown-picture/master/20180630173140.png" alt=""></p><p>å®Œæ•´ç»“æ„å¦‚ä¸Šæ‰€ç¤ºã€‚</p><p><a href="https://zhuanlan.zhihu.com/p/32404424" target="_blank" rel="noopener">å‚è€ƒ</a></p>]]></content>
      
      
        <tags>
            
            <tag> ç›®æ ‡æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>K-è¿‘é‚»ç®—æ³•</title>
      <link href="/2018/06/05/knn/"/>
      <url>/2018/06/05/knn/</url>
      <content type="html"><![CDATA[<h2 id="K-è¿‘é‚»ç®—æ³•-KNN"><a href="#K-è¿‘é‚»ç®—æ³•-KNN" class="headerlink" title="K-è¿‘é‚»ç®—æ³•(KNN)"></a>K-è¿‘é‚»ç®—æ³•(KNN)</h2><blockquote><p>k-è¿‘é‚»ç®—æ³•é‡‡ç”¨æµ‹é‡ä¸åŒç‰¹å¾å€¼ä¹‹é—´çš„è·ç¦»æ–¹æ³•è¿›è¡Œåˆ†ç±»</p></blockquote><ul><li>ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼Œé€‚ç”¨äºåˆ†ç±»</li><li>ä¼˜ç‚¹ï¼šç²¾åº¦é«˜ï¼Œå¯¹å¼‚å¸¸å€¼ä¸æ•æ„Ÿï¼Œæ— æ•°æ®è¾“å…¥å‡å®šã€‚</li><li>ç¼ºç‚¹ï¼šè®¡ç®—å¤æ‚åº¦é«˜ï¼Œç©ºé—´å¤æ‚åº¦é«˜ã€‚</li><li>é€‚ç”¨æ•°æ®èŒƒå›´ï¼šæ•°å€¼å‹ï¼Œæ ‡ç§°å‹ã€‚</li></ul><h3 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h3><p>å¦‚æœå­˜åœ¨ä¸€ä¸ªæ ·æœ¬æ•°æ®é›†åˆï¼Œä¹Ÿç§°ä½œè®­ç»ƒæ ·æœ¬é›†ï¼Œå¹¶ä¸”æ ·æœ¬é›†ä¸­æ¯ä¸ªæ•°æ®éƒ½å­˜åœ¨<strong>æ ‡ç­¾</strong>ï¼Œå³æˆ‘ä»¬çŸ¥é“æ ·æœ¬é›†ä¸­æ¯ä¸€æ•°æ®ä¸æ‰€å±åˆ†ç±»çš„å¯¹åº”å…³ç³»ã€‚è¾“å…¥æ²¡æœ‰æ ‡ç­¾çš„æ–°æ•°æ®åï¼Œå°†æ–°æ•°æ®çš„æ¯ä¸ªç‰¹å¾ä¸æ ·æœ¬é›†ä¸­æ•°æ®å¯¹åº”çš„ç‰¹å¾è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åç®—æ³•æå–æ ·æœ¬é›†ä¸­ç‰¹å¾æœ€ç›¸ä¼¼æ•°æ®<strong>ï¼ˆæœ€è¿‘é‚»ï¼‰</strong>çš„åˆ†ç±»æ ‡ç­¾ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åªé€‰æ‹©æ ·æœ¬æ•°æ®é›†ä¸­å‰kä¸ªæœ€ç›¸ä¼¼çš„æ•°æ®ï¼Œè¿™å°±æ˜¯k-è¿‘é‚»ç®—æ³•ä¸­kçš„å‡ºå¤„ï¼Œé€šå¸¸kæ˜¯<strong>ä¸å¤§äº20</strong>çš„æ•´æ•°ã€‚æœ€åï¼Œé€‰æ‹©kä¸ªæœ€ç›¸ä¼¼æ•°æ®ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„åˆ†ç±»ï¼Œä½œä¸ºæ–°æ•°æ®çš„åˆ†ç±»ã€‚</p><h3 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h3><p>å¯¹æœªçŸ¥ç±»åˆ«å±æ€§çš„æ•°æ®é›†ä¸­çš„æ¯ä¸ªç‚¹ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ol><li>è®¡ç®—å·²çŸ¥ç±»åˆ«æ•°æ®é›†ä¸­çš„ç‚¹ä¸å½“å‰ç‚¹ä¹‹é—´çš„è·ç¦»ï¼›</li><li>æŒ‰ç…§è·ç¦»é€’å¢æ¬¡åºæ’åºï¼›</li><li>é€‰å–ä¸å½“å‰ç‚¹è·ç¦»æœ€å°çš„kä¸ªç‚¹ï¼›</li><li>ç¡®å®šå‰kä¸ªç‚¹æ‰€åœ¨ç±»åˆ«çš„å‡ºç°é¢‘ç‡ï¼›</li><li>è¿”å›å‰kä¸ªç‚¹å‡ºç°é¢‘ç‡æœ€é«˜çš„ç±»åˆ«ä½œä¸ºå½“å‰ç‚¹çš„é¢„æµ‹åˆ†ç±»</li></ol><p>å…¶ä¸­è®¡ç®—è·ç¦»é€šå¸¸é‡‡ç”¨<strong>æ¬§å¼è·ç¦»å…¬å¼</strong>ï¼š</p><script type="math/tex; mode=display">d=\sqrt{(xA_{0}-xB_{0})^{2}+(xA_{1}-xB_{1})^{2}}</script><h3 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h3><pre><code class="lang-python">import numpy as npimport operatordef CreateDataSet():    &quot;&quot;&quot;    Create some fake data    &quot;&quot;&quot;    group = np.array([[1.0,1.1],[1.0,1.0],[0,0],[0,0.1]])    labels = [&#39;A&#39;,&#39;A&#39;,&#39;B&#39;,&#39;B&#39;]    return group, labelsdef classify0(inX, dataSet, labels, k):    &quot;&quot;&quot;    KNN algorithm:    1. calculate the distance between every data from        sample with the target data.    2. sort these distances by ascending    3. get the top k data with smallest distance    4. confirm the frequnces of topk&#39;s class    5. return the highest frequncy of class      &quot;&quot;&quot;    dataSetSize = dataSet.shape[0]  # the amount of data    # calculate the distance between two points    diffMat = np.tile(inX, (dataSetSize, 1)) - dataSet    sqDiffMat = diffMat ** 2    sqDistances = sqDiffMat.sum(axis=1)    distances = sqDistances ** 0.5    sortedDistIndices = distances.argsort()    # choose the topk    classCount = {}    for i in range(k):        voteIlabel = labels[sortedDistIndices[i]]        classCount[voteIlabel] = classCount.get(voteIlabel, 0) + 1    sortedClassCount = sorted(classCount.items(),        key=operator.itemgetter(1), reverse=True)    return sortedClassCount[0][0]if __name__ == &#39;__main__&#39;:    group, labels = CreateDataSet()    output = classify0([0, 0], group, labels, 3)    print(output)</code></pre><p><a href="https://github.com/HandsomeCao/Machine-Learning-learn/tree/master/KNN" target="_blank" rel="noopener">ä»£ç </a></p>]]></content>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mAP</title>
      <link href="/2018/05/27/mAP/"/>
      <url>/2018/05/27/mAP/</url>
      <content type="html"><![CDATA[<h2 id="mAP-ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸­çš„æ€§èƒ½è¯„ä¼°"><a href="#mAP-ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸­çš„æ€§èƒ½è¯„ä¼°" class="headerlink" title="mAP - ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸­çš„æ€§èƒ½è¯„ä¼°"></a>mAP - ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸­çš„æ€§èƒ½è¯„ä¼°</h2><blockquote><p><strong>ç›®æ ‡æ£€æµ‹</strong>é—®é¢˜æ˜¯æŒ‡ï¼šç»™å®šä¸€ä¸ªå›¾åƒï¼Œæ‰¾åˆ°å…¶ä¸­çš„ç›®æ ‡ï¼Œæ‰¾åˆ°å®ƒä»¬çš„ä½ç½®ï¼Œå¹¶ä¸”å¯¹ç›®æ ‡è¿›è¡Œåˆ†ç±»ã€‚ç›®æ ‡æ£€æµ‹æ¨¡å‹é€šå¸¸æ˜¯åœ¨ä¸€ç»„å›ºå®šçš„ç±»ä¸Šè¿›è¡Œè®­ç»ƒçš„ï¼Œæ‰€ä»¥æ¨¡å‹åªèƒ½å®šä½å’Œåˆ†ç±»å›¾åƒä¸­çš„é‚£äº›ç±»ã€‚æ­¤å¤–ï¼Œç›®æ ‡çš„ä½ç½®é€šå¸¸æ˜¯è¾¹ç•ŒçŸ©é˜µçš„å½¢å¼ã€‚æ‰€ä»¥ï¼Œç›®æ ‡æ£€æµ‹éœ€è¦æ¶‰åŠå›¾åƒä¸­ç›®æ ‡çš„ä½ç½®ä¿¡æ¯å’Œå¯¹ç›®æ ‡è¿›è¡Œåˆ†ç±»ã€‚ å‡å€¼å¹³å‡ç²¾åº¦(<em>Mean Average Precision</em>)å¯¹äºè¯„ä¼°æ¨¡å‹å®šä½æ€§èƒ½ã€ç›®æ ‡æ£€æµ‹æ€§èƒ½å’Œåˆ†å‰²æ¨¡å‹æ€§èƒ½éƒ½æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</p></blockquote><h3 id="ç²¾ç¡®ç‡å’Œå¬å›ç‡"><a href="#ç²¾ç¡®ç‡å’Œå¬å›ç‡" class="headerlink" title="ç²¾ç¡®ç‡å’Œå¬å›ç‡"></a>ç²¾ç¡®ç‡å’Œå¬å›ç‡</h3><p>è¦ç†è§£ç²¾ç¡®ç‡(<em>presicion</em>)å’Œå¬å›ç‡(<em>recall</em>)é¦–å…ˆè¦ç†è§£ä»¥ä¸‹æ¦‚å¿µï¼š</p><ul><li>TP â€”â€”- å°†æ­£ç±»é¢„æµ‹ä¸ºæ­£ç±»æ•°</li><li>FN â€”â€”- å°†æ­£ç±»é¢„æµ‹ä¸ºè´Ÿç±»æ•°</li><li>FP â€”â€”â€” å°†è´Ÿç±»é¢„æµ‹ä¸ºæ­£ç±»æ•°</li><li>TN â€”â€”- å°†è´Ÿç±»é¢„æµ‹ä¸ºè´Ÿç±»æ•°</li></ul><p>ä¸¾ä¸ªä¾‹å­:</p><blockquote><p>å‡è®¾æˆ‘ä»¬æ‰‹ä¸Šæœ‰60ä¸ªæ­£æ ·æœ¬ï¼Œ40ä¸ªè´Ÿæ ·æœ¬ï¼Œæˆ‘ä»¬è¦æ‰¾å‡ºæ‰€æœ‰çš„æ­£æ ·æœ¬ï¼Œç³»ç»ŸæŸ¥æ‰¾å‡º50ä¸ªï¼Œå…¶ä¸­åªæœ‰40ä¸ªæ˜¯çœŸæ­£çš„æ­£æ ·æœ¬ï¼Œè®¡ç®—ä¸Šè¿°å„æŒ‡æ ‡ ï¼š</p></blockquote><ul><li><strong>TP = 40</strong>    (æ£€æµ‹å‡ºçš„40ä¸ªä¸ºæ­£)</li><li><strong>FN = 20</strong>   (æœ‰60ä¸ªæ­£ï¼Œåªæ£€æµ‹å‡º40ä¸ªä¸ºæ­£ï¼Œæ‰€ä»¥60-40=20)</li><li><strong>FP = 10</strong>   (æ‰¾å‡ºäº†50ä¸ªï¼Œä½†åªæœ‰40ä¸ºæ­£ï¼Œ50-40=10)</li><li><strong>TN = 30</strong>  (æ‰¾å‡ºä¸­çš„50ä¸ªï¼Œåªæœ‰40ä¸ªä¸ºæ­£ï¼Œä¹Ÿå³å…¶ä¸­10ä¸ªä¸ºè´Ÿï¼Œæ‰€ä»¥40-10=30)</li></ul><p>è€Œ<strong>ç²¾ç¡®ç‡</strong>æ˜¯é’ˆå¯¹<strong>é¢„æµ‹ç»“æœ</strong>è€Œè¨€çš„ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯é¢„æµ‹ä¸ºæ­£çš„æ ·æœ¬ä¸­æœ‰å¤šå°‘æ˜¯çœŸæ­£çš„æ­£æ ·æœ¬ã€‚é‚£ä¹ˆé¢„æµ‹ä¸ºæ­£å°±æœ‰ä¸¤ç§å¯èƒ½äº†ï¼Œä¸€ç§å°±æ˜¯æŠŠæ­£ç±»é¢„æµ‹ä¸ºæ­£ç±»<strong>(TP)</strong>ï¼Œå¦ä¸€ç§å°±æ˜¯æŠŠè´Ÿç±»é¢„æµ‹ä¸ºæ­£ç±»(<strong>FP</strong>)ï¼Œä¹Ÿå°±æ˜¯ </p><script type="math/tex; mode=display">P = \frac{TP}{TP+FP}</script><p>è€Œ<strong>å¬å›ç‡</strong>æ˜¯é’ˆå¯¹æˆ‘ä»¬åŸæ¥çš„<strong>æ ·æœ¬</strong>è€Œè¨€çš„ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯æ ·æœ¬ä¸­çš„æ­£ä¾‹æœ‰å¤šå°‘è¢«é¢„æµ‹æ­£ç¡®äº†ã€‚é‚£ä¹Ÿæœ‰ä¸¤ç§å¯èƒ½ï¼Œä¸€ç§æ˜¯æŠŠåŸæ¥çš„æ­£ç±»é¢„æµ‹æˆæ­£ç±»<strong>(TP)</strong>ï¼Œå¦ä¸€ç§å°±æ˜¯æŠŠåŸæ¥çš„æ­£ç±»é¢„æµ‹ä¸ºè´Ÿç±»(<strong>FN)</strong>:</p><script type="math/tex; mode=display">R = \frac{TP}{TP+FN}</script><blockquote><p>ç®€å•æ¥è¯´ï¼Œ<strong>ç²¾ç¡®ç‡</strong>æ˜¯æŒ‡å¯¹äº<strong>æ£€æµ‹å‡ºçš„</strong>æ ·æœ¬ä¸­ï¼Œä¸ºæ­£çš„æ ·æœ¬æ‰€å æ¯”ä¾‹ã€‚è€Œ<strong>å¬å›ç‡</strong>æ˜¯æŒ‡<strong>æœ¬æ¥çš„ä¸ºæ­£çš„æ ·æœ¬</strong>ä¸­ï¼Œæ£€æµ‹å‡ºçš„æ­£æ ·æœ¬æ‰€å çš„æ¯”ä¾‹ã€‚</p></blockquote><p>æ‰€ä»¥ï¼š</p><p><strong>ç²¾ç¡®ç‡</strong>(<em>precision</em>) = $ TP/(TP+FP) = 4/5$</p><p><strong>å¬å›ç‡</strong>(recall) = $ TP/(TP+FN) = 2/3 $ </p><p>é¢å¤–ï¼š</p><p><strong>å‡†ç¡®ç‡</strong>(<em>accuracy</em>) = é¢„æµ‹å¯¹çš„/æ‰€æœ‰ = $(TP+TN)/(TP+FN+FP+TN) = \frac{7}{10} $</p><p><img src="http://s9.sinaimg.cn/mw690/002T2ChPgy6XQdjij4Ae8" alt=""></p><h3 id="IoU"><a href="#IoU" class="headerlink" title="IoU"></a>IoU</h3><blockquote><p> <strong>loU(äº¤å¹¶æ¯”)</strong>æ˜¯æ¨¡å‹æ‰€é¢„æµ‹çš„æ£€æµ‹æ¡†å’ŒçœŸå®(<em>ground truth</em>)çš„æ£€æµ‹æ¡†çš„<strong>äº¤é›†å’Œå¹¶é›†ä¹‹é—´çš„æ¯”ä¾‹</strong>ã€‚è¿™ä¸ªæ•°æ®ä¹Ÿè¢«ç§°ä¸º<em>Jaccard</em>æŒ‡æ•°ã€‚ </p></blockquote><p><img src="https://img-blog.csdn.net/20161121150037641" alt=""></p><p>å¯¹äºå›¾åƒä¸­çš„GroundTruthæ¡†$A$ï¼Œå…¶æ£€æµ‹å‡ºçš„çŸ©å½¢æ¡†ä¸º$B$ï¼Œåˆ™å…¶IoU(Intersection over Union)å¯ä»¥è®¡ç®—å¦‚ä¸‹:</p><script type="math/tex; mode=display">IoU=\frac{A\cap B}{A \cup B}</script><h3 id="AP"><a href="#AP" class="headerlink" title="AP"></a>AP</h3><ul><li>å¯¹äºPASCAL_VOC2007ï¼Œ é¦–å…ˆè®¾å®šä¸€ç»„é˜ˆå€¼ï¼Œ$[0, 0.1, 0.2, â€¦, 1]$ã€‚ç„¶åå¯¹äº$recall$å¤§äºæ¯ä¸€ä¸ªé˜ˆå€¼ï¼ˆæ¯”å¦‚$recall&gt;0.3$ï¼‰ï¼Œæˆ‘ä»¬éƒ½ä¼šå¾—åˆ°ä¸€ä¸ªå¯¹åº”çš„æœ€å¤§$precision$ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±è®¡ç®—å‡ºäº†$11$ä¸ª$precision$ã€‚é€šè¿‡å¯¹è¿™11ä¸ªæ•£ç‚¹åšå‡ºPRå›¾ï¼Œ<strong>AP</strong>å³ä¸ºè¿™11ä¸ª$precision$å¯¹äºæ¯ä¸ª$recall$å€¼æ‰€åšçš„æ›²çº¿ä¸‹çš„<strong>é¢ç§¯</strong>ã€‚è¿™ç§æ–¹æ³•è‹±æ–‡å«åš$11-point interpolated average precision$ã€‚</li><li>å½“ç„¶<strong>PASCAL VOC CHALLENGE</strong>è‡ª2010å¹´åå°±æ¢äº†å¦ä¸€ç§è®¡ç®—æ–¹æ³•ã€‚æ–°çš„è®¡ç®—æ–¹æ³•å‡è®¾è¿™$N$ä¸ªæ ·æœ¬ä¸­æœ‰$M$ä¸ªæ­£ä¾‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šå¾—åˆ°Mä¸ª$recall$å€¼$ï¼ˆ1/M, 2/M, â€¦, M/Mï¼‰$,å¯¹äºæ¯ä¸ª$recall$å€¼$r$ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºå¯¹åº”$ï¼ˆrâ€™ &gt; rï¼‰$çš„<strong>æœ€å¤§</strong>$precision$ï¼Œç„¶åå¯¹è¿™$M$ä¸ª$precision$å€¼åŒæ ·åšå‡ºPRæ›²çº¿ï¼Œæ±‚æ­¤æ›²çº¿ä¸‹çš„é¢ç§¯ã€‚</li></ul><p>å®é™…å¤šç±»åˆ«åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¸æ»¡è¶³åªé€šè¿‡top-5(<strong>top-#æ˜¯æŒ‡é€šè¿‡scoreæ’åºå¾—åˆ°çš„é¢„æµ‹åºåˆ—</strong>)æ¥è¡¡é‡ä¸€ä¸ªæ¨¡å‹çš„å¥½åï¼Œè€Œæ˜¯éœ€è¦çŸ¥é“ä»top-1åˆ°top-Nï¼ˆNæ˜¯æ‰€æœ‰æµ‹è¯•æ ·æœ¬ä¸ªæ•°ï¼‰å¯¹åº”çš„precisionå’Œrecallã€‚æ˜¾ç„¶éšç€æˆ‘ä»¬é€‰å®šçš„æ ·æœ¬è¶Šæ¥ä¹Ÿå¤šï¼Œrecallä¸€å®šä¼šè¶Šæ¥è¶Šé«˜ï¼Œè€Œprecisionæ•´ä½“ä¸Šä¼šå‘ˆä¸‹é™è¶‹åŠ¿ã€‚æŠŠrecallå½“æˆæ¨ªåæ ‡ï¼Œprecisionå½“æˆçºµåæ ‡ï¼Œå³å¯å¾—åˆ°å¸¸ç”¨çš„precision-recallæ›²çº¿ã€‚è¿™ä¸ªä¾‹å­çš„precision-recallæ›²çº¿å¦‚ä¸‹ï¼š </p><p><img src="http://s10.sinaimg.cn/mw690/002T2ChPgy6XQddBz7ze9" alt=""></p><h3 id="mAP"><a href="#mAP" class="headerlink" title="mAP"></a>mAP</h3><ul><li>æ±‚å‡ºæ¯ä¸ªç±»åˆ«çš„APï¼Œä¹‹ååªéœ€è¦å¯¹æ¯ä¸ªç±»åˆ«çš„APç›¸åŠ æ±‚å¹³å‡å€¼ï¼Œå³å¾—åˆ°mAPã€‚</li></ul><p>å…·ä½“å¯å‚è€ƒè¿™ç¯‡<a href="http://blog.sina.com.cn/s/blog_9db078090102whzw.html" target="_blank" rel="noopener">åšæ–‡</a></p>]]></content>
      
      
        <tags>
            
            <tag> ç›®æ ‡æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>dockerä½¿ç”¨</title>
      <link href="/2018/05/13/docker/"/>
      <url>/2018/05/13/docker/</url>
      <content type="html"><![CDATA[<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p><a href="www.docker.com">Docker</a>æ˜¯ä¸€ä¸ª<strong>å¼€æº</strong>çš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linuxæœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚æŒ‰ç†è¯´ï¼ŒDockerå¹¶ä¸æ˜¯ä¸“é—¨ç”¨äºæ·±åº¦å­¦ä¹ çš„å·¥å…·ï¼Œå®ƒè¿ç”¨éå¸¸å¹¿æ³›ï¼Œå¯¹äºä»»ä½•ç¼–ç¨‹çš„é¡¹ç›®ï¼ŒDockeréƒ½èƒ½æä¾›å¾ˆå¥½çš„å¸®åŠ©ã€‚</p><p>åœ¨å®éªŒå®¤ä¸­éœ€è¦ä½¿ç”¨Dockerçš„åŸå› ä¸»è¦æ˜¯ä¸ºäº†</p><blockquote><p>é˜²æ­¢åœ¨æœåŠ¡å™¨ä¸­ç›¸äº’å½±å“å’Œç ´ååº•å±‚ç¯å¢ƒï¼Œä»è€Œä½¿ç”¨Dockerä¸ºæ¯ä¸ªäººç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿçš„å•ç‹¬çš„ç¯å¢ƒ</p></blockquote><p>è¿™æ˜¯ç›¸å½“æœ‰ç”¨çš„ï¼Œå¯¹äºæ¯ä¸ªç”Ÿäº§ç¯å¢ƒï¼Œéƒ½å¯ä»¥ç”Ÿäº§ä¸€ä¸ªå•ç‹¬çš„<strong>å®¹å™¨</strong>, åŒæ—¶ä¸å…¶ä»–ç”Ÿäº§ç¯å¢ƒç›¸éš”ç¦»ã€‚è¿™å’Œè™šæ‹Ÿæœºä¼¼ä¹æœ‰ç‚¹ç±»ä¼¼ï¼Œä½†ç›¸æ¯”è¾ƒäºè™šæ‹Ÿæœºï¼ŒDockeræ‰€ç”Ÿæˆçš„å®¹å™¨å…·æœ‰<strong>æ›´å¿«é€Ÿï¼Œæ›´è½»é‡</strong> çš„æ•ˆæœã€‚åœ¨Dockerä¸­æœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µ</p><ul><li><strong>å®¹å™¨</strong>(container)ï¼Œå…¶å¯¹åº”äºé¢å‘å¯¹è±¡æ–¹æ³•ä¸­çš„<strong>å¯¹è±¡</strong></li><li><strong>é•œåƒ</strong>(image)ï¼Œ å…¶å¯¹åº”äºé¢å‘å¯¹è±¡æ–¹æ³•ä¸­çš„<strong>ç±»</strong></li></ul><p>æ‰€ä»¥ä½¿ç”¨Dockerçš„è¿‡ç¨‹é€šå¸¸ä¸ºï¼š</p><ol><li>è‡ªå·±æˆ–è€…æ‰¾åˆ°ä¸€ä¸ªåˆ«äººé…å¥½çš„é€‚åˆè‡ªå·±ç”Ÿäº§ç¯å¢ƒçš„é•œåƒã€‚é€šå¸¸è‡ªå·±é…é•œåƒæ˜¯é€šè¿‡<strong>DockerFile</strong>æ–‡ä»¶</li></ol><pre><code class="lang-bash">åˆ—å‡ºæœ¬æœºçš„æ‰€æœ‰ image æ–‡ä»¶ã€‚$ docker imagesåˆ é™¤ image æ–‡ä»¶$ docker image rm [imageName]</code></pre><p>image æ–‡ä»¶æ˜¯é€šç”¨çš„ï¼Œä¸€å°æœºå™¨çš„ image æ–‡ä»¶æ‹·è´åˆ°å¦ä¸€å°æœºå™¨ï¼Œç…§æ ·å¯ä»¥ä½¿ç”¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡ä½¿ç”¨åˆ«äººåˆ¶ä½œå¥½çš„ image æ–‡ä»¶ï¼Œè€Œä¸æ˜¯è‡ªå·±åˆ¶ä½œã€‚å³ä½¿è¦å®šåˆ¶ï¼Œä¹Ÿåº”è¯¥åŸºäºåˆ«äººçš„ image æ–‡ä»¶è¿›è¡ŒåŠ å·¥ï¼Œè€Œä¸æ˜¯ä»é›¶å¼€å§‹åˆ¶ä½œã€‚</p><pre><code class="lang-bash"># pull å‘½ä»¤ä»å®˜ç½‘æŠ“å–hello-worldé•œåƒ$ docker image pull library/hello-world</code></pre><ol><li>åˆ©ç”¨å¾—åˆ°çš„imageæ–‡ä»¶ï¼Œç”Ÿæˆå®¹å™¨å®ä¾‹</li></ol><pre><code class="lang-bash">$ docker container run hello-world</code></pre><p>åœ¨dockerä¸­æœ€å¸¸ç”¨çš„å°±æ˜¯<code>docker run</code>å‘½ä»¤ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ã€‚è¿™é‡Œå°±ç”¨å®éªŒå®¤æ‰€ç”¨çš„<code>docker run</code>å‘½ä»¤å±•ç°å…¶æ¯ä¸ªå‚æ•°çš„æ„ä¹‰</p><pre><code class="lang-bash">$ docker run -p 7981:8888 -it --name=[å®¹å™¨åç§°] -v /home/cao/workspace:/root/workspace --device /dev/nvidia-uvm --device /dev/nvidia0 --device /dev/nvidia1 [é•œåƒåç§°] /bin/bash</code></pre><ul><li><strong>-p</strong> : ç«¯å£æ˜ å°„ï¼Œå³å®¹å™¨çš„8888ç«¯å£æ˜ å°„åˆ°æœ¬æœºçš„7981ç«¯å£</li><li><strong>-it</strong>  : è¡¨ç¤ºè¿›å…¥å®¹å™¨ä¹‹åï¼Œè¿›å…¥å‘½ä»¤è¡Œäº¤äº’æ¨¡å¼</li><li><strong>â€”name</strong> : æŒ‡å®šç”Ÿæˆå®¹å™¨çš„åç§°ï¼Œ<em>ä¸€å®šè¦æŒ‡å®š</em>ã€‚</li><li><strong>-v</strong>  : è·¯å¾„æ˜ å°„ï¼Œå³å®¹å™¨çš„<em>/root/workspace</em>ï¼Œ ä¸æœ¬æœºçš„<em>/home/cao/workspace</em> ç›¸äº’æŒ‚è½½ï¼Œæ‰€ä»¥ä¸èƒ½è½»æ˜“åˆ é™¤</li><li><strong>â€”device</strong> : æ˜ å°„æœ¬æœºçš„æŒ‡å®šæ˜¾å¡</li></ul><p>è¿™æ ·åœ¨ç”Ÿæˆä¸€ä¸ªå®¹å™¨ä¹‹åï¼Œé€šå¸¸å°±åªéœ€è¦å¯¹æ­¤å®¹å™¨è¿›è¡Œæ“ä½œï¼Œè€Œç”Ÿäº§ç¯å¢ƒå…¨ç”±<code>docker attach [å®¹å™¨åç§°]</code>è¿›å…¥å®¹å™¨ä¹‹ä¸­æ“ä½œã€‚ä½¿ç”¨<code>docker -h</code>å¯æŸ¥çœ‹å…¨éƒ¨å¸®åŠ©ã€‚</p>]]></content>
      
      
        <tags>
            
            <tag> docker å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å·ç§¯ç¥ç»ç½‘ç»œ</title>
      <link href="/2018/05/13/cnn-basic/"/>
      <url>/2018/05/13/cnn-basic/</url>
      <content type="html"><![CDATA[<h3 id="å·ç§¯"><a href="#å·ç§¯" class="headerlink" title="å·ç§¯"></a>å·ç§¯</h3><blockquote><p> <strong>å·ç§¯å±‚</strong>æ˜¯å·ç§¯ç¥ç»ç½‘ç»œ(<em>Convolutional Neural Network</em>)ä¸­çš„åŸºæœ¬æ“ä½œã€‚å…¶ä½¿ç”¨ä¸€ä¸ª<strong>å·ç§¯æ ¸</strong>é€šè¿‡å¯¹è¾“å…¥å±‚è¿›è¡Œå·ç§¯æ“ä½œï¼Œä»è€Œå¯ä»¥æå–åˆ°å›¾åƒä¸­çš„é«˜å±‚ä¿¡æ¯ã€‚</p></blockquote><p>å‡è®¾è¾“å…¥å›¾åƒæ˜¯ä¸‹å›¾ä¸­çš„ä¸€ä¸ª$6*6$çš„çŸ©é˜µ,å…¶ä¸­æ¯ä¸ªæ ¼ä»£è¡¨äº†å›¾åƒç‚¹çš„åƒç´ å€¼ã€‚</p><p><img src="https://i.imgur.com/In87wix.png" alt=""></p><p>è®¾ç½®å…¶å·ç§¯æ ¸ï¼ˆ<em>kernel</em>ï¼‰ä¸º$3*3$çš„çŸ©é˜µï¼Œå·ç§¯æ ¸ä¸­çš„å‚æ•°ä¸åŒï¼Œå¯å¯¼è‡´å…¶å·ç§¯å¾—åˆ°çš„ç»“æœä¸åŒ:</p><p><img src="https://i.imgur.com/Dn0HGFv.png" alt=""></p><p>åŒæ—¶ï¼Œå‡å®šå·ç§¯æ“ä½œæ¯åšä¸€æ¬¡å·ç§¯ï¼Œå·ç§¯æ ¸ç§»åŠ¨ä¸€ä¸ªåƒç´ ä½ç½®ï¼Œå³å·ç§¯çš„<strong>æ­¥é•¿</strong>(<em>stride</em>)ä¸º1ã€‚ç¬¬ä¸€æ¬¡å·ç§¯æ“ä½œä»å›¾åƒ$(0,0)$åƒç´ å¼€å§‹ï¼Œç”±å·ç§¯æ ¸ä¸­çš„å‚æ•°ä¸å¯¹åº”ä½ç½®å›¾åƒåƒç´ <strong>é€ä½ç›¸ä¹˜åç´¯åŠ </strong>ä½œä¸ºä¸€æ¬¡å·ç§¯ç»“æœã€‚</p><p><img src="https://i.imgur.com/OyxUEt2.png" alt=""></p><p>å¯¹äº<strong>å·ç§¯æ ¸1</strong>(<em>filter1</em>)ï¼Œå…¶å¯¹äº$(0,0)â€‹$ä½ç½®è¿›è¡Œå·ç§¯æ“ä½œ:</p><script type="math/tex; mode=display">Conv_{out}=\sum{a_{i}b_{i}=}1*1+0*(-1)+0*(-1)+0*(-1)+1*1+0*(-1)+0*(-1)+1*1=3</script><p>å½“æ­¥é•¿ä¸º$1$æ—¶ï¼Œå·ç§¯æ ¸æŒ‰ç…§è¡¥å¿å¤§å°åœ¨è¾“å…¥å›¾åƒ<strong>ä»å·¦åˆ°å³ä»ä¸Šåˆ°ä¸‹</strong>ä¾æ¬¡å°†å·ç§¯æ“ä½œè¿›è¡Œä¸‹å»ï¼Œæœ€ç»ˆè¾“å‡ºä¸€ä¸ª$4<em>4$å¤§å°çš„<em>*å·ç§¯ç‰¹å¾</em></em>ï¼ŒåŒæ—¶è¿™å·ç§¯ç‰¹å¾å°†ä½œä¸ºä¸‹ä¸€å±‚æ“ä½œçš„è¾“å…¥ã€‚</p><p><img src="https://i.imgur.com/NdLlBtZ.png" alt=""></p><p>ä¸ä¹‹ç±»ä¼¼ï¼Œè‹¥ä¸‰ç»´æƒ…å½¢ä¸‹çš„å·ç§¯å±‚$l$çš„è¾“å…¥å¼ é‡ä¸º$x^{l}\in R^{H^{l}\times W^{l} \times D^{l}}$,è¯¥å±‚çš„å·ç§¯æ ¸ä¸º$f^{l}\in R^{H^{l}\times W^{l} \times D^{l}}$ã€‚ä¸‰ç»´è¾“å…¥æ—¶ï¼Œå·ç§¯æ“ä½œå®é™…ä¸Šåªæ˜¯å°†äºŒç»´å·ç§¯æ‰©å±•åˆ°äº†ç›¸åº”ä½ç½®çš„æ‰€æœ‰é€šé“ä¸Šï¼Œæœ€ç»ˆå°†ä¸€æ¬¡å·ç§¯å¤„ç†çš„æ‰€æœ‰$HWD^{l}$ä¸ªå…ƒç´ æ±‚å’Œä½œä¸ºè¯¥ä½ç½®çš„å·ç§¯ç»“æœã€‚</p><p>è‹¥è¿›ä¸€æ­¥ï¼Œç±»ä¼¼$f^{l}$è¿™æ ·çš„å·ç§¯æ ¸æœ‰$D$ä¸ªï¼Œåˆ™åœ¨åŒä¸€ä¸ªä½ç½®å¯å¾—åˆ°$1 \times 1 \times 1 \times D$ç»´åº¦çš„å·ç§¯è¾“å‡ºï¼Œè€Œ$D$å³ä¸ºç¬¬$l+1$å±‚ç‰¹å¾$x^{l+1}$çš„é€šé“æ•°$D^{l+1}$ã€‚å¯¹äºä¸‰ç»´å›¾åƒï¼Œå½¢å¼åŒ–çš„å·ç§¯æ“ä½œä¸º:</p><script type="math/tex; mode=display">y_{i^{l+1},j^{l+1},d}=\sum_{i=0}^{H}\sum_{j=0}^{W}\sum_{d^{l}=0}^{D^{l}}f_{i,j,d^{l},d} \times x_{i^{l+1}+i, j^{l+1}+j,d^{l}}^{l}</script><p>å…¶ä¸­$(i^{l+1},j^{l+1})$ä¸ºå·ç§¯ç»“æœçš„ä½ç½®åæ ‡ï¼Œåœ¨å·ç§¯å±‚ä¸­ï¼Œ$f$å¯è§†ä½œå­¦ä¹ åˆ°çš„ç½‘ç»œä¸­çš„æƒé‡(<em>weight</em>)ï¼Œå¯ä»¥å‘ç°è¯¥é¡¹æƒé‡å¯¹ä¸åŒä½ç½®çš„æ‰€æœ‰è¾“å…¥éƒ½æ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå·ç§¯æ ¸æ—¶ä½œç”¨äºä¸åŒçš„åŒºåŸŸçš„ï¼Œè¿™ä¹Ÿå°±æ˜¯å·ç§¯ç¥ç»ç½‘ç»œä¸­çš„<strong>æƒå€¼å…±äº«</strong>ç‰¹æ€§ï¼Œå½“ç„¶é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ä¸ºå·ç§¯æ“ä½œè®¾å®šå…¶ç¥ç»å…ƒä¸­çš„<strong>åç½®é¡¹</strong>ï¼Œå½“ç„¶ä¹Ÿå¯å°†å…¶è®¾ç½®ä¸º0ã€‚</p><p><strong>é›¶å¡«å……</strong>ï¼š</p><hr><p>å¯è§ï¼Œå¯¹äºä¸Šé¢ä»‹ç»çš„å·ç§¯æ“ä½œï¼Œå¯¹äºä¸€å¼ è¾“å…¥å›¾åƒï¼Œè¿›è¡Œä¸æ–­çš„å·ç§¯æ“ä½œï¼Œå¾—åˆ°çš„è¾“å‡ºç‰¹å¾å°ºå¯¸å°†åœ¨ä¸æ–­<strong>å‡å°</strong>ï¼Œæœ‰æ—¶è¿™æ ·æ˜¯ä¸å¯å–çš„ï¼Œå› ä¸ºæœ€ç»ˆçš„è¾“å‡ºé€æ¸å‡å°åï¼Œæ‰€å­¦åˆ°çš„å›¾åƒç‰¹å¾ä¹Ÿæ‰€å‰©æ— å‡ äº†ã€‚æ‰€ä»¥è¿™é‡Œæœ‰ä¸ªä¿è¯å›¾åƒè¾“å‡ºä¸å†å‡å°çš„æ–¹æ³•ï¼Œç§°ä¸º<strong>é›¶å¡«å……<em>(Zero padding)</em></strong>ã€‚</p><p><img src="https://i.imgur.com/7ccpHke.png" alt=""></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå³æ˜¯åœ¨å·ç§¯æ“ä½œä¸­è®¾ç½®$padding=1$ï¼Œä¹Ÿå°±æ˜¯åœ¨è¾¹ç¼˜åƒç´ å‘¨å›´å†ä»¥1ä¸ª0å¡«å……ã€‚å¯¹äºæœ¬æ¥çš„è¾“å…¥ä¸º$6 \times6$å¤§å°çš„å›¾åƒï¼Œä»¥å·ç§¯æ ¸ä¸º$3 \times 3$ï¼Œæ­¥é•¿ä¸º$1$è¿›è¡Œå·ç§¯ï¼Œä¼šå¾—åˆ°$4 \times 4$å¤§å°çš„è¾“å‡ºå›¾åƒã€‚ä½†å½“<strong>åŠ ä¸Šé›¶å¡«å……</strong>ä¹‹åï¼Œè¾“å…¥å›¾åƒä¹Ÿå°±å¯çœ‹ä½œæ˜¯$8 \times 8$å¤§å°ï¼Œè¿›è¡ŒåŒæ ·çš„å·ç§¯æ“ä½œï¼Œè¾“å‡ºå´å¾—åˆ°äº†$6 \times 6$å¤§å°çš„å›¾åƒï¼Œå’Œè¾“å…¥ä¿æŒä¸å˜ï¼Œè¿™æ ·ä¹Ÿå°±èƒ½<strong>å¢åŠ ç½‘ç»œä¸­çš„å·ç§¯æ“ä½œï¼Œå­¦åˆ°æ›´ä¸ºé«˜å±‚çš„ç‰¹å¾</strong>ã€‚</p><p>æ‰€ä»¥åœ¨å·ç§¯æ“ä½œä¸­æœ‰ä¸‰ä¸ªé‡è¦çš„<strong>è¶…å‚æ•°</strong>(<em>Hyper parameters</em>)ï¼š</p><ul><li><strong>å·ç§¯æ ¸å¤§å°(<em>filter size</em>)</strong>: $(f \times f)$</li><li><strong>å·ç§¯æ­¥é•¿(<em>filter stride</em>)</strong>ï¼š$s$</li><li><strong>é›¶å¡«å……(<em>padding</em>)</strong>: $p$</li></ul><p>å¯¹äºè¾“å…¥å›¾åƒå¤§å°ä¸º$n \times n$ï¼Œå¯¹äº<strong>è¾“å‡ºå°ºå¯¸</strong>å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„ä¸€èˆ¬å…¬å¼:</p><script type="math/tex; mode=display">\lfloor\frac{n+2p-f}{s}+1\rfloor \times \lfloor\frac{n+2p-f}{s}+1\rfloor</script><p>å½“ç„¶ï¼Œåˆé€‚çš„è¶…å‚æ•°è®¾ç½®ä¼šå¯¹æ¨¡å‹å¸¦æ¥æ„æƒ³ä¸åˆ°çš„æ•ˆæœæå‡ã€‚åœ¨<strong>pytorch</strong>ä¸­ï¼Œå¯¹äºäºŒç»´å›¾åƒçš„å·ç§¯æ“ä½œï¼Œä½¿ç”¨<code>nn.Conv2d</code>è¡¨ç¤ºã€‚</p><h3 id="æ± åŒ–"><a href="#æ± åŒ–" class="headerlink" title="æ± åŒ–"></a>æ± åŒ–</h3><blockquote><p>åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œæ± åŒ–å±‚å¾€å¾€åœ¨å·ç§¯å±‚çš„åé¢ï¼Œé€šè¿‡æ± åŒ–æ¥<strong>é™ä½</strong>å·ç§¯å±‚è¾“å‡ºçš„ç‰¹å¾å‘é‡ï¼ŒåŒæ—¶æ”¹å–„ç»“æœï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚</p></blockquote><p>æ± åŒ–é€šå¸¸ç”¨çš„ä¸¤ç§æ–¹æ³•ä¸ºï¼š<strong>æœ€å¤§å€¼æ± åŒ–</strong>(Max-Pooling)å’Œ<strong>å¹³å‡å€¼æ± åŒ–</strong>(Average-Pooling)ã€‚</p><ul><li><strong>æœ€å¤§å€¼æ± åŒ–</strong>ï¼š</li></ul><script type="math/tex; mode=display">y_{i^{l+1},j^{l+1},d}=max(x_{i^{l+1} \times H+I, j^{l+1} \times W+j,d^{l}}^{l})</script><ul><li><strong>å¹³å‡å€¼æ± åŒ–</strong>:</li></ul><script type="math/tex; mode=display">y_{i^{l+1},j^{l+1},d}=\frac{1}{HW}\sum x_{i^{l+1} \times H+I, j^{l+1} \times W+j,d^{l}}^{l}</script><p>å¯¹äºå·ç§¯åå¾—åˆ°çš„å›¾åƒç‰¹å¾ï¼Œ<em>Max-Pooling</em>å¯å½¢è±¡è¡¨ç¤ºä¸º:</p><p><img src="https://i.imgur.com/yyCG6On.png" alt=""></p><p>è¿™é‡Œæ± åŒ–çš„æ ¸å¤§å°é€‰æ‹©ä¸º$(2 \times 2)$ï¼Œä¹Ÿå°±æ˜¯å¯¹äºç¬¬ä¸€ä¸ªå—ä¸­ï¼Œé€‰æ‹©æœ€å¤§å€¼7å¾—åˆ°è¾“å‡ºå€¼ã€‚å½“ç„¶ï¼Œå¦‚æœæ˜¯å¹³å‡å€¼æ± åŒ–ï¼Œä¹Ÿå°±æ˜¯å–å››ä¸ªæ•°çš„å¹³å‡å€¼ä½œä¸ºå…¶æ± åŒ–åçš„å€¼ã€‚</p><p>å¯ä»¥å‘ç°ï¼Œæ± åŒ–æ“ä½œåçš„ç»“æœç›¸æ¯”å…¶è¾“å…¥å‡å°äº†ï¼Œå…¶å®é™…ä¸Šæ˜¯ä¸€ç§<strong>é™é‡‡æ ·(<em>down-sampling</em>)</strong>ï¼Œæ± åŒ–å±‚çš„å¼•å…¥æ˜¯æŒ‰ç…§äººçš„è§†è§‰ç³»ç»Ÿå¯¹è§†è§‰è¾“å…¥å¯¹è±¡è¿›è¡Œé™é‡‡æ ·å’ŒæŠ½è±¡ï¼Œå…¶ä¸»è¦ä½œç”¨ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰é¡¹ï¼š</p><ol><li><strong>ç‰¹å¾ä¸å˜æ€§</strong>ï¼šæ± åŒ–æ“ä½œä½¿æ¨¡å‹æ›´å…³æ³¨æ˜¯å¦å­˜åœ¨æŸäº›ç‰¹å¾è€Œä¸æ˜¯ç‰¹å¾å…·ä½“çš„ä½ç½®ã€‚å¯çœ‹ä½œæ˜¯ä¸€ç§å¾ˆå¼ºçš„å…ˆéªŒï¼Œä½¿ç‰¹å¾å­¦ä¹ åŒ…å«æŸç§ç¨‹åº¦è‡ªç”±åº¦ï¼Œèƒ½å®¹å¿ä¸€äº›ç‰¹å¾å¾®å°çš„ä½ç§»ã€‚</li><li><strong>ç‰¹å¾é™ç»´</strong>ï¼šç”±äºæ± åŒ–æ“ä½œçš„é™é‡‡æ ·ä½œç”¨ï¼Œæ±‡åˆç»“æœä¸­çš„ä¸€ä¸ªå…ƒç´ å¯¹åº”äºåŸè¾“å…¥æ•°æ®çš„ä¸€ä¸ªå­åŒºåŸŸï¼Œå› æ­¤æ± åŒ–ç›¸å½“äºåœ¨ç©ºé—´èŒƒå›´å†…åšäº†ç»´åº¦çº¦å‡ï¼Œä»è€Œä½¿æ¨¡å‹å¯ä»¥æŠ½å–æ›´å¹¿èŒƒå›´çš„ç‰¹å¾ã€‚åŒæ—¶å‡å°äº†ä¸‹ä¸€å±‚è¾“å…¥å¤§å°ï¼Œè¿›è€Œå‡å°è®¡ç®—é‡å’Œå‚æ•°ä¸ªæ•°ã€‚</li><li>åœ¨ä¸€å®šç¨‹åº¦ä¸Š<strong>é˜²æ­¢è¿‡æ‹Ÿåˆ</strong>ï¼Œæ–¹ä¾¿ä¼˜åŒ–ã€‚</li></ol><h3 id="LeNet-5"><a href="#LeNet-5" class="headerlink" title="LeNet-5"></a>LeNet-5</h3><p><img src="https://i.imgur.com/vh9DPQ7.png" alt=""></p><blockquote><p> LeNet-5å¯ä»¥è¯´æ˜¯æœ€æ—©çš„å·ç§¯ç¥ç»ç½‘ç»œç»“æ„äº†ï¼Œå®ƒä¸»è¦ç”¨äºæ‰‹å†™æ•°å­—è¯†åˆ«çš„ä»»åŠ¡ä¸Šï¼Œå…¶å‘è¡¨äº1998å¹´çš„<a href="http://yann.lecun.com/exdb/publis/pdf/lecun-01a.pdf" target="_blank" rel="noopener">è®ºæ–‡</a></p></blockquote><p><strong>ç»“æ„</strong>ï¼šLeNet-5ä¸åŒ…æ‹¬è¾“å…¥å±‚ä¸€å…±æœ‰7ä¸ªå±‚ï¼Œæ¯ä¸€å±‚éƒ½åŒ…å«äº†å¯ä»¥è®­ç»ƒçš„å‚æ•°ï¼Œè¾“å…¥ä¸ºä¸€å¼ $32 \times 32$çš„å›¾åƒã€‚</p><ol><li><strong>C1å·ç§¯å±‚</strong></li></ol><p>è¿™ä¸€å±‚çš„è¾“å…¥å°±æ˜¯åŸå§‹çš„å›¾åƒï¼Œè¾“å…¥å±‚æ¥å—å›¾ç‰‡çš„è¾“å…¥å¤§å°ä¸º$32 \times32 \times1$ã€‚å·ç§¯å±‚çš„æ ¸ï¼ˆè¿‡æ»¤å™¨ï¼‰å°ºå¯¸ä¸º$5\times5$ï¼Œæ·±åº¦ä¸º$6$ï¼Œä¸ä½¿ç”¨$0$è¿›è¡Œå¡«å……ï¼Œæ­¥é•¿ä¸º$1$ã€‚é€šè¿‡è®¡ç®—å…¬å¼å¯ä»¥æ±‚å‡ºè¾“å‡ºçš„å°ºå¯¸ä¸º$28\times28\times6$ï¼Œå·ç§¯å±‚çš„æ·±åº¦å†³å®šäº†è¾“å‡ºå°ºå¯¸çš„æ·±åº¦ã€‚å·ç§¯å±‚æ€»å…±çš„å‚æ•°æœ‰$5<em>5</em>1<em>6+6 =156$ä¸ªå‚æ•°ï¼ŒåŠ çš„$6$ä¸ºå·ç§¯åçš„åç½®é¡¹å‚æ•°ã€‚æœ¬å±‚æ‰€æ‹¥æœ‰çš„èŠ‚ç‚¹æœ‰$28</em>28<em>6=4704$ä¸ªèŠ‚ç‚¹ï¼Œ è€Œæœ¬å±‚çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ç»è¿‡ä¸€ä¸ª$5\times5$çš„å·ç§¯å’Œä¸€ä¸ªåç½®é¡¹è®¡ç®—æ‰€å¾—åˆ°çš„ï¼Œ$5</em>5+1=26$ï¼Œæ‰€ä»¥æœ¬å±‚å·ç§¯å±‚ä¸€å…±æœ‰$4704*26 = 122304$ä¸ªè¿æ¥ã€‚</p><ol><li><strong>S2æ± åŒ–å±‚</strong></li></ol><p>æœ¬å±‚çš„è¾“å…¥æ˜¯C1çš„è¾“å‡ºï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª$28\times28\times6$å¤§å°çš„çŸ©é˜µã€‚åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œå¸¸æœ‰çš„æ± åŒ–æ–¹æ³•ä¸ºæœ€å¤§æ± åŒ–å’Œå¹³å‡æ± åŒ–ï¼Œç”±äºä½¿ç”¨çš„æ ¸ä¸º$2\times2$ï¼Œæ­¥é•¿ä¹Ÿä¸º$2$ï¼Œæ„å‘³ç€æ¯å››ä¸ªç›¸é‚»å…ƒç´ ç»è¿‡S2ä¹‹åä¼šå¾—åˆ°ä¸€ä¸ªè¾“å‡ºï¼Œæ‰€ä»¥è¾“å‡ºçŸ©é˜µå¤§å°å˜ä¸º$14\times14\times6$å¤§å°ã€‚</p><ol><li><strong>C3å·ç§¯å±‚</strong></li></ol><p>æœ¬å±‚å·ç§¯æ“ä½œï¼Œé‡‡ç”¨çš„å·ç§¯æ ¸ä»ä¸º$5\times5$ï¼Œä½¿ç”¨$16$ä¸ªå·ç§¯æ ¸ï¼Œä¹Ÿå°±æ˜¯æ·±åº¦ä¸º$16$ï¼ŒåŒæ ·ä¸ä½¿ç”¨é›¶å¡«å……ï¼Œæ­¥é•¿ä¸º$1$ï¼Œæ‰€ä»¥å¾—åˆ°è¾“å‡ºå¤§å°ä¸º$10\times10\times16$ã€‚</p><ol><li><strong>S4æ± åŒ–å±‚</strong></li></ol><p>æœ¬å±‚é‡‡ç”¨åŒS2ç›¸åŒçš„æ± åŒ–æ“ä½œï¼Œä½¿è¾“å‡ºå€¼å†ç¼©å°ä¸€åŠé‡çº§ï¼Œå˜ä¸º$5\times5\times16$ã€‚</p><ol><li><strong>C5å·ç§¯å±‚</strong></li></ol><p>C5å±‚ç”±$120$ä¸ªå·ç§¯æ ¸ç»„æˆï¼Œä¸€ä¸ªå·ç§¯ä¸<strong>S4</strong>ä¸­æ¯ä¸€ä¸ª<em>feature map</em>ï¼ˆ$5<em>5</em>16$ï¼‰ç›¸è¿ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªC5çš„å·ç§¯æ ¸éƒ½ä¼šè¾“å‡ºä¸€ä¸ª$1<em>1$çš„çŸ©é˜µï¼Œæ‰€ä»¥åœ¨S4ä¸C5ä¹‹é—´æ˜¯å¯çœ‹ä½œå±äºå…¨è¿æ¥ã€‚C5æ˜¯ä¸€ä¸ªå·ç§¯å±‚è€Œä¸æ˜¯ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œå¦‚æœè¿™ä¸ªLeNet5çš„è¾“å…¥å˜çš„æ›´å¤§äº†è€Œå…¶å®ƒçš„ä¿æŒä¸å˜ï¼Œé‚£ä¹ˆè¿™ä¸ªè¾“å‡ºå°†è¦å¤§äº$1</em>1$ã€‚</p><ol><li><strong>F6å…¨è¿æ¥å±‚</strong></li></ol><p>F6å±‚åŒ…å«äº†$84$ä¸ªç»“ç‚¹ï¼Œè®¡ç®—è¾“å…¥å‘é‡å’Œæƒé‡å‘é‡ä¹‹é—´çš„ç‚¹ç§¯ï¼Œå†åŠ ä¸Šä¸€ä¸ªåç½®ï¼Œç»“æœé€šè¿‡<strong>sigmoid</strong>å‡½æ•°ï¼Œæ¥äº§ç”Ÿä¸€ä¸ªè¾“å‡ºï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰çš„è¾“å…¥ä¸º$120$ä¸ªç¥ç»å…ƒï¼Œç°åœ¨é€šè¿‡ä¸€å±‚å…¨è¿æ¥ï¼Œå…¶ä¸­å«$84$ä¸ªç¥ç»å…ƒï¼Œæ¥å°†è¾“å‡ºé™ç»´ã€‚ </p><ol><li><strong>è¾“å‡ºå±‚</strong></li></ol><p>è¾“å‡ºå±‚æ˜¯ç”±<strong>æ¬§å¼å¾„å‘åŸºå‡½æ•°ï¼ˆRBFï¼‰</strong>ç»„æˆã€‚æ¯ä¸€ä¸ªè¾“å‡ºå¯¹åº”ä¸€ä¸ªRBFå‡½æ•°ï¼Œæ¯ä¸€ä¸ªRBFå‡½æ•°éƒ½æœ‰$84$ç»´çš„è¾“å…¥å‘é‡.ã€‚æ¯ä¸€ä¸ªRBFå‡½æ•°éƒ½ä¼šæœ‰ä¸€ä¸ªè¾“å‡ºï¼Œæœ€åè¾“å‡ºå±‚ä¼šè¾“å‡ºä¸€ä¸ª10ç»´çš„å‘é‡ã€‚ï¼Œä»¥æ˜ å°„åˆ°10ä¸ªæ•°å­—åˆ†åˆ«çš„é¢„æµ‹çš„å‡†ç¡®åº¦ã€‚</p><p><strong>MNISTæ•°æ®é›†</strong></p><p>MNISTæ•°æ®é›†æ˜¯å…¥é—¨çš„ç¬¬ä¸€ä¸ªæ•°æ®é›†ï¼Œå…¶æ•°æ®éƒ½ä¸º$28\times28$å¤§å°çš„<strong>å•é€šé“</strong>å›¾åƒï¼Œå®ƒå«æœ‰$60000$å¼ è®­ç»ƒå›¾ç‰‡ï¼Œå’Œ$10000$å¼ éªŒè¯å›¾ç‰‡ã€‚å…¶å½¢å¼éå¸¸ç®€å•ï¼Œå›¾åƒå¦‚ä¸‹å›¾</p><p><img src="http://wiki.jikexueyuan.com/project/tensorflow-zh/images/mnist_digits.png" alt=""></p><p>ç”¨<strong>LeNet-5</strong>å¯¹MNISTæ•°æ®é›†è¿›è¡Œè®­ç»ƒï¼Œå¯ä»¥å–å¾—<strong>92%</strong>å·¦å³çš„æ•ˆæœï¼Œå·²æ¯”ä¼ ç»Ÿæœºå™¨å­¦ä¹ æ–¹æ³•å®ç°çš„æ•ˆæœæ›´å¥½ã€‚</p><p><img src="http://yann.lecun.com/exdb/lenet/gifs/a35.gif" alt=""></p><p>é€šè¿‡pytorchå®ç°çš„LeNetç»“æ„</p><pre><code class="lang-python">class LeNet(nn.Module):    def __init__(self):        super(LeNet, self).__init__()        self.conv1 = nn.Conv2d(1, 6, kernel_size=5, padding=2)        self.conv2 = nn.Conv2d(6, 16, 5)        # self.conv3 = nn.Conv2d(16, 120, 5)        self.fc1 = nn.Linear(16*5*5, 120)        self.fc2 = nn.Linear(120, 84)        self.fc3 = nn.Linear(84, 10)    def forward(self, x):        out = F.relu(self.conv1(x))  # 28*28*6        out = F.max_pool2d(out, 2)  # 14*14*6        out = F.relu(self.conv2(out))  # 10 *10 *16        out = F.max_pool2d(out, 2)  # 5*5*16        out = out.view(out.size(0), -1)        out = F.relu(self.fc1(out))        out = F.relu(self.fc2(out))        out = self.fc3(out)        return out</code></pre><h3 id="AlexNet"><a href="#AlexNet" class="headerlink" title="AlexNet"></a>AlexNet</h3><blockquote><p>åœ¨LeNet-5ä¹‹åï¼Œå·ç§¯ç¥ç»ç½‘ç»œç”±äºç¡¬ä»¶ï¼Œæ•°æ®ç­‰å…ƒç´ çš„å±€é™ï¼Œè®­ç»ƒè¾ƒä¸ºå›°éš¾ï¼Œæ‰€ä»¥å‘å±•ä¸€ç›´éƒ½æ˜¯ä¸æ¸©ä¸ç«ï¼Œç›´åˆ°<strong>AlexNet</strong>åœ¨2012å¹´<strong>ImageNet</strong>ç«èµ›ä¸­ä»¥è¶…è¶Šç¬¬äºŒå10.9ä¸ªç™¾åˆ†ç‚¹çš„ä¼˜å¼‚æˆç»©ä¸€ä¸¾å¤ºå† ï¼Œä»è€Œæ‰“å“äº†å·ç§¯ç¥ç»ç½‘ç»œã€ä¹ƒè‡³æ·±åº¦å­¦ä¹ åœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸä¸­ç ”ç©¶çƒ­æ½®çš„â€œç¬¬ä¸€æªâ€ã€‚</p></blockquote><p><strong>ç»“æ„</strong>ï¼š</p><p><img src="https://i.imgur.com/et352X8.png" alt=""></p><p>åœ¨AlexNetçš„ç½‘ç»œç»“æ„ä¸­ï¼Œå…±å«äº”å±‚å·ç§¯å±‚å’Œä¸‰å±‚å…¨è¿æ¥å±‚ã€‚AlexNetçš„ä¸Šä¸‹ä¸¤æ”¯æ˜¯ä¸ºäº†æ–¹ä¾¿åŒæ—¶ä½¿ç”¨ä¸¤ç‰‡GPUè¿›è¡Œè®­ç»ƒï¼Œä¸è¿‡åœ¨ç¬¬ä¸‰å±‚å·ç§¯å’Œå…¨è¿æ¥å±‚å¤„ä¸Šä¸‹ä¸¤æ”¯ä¿¡æ¯å¯äº¤äº’ã€‚ç”±äºä¸¤æ”¯ç½‘ç»œå®Œå…¨ä¸€è‡´ï¼Œåªéœ€å¯¹å…¶ä¸­ä¸€æ”¯è¿›è¡Œåˆ†æã€‚</p><ol><li><strong>å·ç§¯å±‚C1</strong>ï¼šè¾“å…¥å›¾åƒä¸º$3\times224\times224$å¤§å°ï¼Œå®é™…æ˜¯$3\times227\times227$å¤§å°ï¼Œå·ç§¯æ ¸ä¸º$11<em>11$ï¼Œä¸ä½¿ç”¨é›¶å¡«å……ï¼Œæ­¥é•¿ä¸º$4$ï¼Œæ€»å…±ä½¿ç”¨$96$ä¸ªå·ç§¯æ ¸ï¼Œç”±å…¬å¼å¯å¾—$\lfloor\frac{227-11}{4}+1\rfloor=55$ï¼Œå³ç”±å·ç§¯å¾—åˆ°$96\times55\times55$å¤§å°çš„ç‰¹å¾å›¾ã€‚é‡‡ç”¨$3</em>3$å°ºåº¦ï¼Œæ­¥é•¿ä¸º$2$å»æ± åŒ–ï¼Œåˆ™æ± åŒ–åçš„å›¾åƒå°ºå¯¸ä¸º$27$ï¼Œæ‰€ä»¥åƒç´ è§„æ¨¡ä¸º$96\times27\times27$ï¼Œç”±äºé‡‡ç”¨ä¸¤ä¸ªGPUï¼Œåˆ™åˆ†ä¸ºä¸¤ç»„ï¼Œæ¯ç»„å¤§å°ä¸º$48\times27\times27$ã€‚</li><li><strong>å·ç§¯å±‚C2</strong>: å¯¹äºä¸Šä¸€å±‚çš„è¾“å‡ºï¼Œé‡‡ç”¨$256$ä¸ª$3*3$å¤§å°çš„å·ç§¯æ ¸ï¼Œä½¿ç”¨$1$ä¸ªpaddingï¼Œæ­¥é•¿ä¸º$1$ï¼Œå¯¹å…¶è¿›è¡Œå·ç§¯å¾—åˆ°$256\times26\times26$çš„ç‰¹å¾å›¾ï¼Œå¯¹å…¶åŒæ ·é‡‡ç”¨æœ€å¤§æ± åŒ–ï¼Œä¸Šä¸‹ä¸¤å±‚åˆ†åˆ«å¾—åˆ°$128\times13\times13$å¤§å°çš„è¾“å‡ºç‰¹å¾å›¾ã€‚</li><li><strong>å·ç§¯å±‚C3</strong>ï¼šæ­¤å±‚é‡‡ç”¨$384$ä¸ª$3*3$å¤§å°çš„å·ç§¯æ ¸ï¼ŒåŒæ ·ä½¿ç”¨$1$ä¸ªé›¶å¡«å……ï¼Œä¸Šä¸‹ä¸¤å±‚åˆ†åˆ«å¾—åˆ°$192\times13\times13$å¤§å°çš„è¾“å‡ºå›¾ã€‚</li><li><strong>å·ç§¯å±‚C4</strong>: åŒä¸Šä¸€å±‚ï¼Œæ­¤å±‚é‡‡ç”¨$384$ä¸ª$3*3$å¤§å°çš„å·ç§¯æ ¸ï¼ŒåŒæ ·ä½¿ç”¨$1$ä¸ªé›¶å¡«å……ï¼Œä¸Šä¸‹ä¸¤å±‚åˆ†åˆ«å¾—åˆ°$192 \times13\times13$å¤§å°çš„è¾“å‡ºå›¾ã€‚</li><li><strong>å·ç§¯å±‚C5</strong>ï¼šæ­¤å±‚é‡‡ç”¨$256$ä¸ª$3*3$å¤§å°çš„å·ç§¯æ ¸ï¼ŒåŒæ ·ä½¿ç”¨$1$ä¸ªé›¶å¡«å……ï¼Œä¸Šä¸‹ä¸¤å±‚åˆ†åˆ«å¾—åˆ°$128\times12\times12 $å¤§å°çš„è¾“å‡ºå›¾ã€‚å†é‡‡ç”¨æœ€å¤§æ± åŒ–ï¼Œé™ç»´åˆ°$128\times 6 \times 6$å¤§å°ã€‚</li><li><strong>å…¨è¿æ¥å±‚</strong> ï¼š ä¹‹åå…±é‡‡ç”¨äº†ä¸‰å±‚å…¨è¿æ¥ç»“æ„ï¼Œå¯¹äºå…¶ä¸­ä¸€ä¸ªGPU, ç‰¹å¾å¤§å°é€æ¸ä»$128<em>6</em>6$åˆ°$2048$ï¼Œå†ä»$2048$åˆ°$2048$ï¼Œæœ€åå°†ä¸¤ä¸ªGPUåˆå¹¶ï¼Œä¹Ÿå°±æ˜¯å°†ç‰¹å¾ä»$4096$æ˜ å°„åˆ°$1000$ï¼Œä¹Ÿå°±æ˜¯ImageNetä¸­ç±»åˆ«çš„æ•°é‡ã€‚</li></ol><p><strong>è´¡çŒ®</strong>:</p><ul><li><strong>AlexNet</strong>  é¦–æ¬¡å°†å·ç§¯ç¥ç»ç½‘ç»œåº”ç”¨äºè®¡ç®—æœºè§†è§‰é¢†åŸŸçš„æµ·é‡å›¾åƒæ•°æ®é›†<strong>ImageNet</strong>ï¼Œ æ­ç¤ºäº†å·ç§¯ç¥ç»ç½‘ç»œæ‹¥æœ‰å¼ºå¤§çš„å­¦ä¹ èƒ½åŠ›å’Œè¡¨è¾¾èƒ½åŠ›ã€‚å¦ä¸€æ–¹é¢æµ·é‡çš„æ•°æ®ä¹Ÿèƒ½é˜²æ­¢ç¥ç»ç½‘ç»œè¿‡æ‹Ÿåˆã€‚è‡ªæ­¤å¼•å‘æ·±åº¦å­¦ä¹ äº•å–·å¼å¢é•¿ã€‚</li><li>åˆ©ç”¨<strong>GPU</strong>å®ç°ç½‘ç»œè®­ç»ƒï¼Œä¹‹å‰ç”±äºè®¡ç®—èµ„æºçš„å‘å±•å—é™ï¼Œé˜»ç¢äº†ç¥ç»ç½‘ç»œçš„ç ”ç©¶è¿›ç¨‹ã€‚å¦‚ä»Šï¼Œåˆ©ç”¨GPUå·²å¤§å¤§å‡å°‘äº†å¤§å‹ç½‘ç»œæ¨¡å‹å¼€å‘çš„æˆæœ¬å’Œæ—¶é—´ã€‚</li><li>ä¸€äº›è®­ç»ƒæŠ€å·§ä¸ºä¹‹åç ”ç©¶æ‰“ä¸‹äº†åŸºç¡€ã€‚<strong>ReLUæ¿€æ´»å‡½æ•°</strong>ï¼Œ<strong>å±€éƒ¨å“åº”è§„èŒƒåŒ–</strong>(LRN)æ“ä½œ(å¦‚ä»Šå·²ä¸å¸¸ç”¨)ï¼Œéšæœºå¤±æ´»(<strong>Dropout</strong>: éšæœºå†ç½‘ç»œä¸­å»é™¤ä¸€äº›è¿æ¥)ï¼Œè¿™äº›è®­ç»ƒæŠ€å·§ä¸ä»…ä¿è¯äº†æ¨¡å‹çš„æ€§èƒ½ï¼Œä¹Ÿä¸ºä¹‹åæ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œæ„å»ºæä¾›äº†èŒƒæœ¬ã€‚</li></ul><p><strong>ä»£ç å®ç°</strong>:</p><pre><code class="lang-python">class AlexNet(nn.Module):    def __init__(self, num_classes=1000):        super(AlexNet, self).__init__()        self.features = nn.Sequential(            nn.Conv2d(3, 96, kernel_size=11, stride=4, padding=0),            nn.ReLU(inplace=True),            LRN(local_size=5, alpha=0.0001, beta=0.75),            nn.MaxPool2d(kernel_size=3, stride=2),            nn.Conv2d(96, 256, kernel_size=5, padding=2, groups=2),            nn.ReLU(inplace=True),            LRN(local_size=5, alpha=0.0001, beta=0.75),            nn.MaxPool2d(kernel_size=3, stride=2),            nn.Conv2d(256, 384, kernel_size=3, padding=1),            nn.ReLU(inplace=True),            nn.Conv2d(384, 384, kernel_size=3, padding=1, groups=2),            nn.ReLU(inplace=True),            nn.Conv2d(384, 256, kernel_size=3, padding=1, groups=2),            nn.ReLU(inplace=True),            nn.MaxPool2d(kernel_size=3, stride=2),        )        self.classifier = nn.Sequential(            nn.Linear(256 * 6 * 6, 4096),            nn.ReLU(inplace=True),            nn.Dropout(),            nn.Linear(4096, 4096),            nn.ReLU(inplace=True),            nn.Dropout(),            nn.Linear(4096, num_classes),        )    def forward(self, x):        x = self.features(x)        x = x.view(x.size(0), 256 * 6 * 6)        x = self.classifier(x)        return x</code></pre><h3 id="VGG"><a href="#VGG" class="headerlink" title="VGG"></a>VGG</h3><p>VGGç½‘ç»œæœ‰ç±»ä¼¼Alexçš„å½¢å¼ï¼Œä½†å®ƒåœ¨ä¸€äº›åœ°æ–¹ä¹Ÿæœ‰ä¸åŒã€‚</p><ul><li>VGG-Netä¸­æ™®éä½¿ç”¨äº†å°å·ç§¯æ ¸ï¼ŒAlexNetå¤šé‡‡ç”¨çš„å¤§äº5çš„å·ç§¯æ ¸ï¼Œè€ŒVGGçš„å·ç§¯æ ¸å¤šä¸º$3*3$</li><li>ç½‘ç»œå·ç§¯å±‚çš„é€šé“æ•°ä»$3\to64\to128\to256\to512$ã€‚é€šé“æ•°é€æ¸å˜å¾—å¾ˆå¤§ï¼Œå­¦åˆ°çš„ç‰¹å¾å¤šã€‚</li><li>VGGä¸­çš„å·ç§¯å¾ˆå¤šéƒ½ä¿æŒäº†è¾“å…¥å¤§å°ï¼Œä¹Ÿå°±æ˜¯å·ç§¯åå¤§å°ä¿æŒä¸å˜ï¼Œä¸ºçš„æ˜¯åœ¨å¢åŠ ç½‘ç»œæ·±åº¦æ—¶ç¡®ä¿å„å±‚è¾“å…¥å¤§å°éšæ·±åº¦å¢åŠ è€Œä¸æå…·å‡å°ã€‚</li></ul><p><strong>ç»“æ„</strong></p><p><img src="https://i.imgur.com/t4U5sHK.png" alt=""></p><p><img src="https://i.imgur.com/rQwN1Zn.png" alt=""></p><h3 id="ResNets"><a href="#ResNets" class="headerlink" title="ResNets"></a>ResNets</h3><blockquote><p> ç†è®ºå’Œå®éªŒè¡¨æ˜ï¼Œç¥ç»ç½‘ç»œçš„<strong>æ·±åº¦</strong>å’Œ<strong>å®½åº¦</strong>æ˜¯è¡¨å¾ç½‘ç»œå¤æ‚åº¦çš„ä¸¤ä¸ªæ ¸å¿ƒå› ç´ ï¼Œä¸è¿‡æ·±åº¦ç›¸æ¯”å®½åº¦åœ¨å¢åŠ ç½‘ç»œå¤æ‚æ€§ä¸Šæ›´åŠ æœ‰æ•ˆï¼Œç„¶è€Œéšç€æ·±åº¦çš„å¢åŠ ï¼Œè®­ç»ƒä¼šå˜å¾—æ„ˆåŠ å›°éš¾ã€‚è¿™ä¸»è¦æ˜¯å› ä¸ºåœ¨åŸºäº<strong>éšæœºæ¢¯åº¦ä¸‹é™</strong>çš„ç½‘ç»œè®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œè¯¯å·®çš„å¤šå±‚åå‘ä¼ æ’­ä¼šå¯¼è‡´<strong>æ¢¯åº¦å¼¥æ•£</strong>æˆ–<strong>æ¢¯åº¦çˆ†ç‚¸</strong>ã€‚å¯èƒ½éšç€ç½‘ç»œçš„è®­ç»ƒï¼Œè¯¯å·®å¹¶æœªå‡å°‘è€Œå´å¢åŠ ã€‚<strong>æ®‹å·®ç½‘ç»œ</strong>(ResNets)ä¾¿å¾ˆå¥½åœ°è§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚</p></blockquote><p><strong>æ®‹å·®å—</strong></p><p><img src="https://i.imgur.com/qxiUrhA.png" alt=""></p><p>æ®‹å·®ç½‘ç»œä¸»è¦å—<strong>é«˜é€Ÿç½‘ç»œ</strong>çš„å½±å“ï¼Œå‡è®¾æŸå·ç§¯ç¥ç»ç½‘ç»œæœ‰$L$å±‚ï¼Œå…¶ä¸­ç¬¬$i$å±‚çš„è¾“å…¥ä¸º$x^{i}$ï¼Œå‚æ•°ä¸º$w^{i}$ï¼Œè¯¥å±‚çš„è¾“å‡ºä¸º$y^{i}=x^{i+1}$ï¼Œå¿½ç•¥åç½®ï¼Œåˆ™ä¹‹é—´å…³ç³»è¡¨ç¤ºä¸º:</p><script type="math/tex; mode=display">y=F(x,w)</script><p>å…¶ä¸­ï¼Œ$F$ä¸ºéçº¿æ€§æ¿€æ´»å‡½æ•°ï¼Œè€Œå¯¹äºé«˜é€Ÿç½‘ç»œæ¥è¨€ï¼Œ$y$çš„è®¡ç®—å®šä¹‰å¦‚ä¸‹:</p><script type="math/tex; mode=display">y=F(x,w)*(T(x,w)+x*C(x,w)</script><p>å…¶ä¸­$T,C$æ˜¯ä¸¤ä¸ªéçº¿æ€§å˜æ¢,åˆ†åˆ«ç§°ä½œâ€œ<strong>å˜æ¢é—¨</strong>â€å’Œâ€œ<strong>æºå¸¦é—¨</strong>â€ã€‚å˜æ¢é—¨è´Ÿè´£æ§åˆ¶å˜æ¢çš„å¼ºåº¦ï¼Œæºå¸¦é—¨åˆ™æ§åˆ¶åŸè¾“å…¥ä¿¡å·çš„ä¿ç•™å¼ºåº¦ï¼Œç”±äºå¢åŠ äº†<strong>ä¿ç•™åŸè¾“å…¥æ•°æ®çš„å¯èƒ½æ€§</strong>ï¼Œæ‰€ä»¥è¿™ç§ç½‘ç»œä¼šæ›´åŠ çµæ´»ã€‚è€Œæ®‹å·®ç½‘ç»œå¯ä»¥çœ‹ä½œå…¶çš„ç‰¹æ®Šæƒ…å†µï¼šæœ¬æ¥ä¼˜åŒ–ç›®æ ‡ä¸º:</p><script type="math/tex; mode=display">y=F(x,w)+x</script><p>ç®€å•å˜å½¢ä¸º</p><script type="math/tex; mode=display">F(x,w)=y-x</script><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç½‘ç»œæ‰€è¦å­¦ä¹ çš„å°±æ˜¯<strong>æ®‹å·®é¡¹</strong>$y-x$ã€‚æ®‹å·®å—æœ‰ä¸¤ä¸ªå­¦ä¹ åˆ†æ”¯ï¼Œå…¶ä¸€æ˜¯å·¦ä¾§çš„æ®‹å·®å‡½æ•°ï¼Œå…¶äºŒä¸ºå³ä¾§å¯¹è¾“å…¥çš„æ’ç­‰æ˜ å°„ã€‚è¿™ä¸¤ä¸ªåˆ†æ”¯ç»è¿‡ç®€å•çš„æ•´åˆï¼Œå†ç»è¿‡ä¸€ä¸ªéçº¿æ€§å˜æ¢<strong>ReLU</strong>ï¼Œä»è€Œå½¢æˆç½‘ç»œçš„æ®‹å·®å—ã€‚ç”±å¤šä¸ªæ®‹å·®å—å †ç§¯è€Œæˆäº†<strong>æ®‹å·®ç½‘ç»œ</strong>ã€‚</p><p><img src="https://img-blog.csdn.net/20161028170505110" alt=""></p><ul><li>åˆ©ç”¨pytorchæ„å»ºæ®‹å·®å—</li></ul><pre><code class="lang-python"># Residual blockclass ResidualBlock(nn.Module):    def __init__(self, in_channels, out_channels, stride=1, downsample=None):        super(ResidualBlock, self).__init__()        self.conv1 = conv3x3(in_channels, out_channels, stride)        self.bn1 = nn.BatchNorm2d(out_channels)        self.relu = nn.ReLU(inplace=True)        self.conv2 = conv3x3(out_channels, out_channels)        self.bn2 = nn.BatchNorm2d(out_channels)        self.downsample = downsample    def forward(self, x):        residual = x        out = self.conv1(x)        out = self.bn1(out)        out = self.relu(out)        out = self.conv2(out)        out = self.bn2(out)        if self.downsample:            residual = self.downsample(x)        out += residual # åŠ ä¸Šæ®‹å·®é¡¹        out = self.relu(out)        return out</code></pre><h3 id="GoogLeNet"><a href="#GoogLeNet" class="headerlink" title="GoogLeNet"></a>GoogLeNet</h3><blockquote><p>ç”±äºå¢åŠ ç½‘ç»œçš„æ·±åº¦å’Œå®½åº¦ä¼šå¯¼è‡´è®­ç»ƒéš¾ä»¥è¿›è¡Œä¸‹å»ï¼Œ<strong>Inception</strong>ä¸»è¦æ€è·¯æ˜¯ç”¨<strong>å¯†é›†æˆåˆ†æ¥è¿‘ä¼¼æœ€ä¼˜çš„å±€éƒ¨ç¨€ç–ç»“æ„</strong>å»åŠ æ·±ç½‘ç»œçš„åŒæ—¶ï¼Œå¢<strong>å®½</strong>ç½‘ç»œç»“æ„ã€‚</p></blockquote><p><strong>Inceptionæ¨¡å—</strong></p><p><img src="https://img-blog.csdn.net/20160225155351172" alt=""></p><ul><li>é‡‡ç”¨ä¸åŒå¤§å°çš„å·ç§¯æ ¸ï¼Œæ„å‘³ç€å¾—åˆ°ä¸åŒå¤§å°çš„æ„Ÿå—é‡ï¼Œæœ€å<strong>æ‹¼æ¥</strong>èµ·æ¥æ„å‘³ç€ä¸åŒå°ºåº¦çš„èåˆã€‚</li><li>ä¹‹æ‰€ä»¥å·ç§¯æ ¸é‡‡ç”¨1ï¼Œ3ï¼Œ5ï¼Œä¸»è¦ä¸ºäº†æ–¹ä¾¿å¯¹é½ã€‚è®¾å®šæ­¥é•¿$stide=1$ä¹‹åï¼Œåªè¦è®¾å®šç›¸åº”çš„$padding$ä¸º0ï¼Œ 1ï¼Œ 2ï¼Œé‚£ä¹ˆå·ç§¯ä¹‹åå³å¯å¾—åˆ°ç›¸åŒç»´åº¦çš„ç‰¹å¾ï¼Œé‚£ä¹ˆè¿™äº›ç‰¹å¾å³å¯æ‹¼æ¥å†ä¸€èµ·ã€‚</li><li>åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šå…ˆé‡‡ç”¨äº†æœ€å¤§åŒ–æ± åŒ–ï¼Œè¿™æ ·èƒ½å¾—åˆ°æ›´å¥½çš„æ•ˆæœã€‚</li><li>é‡‡ç”¨äº†$1*1$å·ç§¯</li><li>ç½‘ç»œè¶Šåˆ°åé¢ï¼Œç‰¹å¾è¶ŠæŠ½è±¡ï¼Œè€Œä¸”æ¯ä¸ªç‰¹å¾æ¶‰åŠçš„æ„Ÿå—é‡ä¹Ÿæ›´å¤§äº†ï¼Œå› æ­¤éšç€å±‚æ•°çš„å¢åŠ ï¼Œ$3<em>3$å’Œ$5</em>5$å·ç§¯çš„æ¯”ä¾‹ä¹Ÿè¦å¢åŠ ã€‚</li></ul><p>ç”±å¤šä¸ª<strong>Inception</strong>æ¨¡å—æ„å»ºæˆäº†<strong>GoogLeNet</strong></p><p><img src="https://img-blog.csdn.net/20160225155403967" alt=""></p><p>åœ¨Inception-v1ä¹‹åä¸ºäº†æé«˜è®­ç»ƒé€Ÿåº¦å’Œæ•ˆæœå‡ºç°äº†è®¸å¤šè¡ç”Ÿç‰ˆæœ¬ï¼Œä½†æ€æƒ³éƒ½ä¸å˜ï¼Œç†è§£äº†Inceptionæ¨¡å—ï¼Œå°±å«©ç†è§£Inceptionç½‘ç»œã€‚</p><p>Inceptionæ¨¡å—çš„pytorchå®ç°</p><pre><code class="lang-python">class Inception_base(nn.Module):    def __init__(self, depth_dim, input_size, config):        super(Inception_base, self).__init__()        self.depth_dim = depth_dim        #mixed &#39;name&#39;_1x1        self.conv1 = nn.Conv2d(input_size, out_channels=config[0][0], kernel_size=1, stride=1, padding=0)        #mixed &#39;name&#39;_3x3_bottleneck        self.conv3_1 = nn.Conv2d(input_size, out_channels=config[1][0], kernel_size=1, stride=1, padding=0)        #mixed &#39;name&#39;_3x3        self.conv3_3 = nn.Conv2d(config[1][0], config[1][1], kernel_size=3, stride=1, padding=1)        # mixed &#39;name&#39;_5x5_bottleneck        self.conv5_1 = nn.Conv2d(input_size, out_channels=config[2][0], kernel_size=1, stride=1, padding=0)        # mixed &#39;name&#39;_5x5        self.conv5_5 = nn.Conv2d(config[2][0], config[2][1], kernel_size=5, stride=1, padding=2)        self.max_pool_1 = nn.MaxPool2d(kernel_size=config[3][0], stride=1, padding=1)        #mixed &#39;name&#39;_pool_reduce        self.conv_max_1 = nn.Conv2d(input_size, out_channels=config[3][1], kernel_size=1, stride=1, padding=0)        self.apply(helpers.modules.layer_init)    def forward(self, input):        output1 = F.relu(self.conv1(input))        output2 = F.relu(self.conv3_1(input))        output2 = F.relu(self.conv3_3(output2))        output3 = F.relu(self.conv5_1(input))        output3 = F.relu(self.conv5_5(output3))        output4 = F.relu(self.conv_max_1(self.max_pool_1(input)))        return torch.cat([output1, output2, output3, output4], dim=self.depth_dim)</code></pre>]]></content>
      
      
        <tags>
            
            <tag> CNN å·ç§¯ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç¥ç»ç½‘ç»œåŸºç¡€</title>
      <link href="/2018/05/12/nn-basic/"/>
      <url>/2018/05/12/nn-basic/</url>
      <content type="html"><![CDATA[<h2 id="ç¥ç»ç½‘ç»œ"><a href="#ç¥ç»ç½‘ç»œ" class="headerlink" title="ç¥ç»ç½‘ç»œ"></a>ç¥ç»ç½‘ç»œ</h2><h3 id="ç¥ç»å…ƒ"><a href="#ç¥ç»å…ƒ" class="headerlink" title="ç¥ç»å…ƒ"></a>ç¥ç»å…ƒ</h3><p>å¦‚å›¾ï¼Œä¸€ä¸ª<strong>ç¥ç»å…ƒé€šå¸¸æœ‰å¦‚ä¸‹çš„ç»“æ„</strong>ï¼š<img src="https://i.imgur.com/BT6bd4A.png" alt="Snipaste_2018-05-08_14-41-31"></p><p>å¯¹äºä¸€ç»„è¾“å…¥${a_{1}, a_{2}â€¦.,a_{k}}$ï¼Œåˆ†åˆ«æ–½äºä¸åŒçš„<strong>æƒé‡</strong>(weight)ï¼Œå†é€šè¿‡åŠ ä¸Šä¸€ä¸ª<strong>åç½®</strong>(bias)ï¼Œå¾—åˆ°ç¥ç»å…ƒçš„<strong>çº¿æ€§æ¨¡å‹</strong>,ä¹Ÿå°±æ˜¯ä¹‹å‰å­¦è¿‡çš„çº¿æ€§è§„åˆ’:</p><script type="math/tex; mode=display">z=a_{1}w_{1}+a_{2}w_{2}+......+a_{k}w_{k}+b</script><p>ç”¨å‘é‡åŒ–è¡¨ç¤ºä¸º:</p><script type="math/tex; mode=display">z=w^{T}a+b</script><p>ç”±äºçº¿æ€§å˜åŒ–æ‰€èƒ½è§£å†³çš„é—®é¢˜å¹¶ä¸å¤šï¼Œæ‰€ä»¥åœ¨è¾“å‡ºæ–½åŠ ä¸€ä¸ª<strong>æ¿€æ´»å‡½æ•°</strong>(<em>activate function</em>)ï¼Œ ä»¥åœ¨æ–¹ç¨‹æ¨¡å‹ä¸­å¼•å…¥éçº¿æ€§ï¼ŒåŒæ—¶å¦å¤–çš„ä½œç”¨æ˜¯å¯å¯¹è¾“å‡ºè¿›è¡Œé™åˆ¶:</p><script type="math/tex; mode=display">a_{out}=\delta(z)=\delta(w^{T}a_{in}+b)</script><ul><li><strong>å®ä¾‹</strong></li></ul><p><img src="https://i.imgur.com/ZKWIH2G.png" alt="Snipaste_2018-05-08_14-59-43"></p><p>å¯¹äºä¸Šæ–¹çš„ç¥ç»å…ƒå®ä¾‹ï¼Œè¾“å…¥$a=[2, -1, 1]^{T}$,å¯¹äºå…¶ä¸‰ä¸ªè¾“å…¥åˆ†åˆ«æ–½åŠ çš„æƒé‡ä¸º$w=[1,-2, -1]^{T}$ï¼Œå°†åç½®<em>bias</em>è®¾ç½®ä¸º$1$ï¼Œæ¿€æ´»å‡½æ•°é€‰æ‹©<strong>Sigmoid</strong>å‡½æ•°$\delta(z)=\frac{1}{1+e^{-z}}$ï¼Œæ‰€ä»¥è®¡ç®—ç»“æœå¯ä»¥å¾—åˆ°:</p><script type="math/tex; mode=display">a_{out}=\delta(w^{T}x+b)=\frac{1}{1+e^{-(2*1+(-1)*(-2)+1*(-1)+1)}}=0.98</script><h3 id="å…¨è¿æ¥ç¥ç»ç½‘ç»œ"><a href="#å…¨è¿æ¥ç¥ç»ç½‘ç»œ" class="headerlink" title="å…¨è¿æ¥ç¥ç»ç½‘ç»œ"></a>å…¨è¿æ¥ç¥ç»ç½‘ç»œ</h3><p>å¯¹äºè®¸å¤šç¥ç»å…ƒï¼Œå°†å…¶ç»„åˆèµ·æ¥ï¼Œå¯¹äºç½‘ç»œæ¯ä¸€å±‚ï¼Œè®¾ç½®ä¸åŒæ•°é‡çš„ç¥ç»å…ƒï¼Œå³å¯å¾—åˆ°ä¸€ä¸ª<strong>å…¨è¿æ¥å‰é¦ˆç¥ç»ç½‘ç»œ</strong>ï¼š</p><p><img src="https://i.imgur.com/7ivKJwZ.png" alt="Snipaste_2018-05-08_15-11-01"></p><p>å…¨è¿æ¥ç¥ç»ç½‘ç»œé€šè¿‡è¾“å…¥çš„ç‰¹å¾å‘é‡$x$ï¼Œå¾—åˆ°è¾“å‡º$y$ï¼Œè€Œç½‘ç»œå±‚ä¸­çš„æƒé‡$w$å’Œåç½®$b$å³æ˜¯ï¼Œç½‘ç»œä¸­çš„å‚æ•°ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå¯é€šè¿‡<strong>åå‘ä¼ æ’­</strong>å’Œ<strong>æ¢¯åº¦ä¸‹é™ç®—æ³•</strong>è¿›è¡Œæ›´æ–°ã€‚</p><h3 id="æ¿€æ´»å‡½æ•°"><a href="#æ¿€æ´»å‡½æ•°" class="headerlink" title="æ¿€æ´»å‡½æ•°"></a>æ¿€æ´»å‡½æ•°</h3><p>è¿™é‡Œä»‹ç»ä¸‰ç§å¸¸è§æ¿€æ´»å‡½æ•°ï¼š</p><ul><li><p><strong>Sigmoid</strong>:</p><script type="math/tex; mode=display">f(z)=\frac{1}{1+e^{-z}}</script><p>å…¶å›¾åƒå¯è¡¨ç¤ºä¸º:</p><p><img src="https://i.imgur.com/IRPHg7V.png" alt=""></p></li></ul><p>å¾ˆæ˜æ˜¾ï¼Œå¯ä»¥çœ‹å‡ºç»è¿‡<strong>Sigmoid</strong>å‡½æ•°ä½œç”¨åï¼Œè¾“å‡ºå“åº”çš„å€¼åŸŸè¢«å‹ç¼©åˆ°äº†[0,1]ä¹‹é—´ï¼Œè¿™ä¹Ÿæ˜¯<strong>é€»è¾‘å›å½’</strong>ä¸­ç”¨åˆ°å®ƒçš„åŸå› ã€‚å¯¹<strong>Sigmoid</strong>å‡½æ•°æ±‚å¯¼ï¼š</p><script type="math/tex; mode=display">\frac{d}{dz}f(z)=\frac{e^{-z}}{(1+e^{-z})^{2}}</script><p>å¯¹æ¢¯åº¦ç”»å‡ºå›¾å¯è§:</p><p><img src="https://i.imgur.com/v9Vx5WH.png" alt="sigmoid_æ¢¯åº¦"></p><p><strong>ä¸è¶³ä¹‹å¤„</strong>ï¼š</p><ol><li>å½“$z$å¤§äº5æˆ–è€…å°äº-5æ—¶ï¼Œéƒ¨åˆ†çš„æ¢¯åº¦<strong>æ¥è¿‘äº0</strong>ï¼Œè¿™ä¼šå¯¼è‡´åœ¨è¯¯å·®åå‘ä¼ æ’­ä¸­ï¼Œå¯¼æ•°å¤„äºè¯¥åŒºåŸŸå†…çš„è¯¯å·®å¾ˆéš¾ä¼ æ’­åˆ°å‰å±‚ï¼Œè¿›è€Œå½±å“æ•´ä¸ªç½‘ç»œå¯¼è‡´å…¶æ— æ³•è®­ç»ƒã€‚</li><li>ä»<strong>Sigmoid</strong>å‡½æ•°ä¸­å¯ä»¥çœ‹å‡ºå…¶å€¼åŸŸçš„å‡å€¼éƒ½å¤§äº0ï¼Œè€Œå¹¶é<strong>ç­‰äº</strong>0ï¼Œè¿™ä¹Ÿä¸æ»¡è¶³ç¥ç»ç½‘ç»œå†…å¯¹æ•°å€¼çš„æœŸæœ›ã€‚</li></ol><ul><li><strong>Tanhï¼š</strong></li></ul><script type="math/tex; mode=display">f(z)=\frac{e^{z}-e^{-z}}{e^{z}+e^{-z}}</script><p><img src="https://i.imgur.com/vBRVjtq.png" alt="tanh"></p><blockquote><p>Tanhå‡½æ•°åœ¨Sigmoidå‡½æ•°çš„åŸºç¡€ä¸Šè§£å†³äº†<strong>å‡å€¼é—®é¢˜</strong>ã€‚</p></blockquote><p><strong>Tanh</strong>å‡½æ•°åˆç§°ä½œ<strong>åŒæ›²æ­£åˆ‡å‡½æ•°</strong>ï¼Œå…¶å‡½æ•°èŒƒå›´ä¸º$(-1,1)$ï¼Œè¾“å‡ºçš„å“åº”å‡å€¼ä¸º0ã€‚<strong>Tanh</strong>å‡½æ•°ä¸<strong>Sigmoid</strong>å‡½æ•°çš„å…³ç³»ä¸º:</p><script type="math/tex; mode=display">Tanh(z)=2Sigmoid(2z)-1</script><p>æ‰€ä»¥ï¼Œæ±‚<strong>Tanh</strong>çš„å¯¼æ•°:</p><script type="math/tex; mode=display">\frac{d}{dz}Tanh(z)=4Sigmoid(2z)*Sigmoid(2z)^{'}=\frac{4e^{-2z}}{(1+e^{-2z})^{3}}</script><p>å…·ä½“åœ°ï¼š</p><script type="math/tex; mode=display">\frac{d}{dz}Tanh(z)=1-(tanh(z))^{2}</script><p>ç”±äº<strong>Tanh</strong>å‡½æ•°ä»åŸºäº<strong>Sigmoid</strong>å‡½æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨å®ƒä»ä¾ç„¶ä¼šæœ‰<strong>â€œæ¢¯åº¦é¥±å’Œâ€</strong>ç°è±¡ã€‚</p><ul><li><strong>ReLU</strong></li></ul><blockquote><p>ä¸ºäº†é¿å…<strong>æ¢¯åº¦é¥±å’Œ</strong>ç°è±¡çš„å‘ç”Ÿï¼Œåœ¨ç¥ç»ç½‘ç»œä¸­å¼•å…¥äº†ä¿®æ­£çº¿æ€§å•å…ƒ(<em>Rectified Linear Unit</em>)ã€‚</p></blockquote><script type="math/tex; mode=display">ReLU(x)=max(0,x)</script><script type="math/tex; mode=display">\begin{equation}ReLU(x)=\begin{cases}x& x\ge0\\0& x<0\end{cases}\end{equation}</script><p><img src="https://i.imgur.com/1lU9PNR.png" alt="relu"></p><p><strong>ReLU</strong>çš„å¯¼æ•°:</p><script type="math/tex; mode=display">\begin{equation}\frac{d}{dx}ReLU(x)=\begin{cases}1& x >0\\0& x<0\\undefined&x=0\end{cases}\end{equation}</script><p>ä¸å‰ä¸¤ä¸ªæ¿€æ´»å‡½æ•°ç›¸æ¯”ï¼Œ<strong>ReLU</strong>çš„æ¢¯åº¦åœ¨$x\ge0$æ—¶ä¸º$1$ï¼Œåä¹‹ä¸º$0$ï¼Œå¯¹$x\ge0$éƒ¨åˆ†å®Œå…¨æ¶ˆé™¤äº†ä¹‹å‰çš„æ¢¯åº¦é¥±å’Œæ•ˆåº”ã€‚è®¡ç®—å¤æ‚åº¦ä¸Šï¼Œ<strong>ReLU</strong>å‡½æ•°ä¹Ÿç›¸æ¯”ä¹‹å‰çš„ä¸¤ç§æŒ‡æ•°å‡½æ•°ç®€å•ï¼Œå®éªŒä¸­è¿˜å‘ç°å…¶æœ‰åŠ©äºéšæœºæ¢¯åº¦ä¸‹é™æ–¹æ³•æ”¶æ•›ã€‚<strong>ReLU</strong>å‡½æ•°å·²æ˜¯ç›®å‰æ·±å±‚å·ç§¯ç¥ç»ç½‘ç»œä¸­æœ€ä¸ºå¸¸ç”¨çš„æ¿€æ´»å‡½æ•°ã€‚</p>]]></content>
      
      
        <tags>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å›å½’åˆ†æ</title>
      <link href="/2018/05/11/regression/"/>
      <url>/2018/05/11/regression/</url>
      <content type="html"><![CDATA[<h3 id="çº¿æ€§å›å½’"><a href="#çº¿æ€§å›å½’" class="headerlink" title="çº¿æ€§å›å½’"></a>çº¿æ€§å›å½’</h3><blockquote><p> <strong>å›å½’åˆ†æ</strong>æ˜¯ä¸€ç§ç»Ÿè®¡å­¦ä¸Šåˆ†ææ•°æ®çš„æ–¹æ³•ï¼Œç›®çš„åœ¨äºäº†è§£ä¸¤ä¸ªæˆ–å¤šä¸ªå˜é‡æ˜¯å¦ç›¸å…³ã€ç›¸å…³æ–¹å‘ä¸ç¨‹åº¦ï¼Œå¹¶å»ºç«‹æ•°å­¦æ¨¡å‹ä»¥ä¾¿è§‚å¯Ÿç‰¹å®šå˜é‡æ¥é¢„æµ‹ç ”ç©¶è€…æ„Ÿå…´è¶£çš„å˜é‡ã€‚æ›´å…·ä½“çš„æ¥è¯´ï¼Œå›å½’åˆ†æå¯ä»¥å¸®åŠ©äººä»¬äº†è§£åœ¨åªæœ‰ä¸€ä¸ªè‡ªå˜é‡å˜åŒ–æ—¶å› å˜é‡çš„å˜åŒ–é‡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé€šè¿‡å›å½’åˆ†ææˆ‘ä»¬å¯ä»¥ç”±ç»™å‡ºçš„è‡ªå˜é‡ä¼°è®¡å› å˜é‡çš„æ¡ä»¶æœŸæœ›ã€‚</p></blockquote><p><strong>çº¿æ€§å›å½’</strong>å¯ä»¥è¯´æ˜¯æœºå™¨å­¦ä¹ ä¸­æœ€ç®€å•çš„æ¨¡å‹ï¼Œä½†æ˜¯å…¶å®é™…åœ°ä½å¾ˆé‡è¦ã€‚å…ˆé€šè¿‡<strong>æˆ¿ä»·é¢„æµ‹</strong>çš„ä¾‹å­æ¥äº†è§£çº¿æ€§å›å½’ã€‚</p><hr><p>å‡è®¾æœ‰ä¸€ä¸ªæˆ¿å±‹é”€å”®çš„æ•°æ®å¦‚ä¸‹</p><div class="table-container"><table><thead><tr><th>æˆ¿å±‹é¢ç§¯(m^2)</th><th>é”€å”®ä»·é’±(ä¸‡å…ƒ)</th></tr></thead><tbody><tr><td>123</td><td>250</td></tr><tr><td>150</td><td>320</td></tr><tr><td>87</td><td>160</td></tr><tr><td>102</td><td>220</td></tr><tr><td>â€¦â€¦â€¦.</td><td>â€¦â€¦â€¦..</td></tr></tbody></table></div><p>æˆ‘ä»¬ç”¨å‡ ä½•å›¾è¡¨ç¤ºå‡ºè¿™æ ·çš„æ•°æ®</p><p><img src="https://i.imgur.com/0lc9czo.png" alt=""></p><p>å½“æˆ‘ä»¬æœ‰å¾ˆå¤šç»„è¿™æ ·çš„æ•°æ®æ—¶ï¼Œè¿™äº›å°±æ˜¯è®­ç»ƒæ•°æ®ï¼Œæˆ‘ä»¬å¸Œæœ›å­¦ä¹ ä¸€ä¸ªæ¨¡å‹ï¼Œå½“æœ‰æ–°çš„ä¸€ä¸ªé¢ç§¯æ•°æ®æ¥åˆ°æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨é¢„æµ‹å‡ºé”€å”®ä»·é’±ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨è¿™å¼ å›¾ä¸Šç”¨ä¸€æ¡ç›´çº¿å»å°½é‡æ‹Ÿåˆè¿™äº›æ•°æ®ï¼Œå½“æœ‰æ–°çš„å€¼æ¥åˆ°æ—¶ï¼Œå¯ä»¥ç”¨è¿™æ¡ç›´çº¿æ‰€å¯¹åº”çš„å€¼å»è¿”å›é¢„æµ‹çš„ä»·é’±ï¼Œ ç»¿è‰²çš„ç‚¹å°±æ˜¯æˆ‘ä»¬æ‰€æƒ³è¦é¢„æµ‹çš„ç‚¹ã€‚å½“ç„¶ï¼Œä¸æ˜¯è¯´çº¿æ€§å›å½’å°±ä¸€å®šæ˜¯ä¸€æ¡ç›´çº¿ï¼Œå½“å˜é‡xæ˜¯ä¸€ç»´çš„æ—¶å€™æ‰æ˜¯ä¸€æ¡ç›´çº¿ï¼Œè€Œåœ¨é«˜ç»´æ—¶ï¼Œæ˜¯<strong>è¶…å¹³é¢</strong> ã€‚</p><p><img src="https://i.imgur.com/BRBoV1l.png" alt="pic"></p><p>åœ¨è¿™é‡Œå…ˆå®šä¹‰ä¸‹<strong>æ•°å­¦ç¬¦å·</strong>ï¼Œæˆ‘ä»¬ç”¨$X=(x_{1}, x_{2}, x_{3},â€¦,x_{n})^{T}$æ¥è¡¨ç¤ºè¾“å…¥æ•°æ®çŸ©é˜µï¼Œå…¶ä¸­$x_{i}\in R^{p}$è¡¨ç¤ºä¸€ä¸ªpç»´åº¦é•¿çš„æ•°æ®æ ·æœ¬ï¼Œ$y = (y_{1}, y_{2}, â€¦.,y_{n}) \in R^{n}$è¡¨ç¤ºæ•°æ®çš„æ ‡ç­¾ã€‚</p><p>çº¿æ€§å›å½’çš„æ¨¡å‹å¯ä»¥è¡¨ç¤ºä¸ºï¼Œ å¯¹äºä¸€ä¸ªæ ·æœ¬$x_{i}$ï¼Œå®ƒçš„è¾“å‡ºå€¼æ˜¯å…¶ç‰¹å¾çš„çº¿æ€§ç»„åˆï¼š</p><script type="math/tex; mode=display">f(x_{i}) = \sum_{m=1}^{p}w_{m}x_{im} + w_{0} = w^{T}x_{i}</script><p>å…¶ä¸­<strong>$w_{0}$</strong>ç§°ä¸ºæˆªè·ï¼Œæˆ–è€…<em>bias</em> ã€‚çº¿æ€§å›å½’çš„ç›®æ ‡æ˜¯ç”¨é¢„æµ‹ç»“æœå°½å¯èƒ½åœ°æ‹Ÿåˆç›®æ ‡<em>label</em> ã€‚å¯¹äºæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ª<strong>æŸå¤±å‡½æ•°</strong>(Loss function)ï¼Œç”¨å®ƒæ¥è¡¨ç¤ºå…¶ä¸çœŸå®è¾“å‡ºä¹‹é—´çš„è¯¯å·®ï¼Œ ä»è€Œè¯„åˆ¤æ¨¡å‹çš„å¥½åã€‚åœ¨è¿™é‡Œå®šä¹‰å¦‚ä¸‹çš„æŸå¤±å‡½æ•°ï¼š</p><script type="math/tex; mode=display">J(w) = \frac{1}{2}\sum_{i=1}^{n}(h_{w}(x^{i})-y^{i})^{2}</script><p>è¿™ä¸ªé”™è¯¯ä¼°è®¡å‡½æ•°æ˜¯å»å¯¹$x^{i}$çš„ä¼°è®¡å€¼ä¸çœŸå®å€¼$y^{i}$å·®çš„å¹³æ–¹å’Œä½œä¸ºé”™è¯¯ä¼°è®¡å‡½æ•°ï¼Œå‰é¢ä¹˜ä¸Šçš„1/2æ˜¯ä¸ºäº†åœ¨æ±‚å¯¼çš„æ—¶å€™ï¼Œè¿™ä¸ªç³»æ•°å°±ä¸è§äº†, ä»è€Œæ–¹ä¾¿ä¹‹åçš„æ±‚å¯¼è®¡ç®—ã€‚ä¸ºäº†è®­ç»ƒæ¨¡å‹ï¼Œå»<strong>æœ€å°åŒ–è¯¯å·®</strong> ï¼Œ ä½¿å…¶æ¥è¿‘äº0ï¼Œ è¿™é‡Œéœ€è¦ç”¨åˆ°çš„æ–¹æ³•ç§°ä¸º<strong>æ¢¯åº¦ä¸‹é™æ³•</strong> ã€‚å…ˆç”¨å¼ å›¾è¡¨ç¤º:</p><p><img src="https://i.imgur.com/tYp7YPW.png" alt=""></p><blockquote><p>æ¢¯åº¦ä¸‹é™æ³•ï¼Œå°±æ˜¯è¦ä¸€æ­¥æ­¥æ²¿ç€æ¢¯åº¦åå‘æ–¹å‘é€æ¸ä¸‹é™ï¼Œä»è€Œèµ°åˆ°å±€éƒ¨ç”šè‡³å…¨å±€æœ€å°å€¼ã€‚</p></blockquote><p>æ¢¯åº¦ä¸‹é™æ³•æ˜¯æŒ‰ä»¥ä¸‹æµç¨‹é€æ¸è¿›è¡Œçš„ï¼š</p><ol><li>é¦–å…ˆå¯¹$w$èµ‹å€¼ï¼Œ è¿™ä¸ªå€¼å¯ä»¥æ˜¯éšæœºçš„ï¼Œä¹Ÿå¯ä»¥è®©å…¶æ˜¯ä¸ªå…¨é›¶çš„å‘é‡ã€‚</li><li>æ”¹å˜$w$çš„å€¼ï¼Œä½¿å¾—$J(w)$æŒ‰æ¢¯åº¦ä¸‹é™çš„æ–¹å‘è¿›è¡Œå‡å°‘ã€‚è¿™ä¸€æ­¥ï¼Œå°±éœ€è¦å…ˆæ±‚å¾—æ¯ä¸ªå‚æ•°çš„æ¢¯åº¦ï¼Œå†é€šè¿‡æ¢¯åº¦ï¼Œé€æ¸æ”¹å˜å…¶å€¼ã€‚<strong>æ•°å­¦å…¬å¼</strong>è¡¨ç¤ºä¸º:</li></ol><script type="math/tex; mode=display">\frac{\partial}{\partial w}J(w) = \frac{\partial}{\partial w}\frac{1}{2}\sum_{i=1}^{n}(h_{w}(x)-y)^{2}=(h_{w}(x)-y)x^{(i)}</script><ol><li>æ±‚å¾—æ¢¯åº¦åï¼Œå°±èƒ½é€šè¿‡è®¾ç½®ä¸€ä¸ªå­¦ä¹ ç‡$\alpha$æ¥æ²¿ç€æ¢¯åº¦å‡å°‘çš„æ–¹å‘å˜åŒ–:</li></ol><script type="math/tex; mode=display">w_{i} := w_{i}-\alpha\frac{\partial}{\partial w_{i}}J(w)</script><p>ä»£å…¥ä¸Šå¼çš„æŸå¤±å‡½æ•°å’Œæ‰€è®¡ç®—çš„æ¢¯åº¦ï¼Œä¹Ÿå°±å¾—åˆ°:</p><script type="math/tex; mode=display">w_{i} = w_{i} - \alpha\frac{\partial}{\partial w_{}}J(w) = w_{i} - \alpha(h_{0}(x)-y)x^{(i)}</script><p>åœ¨çœŸå®è®¡ç®—æ—¶ï¼Œå¾€å¾€å‚æ•°ä½¿ç”¨çŸ©é˜µæˆ–å‘é‡è¡¨ç¤º:</p><script type="math/tex; mode=display">\nabla J = \begin{vmatrix} \frac{\partial}{\partial w_{1}} J \\ \frac{\partial}{\partial w_{2}} J \\ ... \\ \frac{\partial}{\partial w_{n}} J\end{vmatrix}</script><script type="math/tex; mode=display">w = w - \alpha \nabla_{w} J</script><ul><li>çº¿æ€§å›å½’å®ç°: </li></ul><pre><code class="lang-python"># Linear Regression Modelclass LinearRegression(nn.Module):    def __init__(self, input_size, output_size):        super(LinearRegression, self).__init__()        self.linear = nn.Linear(input_size, output_size)      def forward(self, x):        out = self.linear(x)        return out</code></pre><hr><h3 id="é€»è¾‘å›å½’"><a href="#é€»è¾‘å›å½’" class="headerlink" title="é€»è¾‘å›å½’"></a>é€»è¾‘å›å½’</h3><blockquote><p>é€»è¾‘å›å½’ä¹Ÿç§°ä¸ºå¯¹æ•°å‡ ç‡å›å½’ã€‚æ˜æ˜å«å›å½’ï¼Œä½†å´æ˜¯<strong>åˆ†ç±»é—®é¢˜</strong>ä¸­æä¸ºé‡è¦çš„æ‰‹æ®µã€‚å…¶æ€æƒ³ä¹Ÿæ˜¯åŸºäºçº¿æ€§å›å½’ï¼Œå±äº<strong>å¹¿ä¹‰çº¿æ€§å›å½’</strong>æ¨¡å‹ã€‚</p></blockquote><p>å¯¹äºäºŒåˆ†ç±»é—®é¢˜æ¥è®²ï¼Œç»™ä½ ä¸€ä¸ªè¾“å…¥ç‰¹å¾å‘é‡$X$ï¼Œå®ƒå¯èƒ½å¯¹åº”ä¸€å¼ å›¾ç‰‡ï¼Œä½ æƒ³è¯†åˆ«çœ‹å®ƒæ˜¯å¦æ˜¯ä¸€å¼ çŒ«çš„å›¾ç‰‡ï¼Œ é€šè¿‡ä¸€ä¸ªç®—æ³•è¾“å‡ºé¢„æµ‹$\hat{y}$ï¼Œ ä¹Ÿå°±æ˜¯å¯¹äºå®é™…å€¼$y$çš„ä¼°è®¡ã€‚æ¢å¥è¯è¯´ï¼Œä¹Ÿå°±æ˜¯æƒ³é€šè¿‡è¾“å…¥å›¾ç‰‡$X$ï¼Œ æƒ³é€šè¿‡è¾“å‡º$\hat{y}$æ¥çŸ¥é“è¿™å¼ å›¾ç‰‡æ˜¯çŒ«çš„å‡ ç‡æœ‰å¤šå¤§ã€‚ç”¨$w$æ¥è¡¨ç¤ºé€»è¾‘å›å½’çš„å‚æ•°ï¼Œ$x$æ˜¯ä¸€ä¸ª$n_{x}$ç»´çš„ç‰¹å¾å‘é‡ï¼Œ$b$è¡¨ç¤ºè¿™ä¸ªæ¨¡å‹ä¸­æ‰€è¦ç”¨åˆ°çš„åç½®ã€‚å¦‚æœç”¨<strong>çº¿æ€§å›å½’</strong>çš„æ–¹æ³•æ¥è¡¨ç¤ºè¿™ä¸ªæ¨¡å‹:</p><script type="math/tex; mode=display">\hat{y} = wx + b</script><p>è¿™æ—¶å€™æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªå…³äºè¾“å…¥$x$çš„çº¿æ€§å‡½æ•°ï¼Œä½†æ˜¯å¯¹äºè¿™ä¸ªäºŒå…ƒåˆ†ç±»æ¥è®²ï¼Œä¼¼ä¹å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç®—æ³•ã€‚å› ä¸ºæˆ‘ä»¬æƒ³è¦å¾—åˆ°çš„æ˜¯è¿™å¼ å›¾ç‰‡æ˜¯å¦ä¸ºçŒ«çš„æ¦‚ç‡ï¼Œæ‰€ä»¥è¾“å‡ºå€¼åº”è¯¥ä»‹äº<em>0 ~ 1</em>ä¹‹é—´ï¼Œè€Œé€šè¿‡<strong>çº¿æ€§å›å½’</strong>è¾“å‡ºçš„$\hat{y}$å¯èƒ½è¦æ¯”1å¤§å¾ˆå¤šï¼Œç”šè‡³ä¸ºè´Ÿå€¼ï¼Œè¿™æ ·æ¥è¯´è¿™ä¸ªæ¨¡å‹å°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œå› æ­¤åœ¨<strong>é€»è¾‘å›å½’</strong>å½“ä¸­ï¼Œæˆ‘ä»¬åº”å°†è¾“å‡ºå±€é™åœ¨<em>0~1</em>ä¹‹é—´ï¼Œ æ‰€ä»¥å¢åŠ äº†ä¸€ä¸ª<em>Sigmoid</em>å‡½æ•°å°†çº¿æ€§å‡½æ•°è½¬æ¢ä¸ºéçº¿æ€§å‡½æ•°ã€‚</p><script type="math/tex; mode=display">\delta(z) = \frac{1}{1+e^{-z}}</script><p>ä½¿ç”¨<strong>matplotlib</strong>ç”»å‡º<em>Sigmoid</em>çš„å›¾å½¢è¡¨ç¤ºå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹å‡ºè¾“å‡ºå€¼éƒ½åœ¨<em>0~1</em>ä¹‹é—´</p><pre><code class="lang-python"># ç”»sigmoidimport matplotlib.pyplot as pltimport numpy as npimport math%matplotlib inlinedef sigmoid(x):    a = []    for item in x:        a.append(1/(1+math.exp(-item)))    return ax = np.arange(-10, 10, 0.2)sig = sigmoid(x)plt.plot(x, sig)plt.show()</code></pre><p><img src="https://i.imgur.com/IRPHg7V.png" alt=""></p><p>å¦‚æœ$z$éå¸¸å¤§é‚£ä¹ˆ$e^{-z}$å°†ä¼šæ¥è¿‘äº0ï¼Œé‚£ä¹ˆ<strong>sigmoid</strong>å‡½æ•°çš„å€¼å°†ä¼šè¿‘ä¼¼ç­‰äº1é™¤ä»¥1åŠ ä¸ŠæŸä¸ªéå¸¸æ¥è¿‘äº0çš„é¡¹ï¼Œå› ä¸º$e$ çš„æŒ‡æ•°å¦‚æœæ˜¯ä¸ªç»å¯¹å€¼å¾ˆå¤§çš„è´Ÿæ•°çš„è¯ï¼Œè¿™é¡¹å°†ä¼šæ¥è¿‘äº0ï¼Œæ‰€ä»¥å¦‚æœ$z$å¾ˆå¤§çš„è¯é‚£ä¹ˆå…³äº$z$çš„<strong>sigmoid</strong>å‡½æ•°ä¼šéå¸¸æ¥è¿‘1ã€‚ç›¸ååœ°ï¼Œå¦‚æœ$z$éå¸¸å°æˆ–è€…è¯´æ˜¯ä¸€ä¸ªç»å¯¹å€¼å¾ˆå¤§çš„è´Ÿæ•°ï¼Œé‚£ä¹ˆå…³äº$e^{-z}$è¿™é¡¹ä¼šå˜æˆä¸€ä¸ªå¾ˆå¤§çš„æ•°ï¼Œä½ å¯ä»¥è®¤ä¸ºè¿™æ˜¯1é™¤ä»¥1åŠ ä¸Šä¸€ä¸ªéå¸¸éå¸¸å¤§çš„æ•°ï¼Œæ‰€ä»¥è¿™ä¸ªå°±æ¥è¿‘äº0 ã€‚</p><p>æ‰€ä»¥è¦å°†è¯†åˆ«çŒ«è¿™ä¸ªä»»åŠ¡æ‰€å¾—åˆ°çš„ç»“æœè§„å®šåœ¨<em>0~1</em>ä¹‹é—´ï¼Œé‚£ä¹ˆä¹…éœ€è¦å¯¹åˆšæ‰å®šä¹‰çš„çº¿æ€§æ¨¡å‹å¢åŠ ä¸€ä¸ª<strong>sigmoid</strong>å‡½æ•°ï¼Œä½¿å…¶å˜ä¸ºéçº¿æ€§:</p><script type="math/tex; mode=display">\hat{y} = \delta(wx+b)</script><script type="math/tex; mode=display">\delta(z) = \frac{1}{1+e^{-z}}</script><p>ä¹Ÿå°±æ˜¯:</p><script type="math/tex; mode=display">\hat{y}(x)=\frac{1}{1+e^{-(wx+b)}}</script><p>æœ‰äº†è¿™ä¸ªæ¨¡å‹ï¼Œè¦å»å®ç°è¿™ä¸ªè¯†åˆ«çŒ«çš„åˆ†ç±»ä»»åŠ¡ï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯é€šè¿‡ç»™å®šçš„æ•°æ®é›†ï¼Œé€šè¿‡è®­ç»ƒæ¨¡å‹ï¼ŒæŠŠ$w$å‚æ•°ç»™æ‰¾å‡ºæ¥ã€‚è¦æ‰¾æ¨¡å‹ä¸­çš„æƒé‡ï¼Œå°±éœ€è¦å…ˆå®šä¹‰<strong>æŸå¤±å‡½æ•°</strong>ã€‚é‚£ä¹ˆæ€ä¹ˆå»æ‰¾åˆ°èƒ½è¡¡é‡è¿™ä¸ªäºŒåˆ†ç±»çš„æŸå¤±å‡½æ•°ï¼Œé€šè¿‡ä½¿ç”¨<strong>æå¤§ä¼¼ç„¶ä¼°è®¡</strong>ã€‚ç”±äºæ‰€è¦åˆ¤æ–­å‡ºçš„å›¾ç‰‡ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½:</p><ul><li>1è¡¨ç¤ºå›¾ç‰‡é‡Œæ˜¯çŒ«</li><li>0è¡¨ç¤ºå›¾ç‰‡é‡Œä¸æ˜¯çŒ«</li></ul><p>æ‰€ä»¥è¿™ä¸¤ç§æƒ…å†µçš„æ¦‚ç‡åˆ†åˆ«ä¸º:</p><script type="math/tex; mode=display">P(y=1|x; w) = \phi(w^{T}x+b)=\phi(z)</script><script type="math/tex; mode=display">P(y=0|x;w)=1-\phi(w^{T}x+b)=1-\phi(z)</script><p>æ ¹æ®ä¸Šé¢ä¸¤å¼ï¼Œé€šè¿‡<strong>æœ€å¤§ä¼¼ç„¶ä¼°è®¡</strong>æ±‚è§£æŸå¤±å‡½æ•°ï¼Œé¦–å…ˆå¾—åˆ°<strong>æ¦‚ç‡å‡½æ•°</strong>ä¸º:</p><script type="math/tex; mode=display">P(y|x;w)=\phi(z)^{y}(1-\phi(z))^{(1-y)}</script><p>å› ä¸ºæ•°æ®é›†ä¸­æ ·æœ¬æ•°æ®æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥å®ƒä»¬çš„è”åˆåˆ†å¸ƒå¯ä»¥è¡¨ç¤ºä¸ºæ€»çš„ä¹˜ç§¯:</p><script type="math/tex; mode=display">L(w)=\prod_{i=1}^{m}P(y^{i}|x^{i};w)</script><script type="math/tex; mode=display">L(w) =\prod_{i=1}^{m}\phi(z^{i})^{y^{i}}(1-\phi(z^{i}))^{1-y^{i}}</script><p>å–<strong>å¯¹æ•°ä¼¼ç„¶å‡½æ•°</strong>:</p><script type="math/tex; mode=display">l(w)=ln(L(w))=\sum_{i=1}^{m}ln(\phi(z^{i})^{y^{i}})+ln(1-\phi(z^{i}))^{(1-y^{i})}</script><script type="math/tex; mode=display">l(w)=ln(L(w))=\sum_{i=1}^{m}y^{i}ln(\phi(z^{i}))+(1-y^{i})ln(1-\phi(z^{i}))</script><p>æœ€å¤§ä¼¼ç„¶ä¼°è®¡å°±æ˜¯è¦å–ä½¿$l(w)$æœ€å¤§æ—¶çš„$w$,æ‰€ä»¥åœ¨å‰é¢åŠ ä¸Šä¸€ä¸ª<strong>è´Ÿå·</strong>ä¸å°±æ˜¯ä½¿æ±‚å…¶æœ€å°äº†å—ï¼Ÿè¿™æ ·å°±å¾—åˆ°æŸå¤±å‡½æ•°:</p><script type="math/tex; mode=display">J(w) = -l(w)=-y^{i}ln(\phi(z^{i}))-(1-y^{i})ln(1-\phi(z^{i}))</script><p>æ‰€ä»¥ç®€åŒ–å½¢å¼çš„æŸå¤±å‡½æ•°ä¸º:</p><script type="math/tex; mode=display">L(\hat{y}, y)=-yln(\hat{y})-(1-y)ln(1-\hat{y})</script><p>å½“$y=1$æ—¶æŸå¤±å‡½æ•°$L=-ln(\hat{y})$ï¼Œå¦‚æœæƒ³è¦æŸå¤±å‡½æ•°$L$å°½å¯èƒ½å¾—å°ï¼Œé‚£ä¹ˆ$\hat{y}$å°±è¦å°½å¯èƒ½å¤§ï¼Œå› ä¸º<strong>sigmoid</strong>å‡½æ•°å–å€¼$[0,1]$ï¼Œæ‰€ä»¥$\hat{y}$ä¼šæ— é™æ¥è¿‘äº1ã€‚</p><p>å½“$y=0$æ—¶æŸå¤±å‡½æ•°$L=-ln(1-\hat{y})$ï¼Œå¦‚æœæƒ³è¦æŸå¤±å‡½æ•°$L$å°½å¯èƒ½å¾—å°ï¼Œé‚£ä¹ˆ$\hat{y}$å°±è¦å°½å¯èƒ½å°ï¼Œå› ä¸º<strong>sigmoid</strong>å‡½æ•°å–å€¼$[0,1]$ï¼Œæ‰€ä»¥$\hat{y}$ä¼šæ— é™æ¥è¿‘äº0ã€‚</p><p>è¿™åªæ˜¯å¯¹äºå•ä¸ªæ ·æœ¬çš„æŸå¤±å‡½æ•°ï¼Œå¯¹äºæ€»çš„æ ·æœ¬ï¼Œéœ€å°†æ‰€æœ‰ä»£ä»·åŠ èµ·æ¥é™¤ä»¥mï¼š</p><script type="math/tex; mode=display">J(w)=\frac{1}{m}\sum_{i=1}^{m}L(\hat{y}, y)</script><p>æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯é€šè¿‡<strong>æ¢¯åº¦ä¸‹é™æ³•</strong>æ±‚å¾—å¯¼æ•°ï¼Œå†å¦‚ä¹‹å‰ä¸€æ ·æ›´æ–°å‚æ•°$w$å’Œ$b$çš„å€¼å³å¯ã€‚</p><p>åŒæ ·ä½¿ç”¨<strong>pytorch</strong>æ¥å®ç°é€»è¾‘å›å½’æ¨¡å‹:</p><pre><code class="lang-python">class LogisticRegression(nn.Module):    def __init__(self, input_size, num_classes):        super(LogisticRegression, self).__init__()        self.linear = nn.Linear(input_size, num_classes)    def forward(self, x):        out = self.linear(x)        out = torch.sigmoid(out)        return out</code></pre>]]></content>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
