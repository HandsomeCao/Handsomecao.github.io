<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">














    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            ElasticSearch | 
        
        Cao
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="The road towards Deep Learning">
    <meta name="keywords" content=",检索 elasticsearch">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/github-v2.min.css?AfzKxt++K+/lhZBlSjnxwg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body {
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text {
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Cao">
    <meta name="msapplication-starturl" content="http://yoursite.com/2019/05/29/ElasticSearch/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Cao">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com/2019/05/29/ElasticSearch/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="ElasticSearch | Cao">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="The road towards Deep Learning">
    <meta property="og:article:tag" content="检索 elasticsearch"> 

    
        <meta property="article:published_time" content="Wed May 29 2019 17:02:11 GMT+0800">
        <meta property="article:modified_time" content="Wed Mar 04 2020 16:32:41 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://yoursite.com/2019/05/29/ElasticSearch/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://yoursite.com/2019/05/29/ElasticSearch/index.html",
    "headline": "ElasticSearch",
    "datePublished": "Wed May 29 2019 17:02:11 GMT+0800",
    "dateModified": "Wed Mar 04 2020 16:32:41 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "HandsomeCao",
        "image": {
            "@type": "ImageObject",
            "url": "/img/kid.jpg"
        },
        "description": "The road towards deep learning"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Cao",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": ",检索 elasticsearch",
    "description": "The road towards Deep Learning",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ElasticSearch入门"><span class="post-toc-number">1.</span> <span class="post-toc-text">ElasticSearch入门</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装并运行ElasticSearch"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">安装并运行ElasticSearch</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建索引"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">创建索引</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#python常规操作Elasticsearch"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">python常规操作Elasticsearch</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-使用bulk批量导入数据"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">1. 使用bulk批量导入数据</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-查询所有内容是否导入"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">2. 查询所有内容是否导入</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-写入数据和读取数据"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">3. 写入数据和读取数据</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-查询"><span class="post-toc-number">1.3.4.</span> <span class="post-toc-text">4. 查询</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#查询姓氏为Smith的字段"><span class="post-toc-number">1.3.4.1.</span> <span class="post-toc-text">查询姓氏为Smith的字段</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#在查询姓氏的基础上同时给上年龄限制"><span class="post-toc-number">1.3.4.2.</span> <span class="post-toc-text">在查询姓氏的基础上同时给上年龄限制</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#全文搜索-—-传统数据库很难实现的功能"><span class="post-toc-number">1.3.4.3.</span> <span class="post-toc-text">全文搜索 — 传统数据库很难实现的功能</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#多字段查询"><span class="post-toc-number">1.3.4.4.</span> <span class="post-toc-text">多字段查询</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#常用的curl操作Elasticsearch"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">常用的curl操作Elasticsearch</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-创建索引"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">1.创建索引</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-查询所有的索引"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">2. 查询所有的索引</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-删除指定索引"><span class="post-toc-number">1.4.3.</span> <span class="post-toc-text">3.删除指定索引</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-向索引里插入一条数据"><span class="post-toc-number">1.4.4.</span> <span class="post-toc-text">4.向索引里插入一条数据</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-根据编号获取一条数据"><span class="post-toc-number">1.4.5.</span> <span class="post-toc-text">5. 根据编号获取一条数据</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#BUG"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">BUG</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#怎么解决“FORBIDDEN-12-index-read-only”"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">怎么解决“FORBIDDEN/12/index read-only”</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">[1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</span></a></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                ElasticSearch
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/kid.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>HandsomeCao</strong>
        <span>5月 29, 2019</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/检索-elasticsearch/">检索 elasticsearch</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=ElasticSearch&url=http://yoursite.com/2019/05/29/ElasticSearch/index.html&pic=http://yoursite.com/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2019/05/29/ElasticSearch/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="ElasticSearch入门"><a href="#ElasticSearch入门" class="headerlink" title="ElasticSearch入门"></a>ElasticSearch入门</h2><blockquote>
<p><strong>ElasticSearch</strong>是一个实时分布式搜索和分析引擎。它让你以前所未有的速度处理大数据成为 可能。 它用于全文搜索、结构化搜索、分析以及将这三者混合使用 。Elasticsearch是一个基于<strong>Apache Lucene(TM)</strong>的开源搜索引擎。无论在开源还是专有领域， Lucene可以被认为是迄今为止最先进、性能最好的、功能最全的搜索引擎库。    </p>
</blockquote>
<h3 id="安装并运行ElasticSearch"><a href="#安装并运行ElasticSearch" class="headerlink" title="安装并运行ElasticSearch"></a>安装并运行ElasticSearch</h3><ol>
<li><p>安装Elasticsearch首先需要安装java，去官网下载1.8版本即可。</p>
</li>
<li><p>到es官网下载最新版本的Elasticsearch</p>
<pre><code class="lang-bash">curl -L -O http://download.elasticsearch.org/PATH/TO/VERSION.zip &lt;1&gt;
unzip elasticsearch-$VERSION.zip
cd elasticsearch-$VERSION
</code></pre>
</li>
<li><p>新版的ElasticSearch不推荐使用root用户运行，所以如果在docker内运行的话，需要创建新用户</p>
<pre><code class="lang-bash">sudo adduser elasticsearch
su elasticsearch
</code></pre>
</li>
<li><p>切换到新用户之后启动ElasticSearch</p>
<pre><code class="lang-bash">./bin/elasticsearch
</code></pre>
</li>
<li><p>测试成功启动</p>
<pre><code class="lang-bash">curl &#39;http://localhost:9200/?pretty&#39;
</code></pre>
<p>若返回以下信息则表示Elasticsearch成功启动</p>
<pre><code class="lang-bash">{
&quot;status&quot;: 200,
&quot;name&quot;: &quot;Shrunken Bones&quot;,
&quot;version&quot;: {
&quot;number&quot;: &quot;1.4.0&quot;,
&quot;lucene_version&quot;: &quot;4.10&quot;
},
&quot;tagline&quot;: &quot;You Know, for Search&quot;
}
</code></pre>
</li>
</ol>
<h3 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h3><p><strong>Elasticsearch</strong>是面向文档(document oriented)的，这意味着它可以存储整个对象或文档 (document)。然而它不仅仅是存储，还会索引(index)每个文档的内容使之可以被搜索。在 Elasticsearch中，你可以对文档（而非成行成列的数据） 进行索引、搜索、排序、过滤。这 种理解数据的方式与以往完全不同，这也是Elasticsearch能够执行复杂的全文搜索的原因之 一。    将Es中信息与传统关系数据库比较</p>
<pre><code class="lang-bash">Relational DB -&gt; Databases -&gt; Tables -&gt; Rows -&gt; Columns
Elasticsearch -&gt; Indices -&gt; Types -&gt; Documents -&gt; Fields
</code></pre>
<p>Elasticsearch集群可以包含多个索引(indices)（数据库） ，每一个索引可以包含多个类型 (types)（表） ，每一个类型包含多个文档(documents)（行） ，然后每个文档包含多个字段 (Fields)（列） 。    </p>
<p>在bash下使用curl命令创建索引并指定<strong>中文分词器ik_smart</strong></p>
<pre><code class="lang-bash">curl -H&#39;Content-Type: application/json&#39; -XPUT &#39;localhost:9200/es_test&#39; -d &#39;
{
  &quot;mappings&quot;: {
    &quot;posts&quot;: {
      &quot;properties&quot;: {
        &quot;title&quot;: {
          &quot;type&quot;: &quot;text&quot;,
          &quot;analyzer&quot;: &quot;ik_smart&quot;,
          &quot;search_analyzer&quot;: &quot;ik_smart&quot;
        },
        &quot;desc&quot;: {
          &quot;type&quot;: &quot;text&quot;,
          &quot;analyzer&quot;: &quot;ik_smart&quot;,
          &quot;search_analyzer&quot;: &quot;ik_smart&quot;
        },
        &quot;answers&quot;:{
          &quot;type&quot;: &quot;text&quot;,
          &quot;analyzer&quot;: &quot;ik_smart&quot;,
          &quot;search_analyzer&quot;: &quot;ik_smart&quot;
        }
      }
    }
  }
}&#39;
</code></pre>
<p>这样就成功创建了一个索引<em>es_test</em>，而type为<em>post</em>s。</p>
<h3 id="python常规操作Elasticsearch"><a href="#python常规操作Elasticsearch" class="headerlink" title="python常规操作Elasticsearch"></a>python常规操作Elasticsearch</h3><h4 id="1-使用bulk批量导入数据"><a href="#1-使用bulk批量导入数据" class="headerlink" title="1. 使用bulk批量导入数据"></a>1. 使用bulk批量导入数据</h4><pre><code class="lang-python">from elasticsearch import Elasticsearch
from elasticsearch.helpers import bulk
es = Elasticsearch()
actions = []
# all_json是要导入的数据
for lidx, sample in enumerate(all_json):
    action = {
        &quot;_index&quot;: &quot;es_test&quot;,
        &quot;_type&quot;: &quot;posts&quot;,
        &quot;_source&quot;:{
        &quot;title&quot;: sample[&#39;title&#39;],
        &quot;desc&quot;: sample[&#39;desc&#39;]
        &quot;answers&quot;: sample[&#39;content&#39;]
        }
    }
    actions.append(action)
    if lidx % 500 == 0:   # 每500组导入一次
        res, _ = bulk(es, actions, index=&quot;es_test&quot;, raise_on_error=True)
        # print(res)
        actions = []
</code></pre>
<h4 id="2-查询所有内容是否导入"><a href="#2-查询所有内容是否导入" class="headerlink" title="2. 查询所有内容是否导入"></a>2. 查询所有内容是否导入</h4><pre><code class="lang-python">res = es.search(index=&quot;es_test&quot;, body={&quot;query&quot;: {&quot;match_all&quot;: {}}})
print(&quot;Got %d Hits:&quot; % res[&#39;hits&#39;][&#39;total&#39;])

####
Got 7001 Hits:
</code></pre>
<h4 id="3-写入数据和读取数据"><a href="#3-写入数据和读取数据" class="headerlink" title="3. 写入数据和读取数据"></a>3. 写入数据和读取数据</h4><p>向Elasticsearch写入一条数据，不指定id，即可随机得到id。当索引不存在时会根据doc字段自动创建索引</p>
<pre><code class="lang-python">from datetime import datetime
from elasticsearch import Elasticsearch
es = Elasticsearch()

doc = {
    &#39;author&#39;: &#39;kimchy&#39;,
    &#39;text&#39;: &#39;Elasticsearch: cool. bonsai cool.&#39;,
    &#39;timestamp&#39;: datetime.now(),
}
# 当索引不存在时会根据doc字段
res = es.index(index=&quot;test-index&quot;, doc_type=&#39;tweet&#39;, id=1, body=doc)
print(res[&#39;result&#39;])

### 
created
</code></pre>
<p>读取刚才创建的数据，返回形式同样是json格式</p>
<pre><code class="lang-python">res = es.get(index=&quot;test-index&quot;, doc_type=&#39;tweet&#39;, id=1)
print(res[&#39;_source&#39;])

###
{&#39;author&#39;: &#39;kimchy&#39;, &#39;text&#39;: &#39;Elasticsearch: cool. bonsai cool.&#39;, &#39;timestamp&#39;: &#39;2019-04-04T06:33:37.442271&#39;}
</code></pre>
<p>此时查询这个indices将得到</p>
<pre><code class="lang-python"># 查询
res = es.search(index=&quot;test-index&quot;, body={&quot;query&quot;: {&quot;match_all&quot;: {}}})
print(&quot;Got %d Hits:&quot; % res[&#39;hits&#39;][&#39;total&#39;])

### output
Got 1 Hits
</code></pre>
<h4 id="4-查询"><a href="#4-查询" class="headerlink" title="4. 查询"></a>4. 查询</h4><p>使用上面的创建方法插入3条数据，供查询</p>
<pre><code class="lang-python">body1={
    &quot;first_name&quot; : &quot;John&quot;,
    &quot;last_name&quot; :  &quot;Smith&quot;,
    &quot;age&quot; :        25,
    &quot;about&quot; :      &quot;I love to go rock climbing&quot;,
    &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]
}
#余下代码为写入三段数据
body2={
    &quot;first_name&quot; :  &quot;Jane&quot;,
    &quot;last_name&quot; :   &quot;Smith&quot;,
    &quot;age&quot; :         32,
    &quot;about&quot; :       &quot;I like to collect rock albums&quot;,
    &quot;interests&quot;:  [ &quot;music&quot; ]
}

body3={
    &quot;first_name&quot; :  &quot;Douglas&quot;,
    &quot;last_name&quot; :   &quot;Fir&quot;,
    &quot;age&quot; :         35,
    &quot;about&quot;:        &quot;I like to build cabinets&quot;,
    &quot;interests&quot;:  [ &quot;forestry&quot; ]
}
res1 = es.index(&quot;test-index1&quot;, doc_type=&quot;employee&quot;, id=1, body=body1)
re2 = es.index(&quot;test-index1&quot;, doc_type=&quot;employee&quot;, id=2, body=body2)
re3 = es.index(&quot;test-index1&quot;, doc_type=&quot;employee&quot;, id=3, body=body3)
</code></pre>
<h5 id="查询姓氏为Smith的字段"><a href="#查询姓氏为Smith的字段" class="headerlink" title="查询姓氏为Smith的字段"></a>查询姓氏为Smith的字段</h5><pre><code class="lang-python">bb1 = {
    &quot;query&quot;: {
        &quot;match&quot;: {&quot;last_name&quot;: &quot;Smith&quot;}
    }
}
rt1 = es.search(index=&quot;test-index1&quot;, body=bb1)
print(rt1)
</code></pre>
<p>输出查询到的两个员工，由于他们姓氏满足Smith。所以分数相同</p>
<pre><code class="lang-json">{&#39;took&#39;: 48,
 &#39;timed_out&#39;: False,
 &#39;_shards&#39;: {&#39;total&#39;: 5, &#39;successful&#39;: 5, &#39;skipped&#39;: 0, &#39;failed&#39;: 0},
 &#39;hits&#39;: {&#39;total&#39;: 2,
  &#39;max_score&#39;: 0.2876821,
  &#39;hits&#39;: [{&#39;_index&#39;: &#39;test-index1&#39;,
    &#39;_type&#39;: &#39;employee&#39;,
    &#39;_id&#39;: &#39;2&#39;,
    &#39;_score&#39;: 0.2876821,
    &#39;_source&#39;: {&#39;first_name&#39;: &#39;Jane&#39;,
     &#39;last_name&#39;: &#39;Smith&#39;,
     &#39;age&#39;: 32,
     &#39;about&#39;: &#39;I like to collect rock albums&#39;,
     &#39;interests&#39;: [&#39;music&#39;]}},
   {&#39;_index&#39;: &#39;test-index1&#39;,
    &#39;_type&#39;: &#39;employee&#39;,
    &#39;_id&#39;: &#39;1&#39;,
    &#39;_score&#39;: 0.2876821,
    &#39;_source&#39;: {&#39;first_name&#39;: &#39;John&#39;,
     &#39;last_name&#39;: &#39;Smith&#39;,
     &#39;age&#39;: 25,
     &#39;about&#39;: &#39;I love to go rock climbing&#39;,
     &#39;interests&#39;: [&#39;sports&#39;, &#39;music&#39;]}}]}}
</code></pre>
<h5 id="在查询姓氏的基础上同时给上年龄限制"><a href="#在查询姓氏的基础上同时给上年龄限制" class="headerlink" title="在查询姓氏的基础上同时给上年龄限制"></a>在查询姓氏的基础上同时给上年龄限制</h5><pre><code class="lang-python">bb2 = {
    &quot;query&quot;: {
        &quot;bool&quot;:{
            &quot;must&quot;: {&quot;match&quot; :{&quot;last_name&quot;: &quot;Smith&quot;}},
            &quot;filter&quot;:{&quot;range&quot;:{&quot;age&quot;: {&quot;gt&quot;: 30}}}
        }
    }
}
rt2 = es.search(index=&quot;test-index1&quot;, body=bb2)
print(rt2)
</code></pre>
<p>此时输出的只有满足年龄大于30的这个员工</p>
<pre><code class="lang-json">{&#39;took&#39;: 1019,
 &#39;timed_out&#39;: False,
 &#39;_shards&#39;: {&#39;total&#39;: 5, &#39;successful&#39;: 5, &#39;skipped&#39;: 0, &#39;failed&#39;: 0},
 &#39;hits&#39;: {&#39;total&#39;: 1,
  &#39;max_score&#39;: 0.2876821,
  &#39;hits&#39;: [{&#39;_index&#39;: &#39;test-index1&#39;,
    &#39;_type&#39;: &#39;employee&#39;,
    &#39;_id&#39;: &#39;2&#39;,
    &#39;_score&#39;: 0.2876821,
    &#39;_source&#39;: {&#39;first_name&#39;: &#39;Jane&#39;,
     &#39;last_name&#39;: &#39;Smith&#39;,
     &#39;age&#39;: 32,
     &#39;about&#39;: &#39;I like to collect rock albums&#39;,
     &#39;interests&#39;: [&#39;music&#39;]}}]}}
</code></pre>
<h5 id="全文搜索-—-传统数据库很难实现的功能"><a href="#全文搜索-—-传统数据库很难实现的功能" class="headerlink" title="全文搜索 — 传统数据库很难实现的功能"></a>全文搜索 — 传统数据库很难实现的功能</h5><pre><code class="lang-python">## 全文搜索
all_search = {
    &quot;query&quot;:{
        &quot;match&quot;:{
            &quot;about&quot;:&quot;rock climbing&quot;
        }
    }
}
rt3 = es.search(index=&quot;test-index1&quot;, body=all_search)
print(rt3)
</code></pre>
<p>此时将会得到两个匹配的字段，它们分别有一个对于搜索得到的评分</p>
<pre><code class="lang-json">{&#39;took&#39;: 15,
 &#39;timed_out&#39;: False,
 &#39;_shards&#39;: {&#39;total&#39;: 5, &#39;successful&#39;: 5, &#39;skipped&#39;: 0, &#39;failed&#39;: 0},
 &#39;hits&#39;: {&#39;total&#39;: 2,
  &#39;max_score&#39;: 0.5753642,
  &#39;hits&#39;: [{&#39;_index&#39;: &#39;test-index1&#39;,
    &#39;_type&#39;: &#39;employee&#39;,
    &#39;_id&#39;: &#39;1&#39;,
    &#39;_score&#39;: 0.5753642,
    &#39;_source&#39;: {&#39;first_name&#39;: &#39;John&#39;,
     &#39;last_name&#39;: &#39;Smith&#39;,
     &#39;age&#39;: 25,
     &#39;about&#39;: &#39;I love to go rock climbing&#39;,
     &#39;interests&#39;: [&#39;sports&#39;, &#39;music&#39;]}},
   {&#39;_index&#39;: &#39;test-index1&#39;,
    &#39;_type&#39;: &#39;employee&#39;,
    &#39;_id&#39;: &#39;2&#39;,
    &#39;_score&#39;: 0.2876821,
    &#39;_source&#39;: {&#39;first_name&#39;: &#39;Jane&#39;,
     &#39;last_name&#39;: &#39;Smith&#39;,
     &#39;age&#39;: 32,
     &#39;about&#39;: &#39;I like to collect rock albums&#39;,
     &#39;interests&#39;: [&#39;music&#39;]}}]}}
</code></pre>
<h5 id="多字段查询"><a href="#多字段查询" class="headerlink" title="多字段查询"></a>多字段查询</h5><p>要对于多字段同时对于一个条目查询匹配程度，在此种方法下可以设置boost，则相应字段的查询匹配权重将会增加。</p>
<pre><code class="lang-python">query = &quot;头痛了怎么办&quot;
all_search = {
    &quot;query&quot;:{
        &quot;match&quot;:{
            &quot;title&quot;:query,
            &quot;boost&quot;:2  # 标题权重设置为2，默认为1
        },
        &quot;match&quot;:{
            &quot;desc&quot;:query
        }
    }
}
rt = es.search(index=&quot;qa_test&quot;, body=all_search)
</code></pre>
<p>另外一种方法是<strong>布尔查询</strong>，采用的是<strong>“匹配越多越好(More-matches-is-better)”</strong>的方法，所以每个match子句的得分会 被加起来变成最后的每个文档的得分。匹配两个子句的文档的得分会比只匹配了一个文档的 得分高。    </p>
<pre><code class="lang-python">query = &quot;头痛了怎么办&quot;
all_search = {
    &quot;query&quot;: {
        &quot;bool&quot;:{
            &quot;should&quot;:[
                {&quot;match&quot;: {&quot;title&quot;: query}},  # 同样可以使用boost:2来提升权重
                {&quot;match&quot;: {&quot;desc&quot;: query}}
            ]
        }
}
}
rt = es.search(index=&quot;qa_test&quot;, body=all_search)
</code></pre>
<p>这两种方法都可以对于多字段查询，但它们查询出来得到的结果将会不同。其它查询方法还包括<strong>dis_max查询，多重匹配查询</strong>，具体使用可查看文档。</p>
<h3 id="常用的curl操作Elasticsearch"><a href="#常用的curl操作Elasticsearch" class="headerlink" title="常用的curl操作Elasticsearch"></a>常用的curl操作Elasticsearch</h3><h4 id="1-创建索引"><a href="#1-创建索引" class="headerlink" title="1.创建索引"></a>1.创建索引</h4><pre><code class="lang-bash">curl -XPUT &#39;localhost:9200/&lt;indice_name&gt;?pretty&#39;
</code></pre>
<h4 id="2-查询所有的索引"><a href="#2-查询所有的索引" class="headerlink" title="2. 查询所有的索引"></a>2. 查询所有的索引</h4><pre><code class="lang-bash">curl &#39;localhost:9200/_cat/indices?v&#39;
</code></pre>
<h4 id="3-删除指定索引"><a href="#3-删除指定索引" class="headerlink" title="3.删除指定索引"></a>3.删除指定索引</h4><pre><code class="lang-bash">curl -XDELETE http://localhost:9200/&lt;indice_name&gt;
</code></pre>
<h4 id="4-向索引里插入一条数据"><a href="#4-向索引里插入一条数据" class="headerlink" title="4.向索引里插入一条数据"></a>4.向索引里插入一条数据</h4><pre><code class="lang-bash">curl -H&#39;Content-Type: application/json&#39; -XPUT &#39;localhost:9200/customer/external/1?pretty&#39; -d &#39;
{
&quot;name&quot;:&quot;John Doe&quot;
}&#39;
</code></pre>
<h4 id="5-根据编号获取一条数据"><a href="#5-根据编号获取一条数据" class="headerlink" title="5. 根据编号获取一条数据"></a>5. 根据编号获取一条数据</h4><pre><code class="lang-bash">curl -XGET &#39;localhost:9200/customer/external/1?pretty&#39;
</code></pre>
<h3 id="BUG"><a href="#BUG" class="headerlink" title="BUG"></a>BUG</h3><h4 id="怎么解决“FORBIDDEN-12-index-read-only”"><a href="#怎么解决“FORBIDDEN-12-index-read-only”" class="headerlink" title="怎么解决“FORBIDDEN/12/index read-only”"></a>怎么解决“FORBIDDEN/12/index read-only”</h4><pre><code class="lang-bash">curl -XPUT -H &quot;Content-Type: application/json&quot; http://localhost:9200/_cluster/settings -d &#39;{ &quot;transient&quot;: { &quot;cluster.routing.allocation.disk.threshold_enabled&quot;: false } }&#39;
curl -XPUT -H &quot;Content-Type: application/json&quot; http://localhost:9200/_all/_settings -d &#39;{&quot;index.blocks.read_only_allow_delete&quot;: null}&#39;
</code></pre>
<h3 id="1-max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144"><a href="#1-max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144" class="headerlink" title="[1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]"></a>[1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</h3><pre><code class="lang-bash">sudo sysctl -w vm.max_map_count=262144
</code></pre>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2019/06/05/neo4j/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2019/05/29/维基中文百科获取/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/kid.jpg" alt="HandsomeCao's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        handsomecao@163.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: handsomecao@163.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2020/03/">三月 2020<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/10/">十月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/08/">八月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/07/">七月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/06/">六月 2019<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/05/">五月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/07/">七月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/06/">六月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/05/">五月 2018<span class="sidebar_archives-count">5</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="tags">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                tags
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/HandsomeCao" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Cao
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->

<script type="text/ls-javascript" id="Bing-Background-script">
    queue.offer(function(){
        $('body').attr('data-original', 'https://api.i-meto.com/bing?');
    });
</script>


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
